%!PS-Adobe-3.0
%%Title: SystemApp.java, IntersectionController.java, MapMakerController.java, SimulationController.java, StartUpController.java, TrafficLightController.java, VehicleController.java, Log.java, Map.java, MapGrid.java
%%For: Violet Avkhukova
%%Creator: a2ps version 4.14
%%CreationDate: Wed Mar 30 21:18:43 2016
%%BoundingBox: 24 24 588 768
%%DocumentData: Clean7Bit
%%Orientation: Portrait
%%Pages: 152
%%PageOrder: Ascend
%%DocumentMedia: Letter 612 792 0 () ()
%%DocumentNeededResources: font Courier
%%+ font Courier-Bold
%%+ font Courier-BoldOblique
%%+ font Courier-Oblique
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Symbol
%%+ font Times-Bold
%%+ font Times-Roman
%%DocumentProcessColors: Black 
%%DocumentSuppliedResources: procset a2ps-a2ps-hdr
%%+ procset a2ps-black+white-Prolog
%%+ encoding ISO-8859-1Encoding
%%EndComments
/a2psdict 200 dict def
a2psdict begin
%%BeginProlog
%%Copyright: (c) 1988, 89, 90, 91, 92, 93 Miguel Santana
%%Copyright: (c) 1995, 96, 97, 98 Akim Demaille, Miguel Santana
% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse

% EPSF import as in the Red Book
/BeginInclude {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack 
  userdict begin
    0 setgray 0 setlinecap
    1 setlinewidth 0 setlinejoin
    10 setmiterlimit [ ] 0 setdash newpath
    gs_languagelevel 1 ne {
      false setstrokeadjust false setoverprint 
    } if
} bind def

/EndInclude {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

/BeginEPSF {
  BeginInclude
  /showpage { } def
} bind def

/EndEPSF {
  EndInclude
} bind def

% Page prefeed
/page_prefeed {         % bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} bind def

/deffont {
  findfont exch scalefont def
} bind def

/reencode_font {
  findfont reencode 2 copy definefont pop def
} bind def

% Function c-show (str => -)
% centers text only according to x axis.
/c-show { 
  dup stringwidth pop
  2 div neg 0 rmoveto
  show
} bind def

% Function l-show (str => -)
% prints texts so that it ends at currentpoint
/l-show {
  dup stringwidth pop neg 
  0 
  rmoveto show
} bind def

% center-fit show (str w => -)
% show centered, and scale currentfont so that the width is less than w
/cfshow {
  exch dup stringwidth pop
  % If the title is too big, try to make it smaller
  3 2 roll 2 copy
  gt
  { % if, i.e. too big
    exch div
    currentfont exch scalefont setfont
  } { % ifelse
    pop pop 
  }
  ifelse
  c-show			% center title
} bind def

% Return the y size of the current font
% - => fontsize
/currentfontsize {
  currentfont /FontMatrix get 3 get 1000 mul
} bind def

% reencode the font
% <encoding-vector> <fontdict> -> <newfontdict>
/reencode { %def
  dup length 5 add dict begin
    { %forall
      % <vector> <key> <val>
      1 index /FID ne 
      { def }{ pop pop } ifelse
    } forall
    /Encoding exch def % -

    % Use the font's bounding box to determine the ascent, descent,
    % and overall height; don't forget that these values have to be
    % transformed using the font's matrix.
    % We use `load' because sometimes BBox is executable, sometimes not.
    % Since we need 4 numbers an not an array avoid BBox from being executed
    /FontBBox load aload pop
    FontMatrix transform /Ascent exch def pop
    FontMatrix transform /Descent exch def pop
    /FontHeight Ascent Descent sub def

    % Get the underline position and thickness if they're defined.
    % Use 1 if they are not defined.
    currentdict /FontInfo 2 copy known
    { get
      /UnderlinePosition 2 copy % <FontInfo> /UP <FontInfo> /UP
      2 copy known
      { get }{ pop pop 1 } ifelse
      0 exch FontMatrix transform exch pop
      def % <FontInfo>

      /UnderlineThickness 2 copy % <FontInfo> /UT <FontInfo> /UT
      2 copy known
      { get }{ pop pop 1 } ifelse
      0 exch FontMatrix transform exch pop
      def % <FontInfo>
      pop % -
    }{ pop pop
    } ifelse

    currentdict
  end 
} bind def

% Function print line number (<string> # -)
/# {
  gsave
    sx cw mul neg 2 div 0 rmoveto
    f# setfont
    c-show
  grestore
} bind def

% -------- Some routines to enlight plain b/w printings ---------

% Underline
% width --
/dounderline {
  currentpoint
  gsave
    moveto
    0 currentfont /Descent get currentfontsize mul rmoveto
    0 rlineto
    stroke
  grestore
} bind def

% Underline a string
% string --
/dounderlinestring {
  stringwidth pop
  dounderline
} bind def

/UL {
  /ul exch store
} bind def

% Draw a box of WIDTH wrt current font
% width --
/dobox {
  currentpoint
  gsave
    newpath
    moveto
    0 currentfont /Descent get currentfontsize mul rmoveto
    dup 0 rlineto
    0 currentfont /FontHeight get currentfontsize mul rlineto
    neg 0 rlineto
    closepath
    stroke
  grestore
} bind def

/BX {
  /bx exch store
} bind def

% Box a string
% string --
/doboxstring {
  stringwidth pop
  dobox
} bind def

%
% ------------- Color routines ---------------
%
/FG /setrgbcolor load def

% Draw the background
% width --
/dobackground {
  currentpoint
  gsave
    newpath
    moveto
    0 currentfont /Descent get currentfontsize mul rmoveto
    dup 0 rlineto
    0 currentfont /FontHeight get currentfontsize mul rlineto
    neg 0 rlineto
    closepath
    bgcolor aload pop setrgbcolor
    fill
  grestore
} bind def

% Draw bg for a string
% string --
/dobackgroundstring {
  stringwidth pop
  dobackground
} bind def


/BG {
  dup /bg exch store
  { mark 4 1 roll ] /bgcolor exch store } if
} bind def


/Show {
  bg { dup dobackgroundstring } if
  ul { dup dounderlinestring } if
  bx { dup doboxstring } if
  show
} bind def

% Function T(ab), jumps to the n-th tabulation in the current line
/T {
  cw mul x0 add
  bg { dup currentpoint pop sub dobackground } if
  ul { dup currentpoint pop sub dounderline } if
  bx { dup currentpoint pop sub dobox } if
  y0 moveto
} bind def

% Function n: move to the next line
/n {
  /y0 y0 bfs sub store
  x0 y0 moveto
} bind def

% Function N: show and move to the next line
/N {
  Show
  /y0 y0 bfs sub store
  x0 y0 moveto
} bind def

/S {
  Show
} bind def

%%BeginResource: procset a2ps-a2ps-hdr 2.0 2
%%Copyright: (c) 1988, 89, 90, 91, 92, 93 Miguel Santana
%%Copyright: (c) 1995, 96, 97, 98 Akim Demaille, Miguel Santana
% Function title: prints page header.
% <ct> <rt> <lt> are passed as argument
/title { 
  % 1. Draw the background
  x v get y v get moveto
  gsave
    0 th 2 div neg rmoveto 
    th setlinewidth
    0.95 setgray
    pw 0 rlineto stroke
  grestore
  % 2. Border it
  gsave
    0.7 setlinewidth
    pw 0 rlineto
    0 th neg rlineto
    pw neg 0 rlineto
    closepath stroke
  grestore
  % stk: ct rt lt
  x v get y v get th sub 1 add moveto
%%IncludeResource: font Helvetica
  fHelvetica fnfs 0.8 mul scalefont setfont
  % 3. The left title
  gsave
    dup stringwidth pop fnfs 0.8 mul add exch % leave space took on stack
    fnfs 0.8 mul hm rmoveto
    show			% left title
  grestore
  exch
  % stk: ct ltw rt
  % 4. the right title
  gsave
    dup stringwidth pop fnfs 0.8 mul add exch % leave space took on stack
    dup
    pw exch stringwidth pop fnfs 0.8 mul add sub
    hm
    rmoveto
    show			% right title
  grestore
  % stk: ct ltw rtw
  % 5. the center title
  gsave
    pw 3 1 roll
    % stk: ct pw ltw rtw
    3 copy 
    % Move to the center of the left room
    sub add 2 div hm rmoveto
    % What is the available space in here?
    add sub fnfs 0.8 mul sub fnfs 0.8 mul sub
    % stk: ct space_left
%%IncludeResource: font Helvetica-Bold
  fHelvetica-Bold fnfs scalefont setfont
    cfshow
  grestore
} bind def

% Function border: prints virtual page border
/border { %def
  gsave				% print four sides
    0 setgray
    x v get y v get moveto
    0.7 setlinewidth		% of the square
    pw 0 rlineto
    0 ph neg rlineto
    pw neg 0 rlineto
    closepath stroke
  grestore
} bind def

% Function water: prints a water mark in background
/water { %def
  gsave
    scx scy moveto rotate
%%IncludeResource: font Times-Bold
  fTimes-Bold 100 scalefont setfont
    .97 setgray
    dup stringwidth pop 2 div neg -50 rmoveto
    show
  grestore
} bind def

% Function rhead: prints the right header
/rhead {  %def
  lx ly moveto
  fHelvetica fnfs 0.8 mul scalefont setfont
  l-show
} bind def

% Function footer (cf rf lf -> -)
/footer {
  fHelvetica fnfs 0.8 mul scalefont setfont
  dx dy moveto
  show

  snx sny moveto
  l-show
  
  fnx fny moveto
  c-show
} bind def
%%EndResource
%%BeginResource: procset a2ps-black+white-Prolog 2.0 1

% Function T(ab), jumps to the n-th tabulation in the current line
/T { 
  cw mul x0 add y0 moveto
} bind def

% Function n: move to the next line
/n { %def
  /y0 y0 bfs sub store
  x0 y0 moveto
} bind def

% Function N: show and move to the next line
/N {
  Show
  /y0 y0 bfs sub store
  x0 y0 moveto
}  bind def

/S {
  Show
} bind def

/p {
  false UL
  false BX
  fCourier bfs scalefont setfont
  Show
} bind def

/sy {
  false UL
  false BX
  fSymbol bfs scalefont setfont
  Show
} bind def

/k {
  false UL
  false BX
  fCourier-Oblique bfs scalefont setfont
  Show
} bind def

/K {
  false UL
  false BX
  fCourier-Bold bfs scalefont setfont
  Show
} bind def

/c {
  false UL
  false BX
  fCourier-Oblique bfs scalefont setfont
  Show
} bind def

/C {
  false UL
  false BX
  fCourier-BoldOblique bfs scalefont setfont
  Show 
} bind def

/l {
  false UL
  false BX
  fHelvetica bfs scalefont setfont
  Show
} bind def

/L {
  false UL
  false BX
  fHelvetica-Bold bfs scalefont setfont
  Show 
} bind def

/str{
  false UL
  false BX
  fTimes-Roman bfs scalefont setfont
  Show
} bind def

/e{
  false UL
  true BX
  fHelvetica-Bold bfs scalefont setfont
  Show
} bind def

%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier
%%IncludeResource: font Courier-Oblique
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Symbol
%%IncludeResource: font Courier-BoldOblique
%%BeginResource: encoding ISO-8859-1Encoding
/ISO-8859-1Encoding [
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright 
/parenleft /parenright /asterisk /plus /comma /minus /period /slash 
/zero /one /two /three /four /five /six /seven 
/eight /nine /colon /semicolon /less /equal /greater /question 
/at /A /B /C /D /E /F /G 
/H /I /J /K /L /M /N /O 
/P /Q /R /S /T /U /V /W 
/X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore 
/quoteleft /a /b /c /d /e /f /g 
/h /i /j /k /l /m /n /o 
/p /q /r /s /t /u /v /w 
/x /y /z /braceleft /bar /braceright /asciitilde /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/space /exclamdown /cent /sterling /currency /yen /brokenbar /section 
/dieresis /copyright /ordfeminine /guillemotleft /logicalnot /hyphen /registered /macron 
/degree /plusminus /twosuperior /threesuperior /acute /mu /paragraph /bullet 
/cedilla /onesuperior /ordmasculine /guillemotright /onequarter /onehalf /threequarters /questiondown 
/Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla 
/Egrave /Eacute /Ecircumflex /Edieresis /Igrave /Iacute /Icircumflex /Idieresis 
/Eth /Ntilde /Ograve /Oacute /Ocircumflex /Otilde /Odieresis /multiply 
/Oslash /Ugrave /Uacute /Ucircumflex /Udieresis /Yacute /Thorn /germandbls 
/agrave /aacute /acircumflex /atilde /adieresis /aring /ae /ccedilla 
/egrave /eacute /ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis 
/eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /divide 
/oslash /ugrave /uacute /ucircumflex /udieresis /yacute /thorn /ydieresis 
] def
%%EndResource
% Initialize page description variables.
/sh 792 def
/sw 612 def
/llx 24 def
/urx 588 def
/ury 768 def
/lly 24 def
/#copies 1 def
/th 20.000000 def
/fnfs 15 def
/bfs 11.547912 def
/cw 6.928747 def

% Dictionary for ISO-8859-1 support
/iso1dict 8 dict begin
  /fCourier ISO-8859-1Encoding /Courier reencode_font
  /fCourier-Bold ISO-8859-1Encoding /Courier-Bold reencode_font
  /fCourier-BoldOblique ISO-8859-1Encoding /Courier-BoldOblique reencode_font
  /fCourier-Oblique ISO-8859-1Encoding /Courier-Oblique reencode_font
  /fHelvetica ISO-8859-1Encoding /Helvetica reencode_font
  /fHelvetica-Bold ISO-8859-1Encoding /Helvetica-Bold reencode_font
  /fTimes-Bold ISO-8859-1Encoding /Times-Bold reencode_font
  /fTimes-Roman ISO-8859-1Encoding /Times-Roman reencode_font
currentdict end def
/bgcolor [ 0 0 0 ] def
/bg false def
/ul false def
/bx false def
% The font for line numbering
/f# /Helvetica findfont bfs .6 mul scalefont def
/fSymbol /Symbol findfont def
/hm fnfs 0.25 mul def
/pw
   cw 81.400000 mul
def
/ph
   689.410325 th add
def
/pmw 0 def
/pmh 0 def
/v 0 def
/x [
  0
] def
/y [
  pmh ph add 0 mul ph add
] def
/scx sw 2 div def
/scy sh 2 div def
/snx urx def
/sny lly 2 add def
/dx llx def
/dy sny def
/fnx scx def
/fny dy def
/lx snx def
/ly ury fnfs 0.8 mul sub def
/sx 0 def
/tab 8 def
/x0 0 def
/y0 0 def
%%EndSetup

%%Page: (1) 1
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p 8 T () S
(package) K
( londonsw;) p n
() N
() S 8 T () S
(import) K
( londonsw.controller.StartUpController;) p n
() N
(/**) C n
( * This is the main class that first gets executed by the system) N
( * It starts the View components \(and from there will branch to either simulatio) N
(n or map-making\)) N
( */) N
(public) K
( ) p
(class) K
( ) p
(SystemApp) L
( {) p n
() S 8 T () S
(public) K
( ) p
(static) K
( ) p
(void) k
( main\(String[] args\) ) p
(throws) K
( Exception {) p n
() S 8 T () S 16 T (StartUpController sc = StartUpController.getInstance\(\);) N
() S 8 T () S 16 T (sc.startSoftware\(args\);) N
() S 8 T (}) N
(}) S
(SystemApp.java) (Page 1/1) (Mar 25, 16 8:55) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (1/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 2
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.controller;) p n
() N
() N
(import) K
( londonsw.model.simulation.components.Intersection;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
(import) K
( londonsw.view.simulation.IntersectionDecorator;) p n
() N
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.HashMap;) p n
(import) K
( java.util.Map;) p n
() N
() N
(public) K
( ) p
(class) K
( ) p
(IntersectionController) L
( {) p n
(    ) S
(private) K
( ) p
(static) K
( Map<Intersection,IntersectionDecorator> intersections = ) p
(new) K
( H) p n
(ashMap<Intersection,IntersectionDecorator>\(\);) N
(    ) S
(private) K
( ) p
(static) K
( ArrayList<Intersection> allIntersections = ) p
(new) K
( ArrayList<>\(\);) p n
() N
(    ) S
(/**) C n
(     * Prevents instantiation of this class) N
(     */) N
(    ) p
(protected) K
( IntersectionController\(\) {  }) p n
() N
(    ) S
(/**) C n
(     * Register an instance of an Intersection to and IntersectionDecorator, and) N
( adds the Intersection to a list to keep) N
(     * track of) N
(     * @param i the instance of Intersection to register) N
(     * @param gui the instance of IntersectionDecorator for that intersection) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( addIntersectionAndDecoratorPair\(Intersection i, Intersect) p n
(ionDecorator gui\) {) N
(        intersections.put\(i,gui\);) N
(        allIntersections.add\(i\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Retrieve the decorator for that specific Intersection) N
(     * @param i the Intersection to get the decorator for) N
(     * @return the decorator associated with that Intersection) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( IntersectionDecorator getIntersectionDecoratorForIntersection\() p n
(Intersection i\) {) N
(        ) S
(return) K
( intersections.get\(i\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets all Intersections in the system) N
(     * @return ArrayList of all Intersections in the system) N
(     */) N
(    ) p
(public) K
( ArrayList<Intersection> getAllIntersections\(\) {) p n
(        ) S
(return) K
( allIntersections;) p n
(    }) N
() N
() N
(    ) S
(/**) C n
(     * This method is used for determining which vehicle will turn first in an i) N
(ntersection. By generating priorities,) N
(     * this will prevent cars from driving into each other in intersections.) N
(     * @param intersection the intersection where the vehicles are) N
(IntersectionController.java) (Page 1/2) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (2/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 3
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * @param vehicles array list of vehicles with priorities set) C n
(     * @return true if this method succeeds \(always true\)) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(boolean) k
( vehicleTurnFirst\(Intersection intersection, ArrayList<) p n
(Vehicle> vehicles\) ) S
(throws) K
( Exception {) p n
(        ArrayList<Integer>  randomPriority = \(ArrayList < Integer>\) intersection) N
(.generateRandom\(\).clone\(\);) N
(        intersection.vehicleTurnFirst\(intersection.giveVehiclePriorities\(randomP) N
(riority\)\);) N
() N
(        ) S
(return) K
( ) p
(true) k
(;) p n
(    }) N
() N
() N
(}) N
(IntersectionController.java) (Page 2/2) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (3/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 4
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.controller;) p n
() N
(import) K
( javafx.stage.Stage;) p n
(import) K
( londonsw.view.mapcreation.ComponentType;) p n
(import) K
( londonsw.view.mapcreation.MapMakerScreen;) p n
() N
(/**) C n
( * The controller for the Map making aspect of this software) N
( */) N
(public) K
( ) p
(class) K
( ) p
(MapMakerController) L
( {) p n
() N
(    ) S
(private) K
( ) p
(int) k
( width;) p n
(    ) S
(private) K
( ) p
(int) k
( height;) p n
(    ) S
(private) K
( Stage primaryStage;) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ComponentType currentFocused;) p n
(    ) S
(private) K
( ) p
(static) K
( ComponentType previousFocused;) p n
() N
(    ) S
(/**) C n
(     * Creates an instance of a MapMakerController with a stage in which to draw) N
( the Map making screen) N
(     * @param primaryStage the stage in which to draw the Map making screen) N
(     */) N
(    ) p
(public) K
( MapMakerController\(Stage primaryStage\) {) p n
(        this.primaryStage = primaryStage;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Tells this controller what width and height the user chose for their map) N
(     * @param width the width of the user's new map) N
(     * @param height the height of the user's new map) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setWidthAndHeight\() p
(int) k
( width, ) p
(int) k
( height\) {) p n
(        this.width = width;) N
(        this.height = height;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Draws the screen using the stage given and displays it to the user) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( drawScreen\(\) ) p
(throws) K
( Exception{) p n
(        MapMakerScreen mapMakerScreen = ) S
(new) K
( MapMakerScreen\(width, height\);) p n
(        mapMakerScreen.drawScreen\(primaryStage\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Get the width the user chose for their new map) N
(     * @return width of the map) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getWidth\(\) {) p n
(        ) S
(return) K
( width;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Get the height the user chose for their map) N
(     * @return height of the map) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getHeight\(\) {) p n
(MapMakerController.java) (Page 1/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (4/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 5
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(return) K
( height;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets what the current focused is in the screen. This is what the user cli) N
(cked last in the screen. It is of type) N
(     * ComponentType enum, which can be a RoadNS image, Map_Square, Nothing, etc) N
(     * @return ComponentType enum of what the user clicked last) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ComponentType getCurrentFocused\(\) {) p n
(        ) S
(return) K
( currentFocused;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the current focused in the map, this is set after the user clicks so) N
(mething) N
(     * @param focused what was last clicked on by the user, converted to type en) N
(um ComponentType) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( setCurrentFocused\(ComponentType focused\) {) p n
(        currentFocused = focused;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets what the user previously clicked \(the click before the current click) N
(\)) N
(     * @return ComponentType of what was clicked on the click before the last) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ComponentType getPreviousFocused\(\) {) p n
(        ) S
(return) K
( previousFocused;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the previously clicked before last item) N
(     * @param prev sets the click before the last click to what was focused, con) N
(verted to type ComponentType) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( setPreviousFocused\(ComponentType prev\) {) p n
(        previousFocused = prev;) N
(    }) N
() N
(}) N
(MapMakerController.java) (Page 2/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (5/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 6
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.controller;) p n
() N
(import) K
( javafx.stage.Stage;) p n
(import) K
( londonsw.model.simulation.Log;) p n
(import) K
( londonsw.model.simulation.Map;) p n
(import) K
( londonsw.view.simulation.SimulationScreen;) p n
() N
(import) K
( java.text.SimpleDateFormat;) p n
(import) K
( java.util.Date;) p n
() N
(/**) C n
( * This is the controller for simulations in our View. It draws the screen and g) N
(enerates the Log for the simulation.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(SimulationController) L
( {) p n
() N
(    ) S
(private) K
( Stage primaryStage;) p n
(    ) S
(private) K
( String mapName;) p n
(    ) S
(private) K
( String logFileName;) p n
() N
(    ) S
(/**) C n
(     * Creates a new SimulationController to control the simulation) N
(     * @param primaryStage the stage in which to display the new screen) N
(     */) N
(    ) p
(public) K
( SimulationController\(Stage primaryStage\) {) p n
(        this.primaryStage = primaryStage;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the name of the map that the user wants to open) N
(     * @param mapName name of map file that user wants to simulate vehicles on) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setMapName\(String mapName\) {) p n
(        this.mapName = mapName;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Draws the screen where the simulation will be taking place, and creates t) N
(he Log to log all activity) N
(     * in the simulation) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( drawScreen\(\) ) p
(throws) K
( Exception {) p n
(        Map map = Map.loadMap\(mapName\);) N
(        SimulationScreen screen = ) S
(new) K
( SimulationScreen\(map\);) p n
(        screen.drawScreen\(primaryStage\);) N
(        generateLogFileName\(\);) N
(        Log log = ) S
(new) K
( Log\(getLogFileName\(\)\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Get the name of the log file for that specific simulation) N
(     * @return) N
(     */) N
(    ) p
(public) K
( String getLogFileName\(\) {) p n
(        ) S
(return) K
( logFileName;) p n
(    }) N
() N
(    ) S
(/**) C n
(SimulationController.java) (Page 1/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (6/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 7
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * Generates a file name for the log file for that simulation. It is in the ) C n
(format) N
(     * Log_DATE.log, where DATE is the YEAR-MONTH-DAY-HOUR-MINUTES-SECONDS) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( generateLogFileName\(\) {) p n
(        String date = ) S
(new) K
( SimpleDateFormat\(") p
(yyyy-MM-dd-HH-mm-ss) str
("\).format\() p
(new) K
( Dat) p n
(e\(\)\);) N
(        logFileName = ") S
(Log_) str
(" + date;) p n
(    }) N
() N
(}) N
(SimulationController.java) (Page 2/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (7/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 8
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.controller;) p n
() N
() N
(import) K
( javafx.application.Application;) p n
(import) K
( javafx.application.Platform;) p n
(import) K
( javafx.collections.FXCollections;) p n
(import) K
( javafx.collections.ObservableList;) p n
(import) K
( javafx.event.ActionEvent;) p n
(import) K
( javafx.fxml.FXMLLoader;) p n
(import) K
( javafx.geometry.Insets;) p n
(import) K
( javafx.geometry.Pos;) p n
(import) K
( javafx.scene.Node;) p n
(import) K
( javafx.scene.Parent;) p n
(import) K
( javafx.scene.Scene;) p n
(import) K
( javafx.scene.control.*;) p n
(import) K
( javafx.scene.layout.GridPane;) p n
(import) K
( javafx.scene.layout.VBox;) p n
(import) K
( javafx.scene.text.Font;) p n
(import) K
( javafx.scene.text.FontWeight;) p n
(import) K
( javafx.stage.FileChooser;) p n
(import) K
( javafx.stage.Stage;) p n
(import) K
( java.io.File;) p n
() N
(import) K
( javafx.stage.StageStyle;) p n
(import) K
( javafx.util.Pair;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
() N
(//import java.awt.*;) c n
(import) K
( java.io.IOException;) p n
(import) K
( java.util.Optional;) p n
() N
(/**) C n
( *  This is the controller that gets called by the main SystemApp class. This co) N
(ntroller initiates all GUI screens.) N
( */) N
(@SuppressWarnings\(") p
(Duplicates) str
("\)) p n
(public) K
( ) p
(class) K
( ) p
(StartUpController) L
( ) p
(extends) K
( Application {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( StartUpController instance;) p n
() N
(    ) S
(public) K
( StartUpController\(\) { }) p n
() N
(    ) S
(public) K
( ) p
(static) K
( StartUpController getInstance\(\) {) p n
(        ) S
(if) K
(\(instance == ) p
(null) k
(\)) p n
(            instance = ) S
(new) K
( StartUpController\(\);) p n
(        ) S
(return) K
( instance;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( startSoftware\(String[] args\) {) p n
(        launch\(args\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * This is the first method that gets called in the system. It loads the Sta) N
(rtScreen fxml file, which contains) N
(     * the START button.) N
(     * @param primaryStage the stage that initially loads) N
(     * @throws Exception) N
(     */) N
(StartUpController.java) (Page 1/5) (Mar 25, 16 10:42) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (8/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 9
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( start\(Stage primaryStage\) ) p
(throws) K
( Exception {) p n
(        primaryStage.setTitle\(") S
(LondonSW Traffic Simulator) str
("\);) p n
() N
(        VBox vBox = ) S
(new) K
( VBox\(\);) p n
(        vBox.setPrefSize\(600,400\);) N
(        vBox.setSpacing\(10\);) N
(        vBox.setStyle\(") S
(-fx-background-color:papayawhip) str
("\);) p n
(        vBox.setAlignment\(Pos.CENTER\);) N
() N
(        Label londonSWLabel = ) S
(new) K
( Label\(") p
(London SW) str
("\);) p n
(        londonSWLabel.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 20\)\);) p n
(        Label trafficSimLabel = ) S
(new) K
( Label\(") p
(Traffic Simulator) str
("\);) p n
(        trafficSimLabel.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.EXTRA_BOLD) p n
(, 22\)\);) N
(        trafficSimLabel.setPadding\() S
(new) K
( Insets\(0,0,50,0\)\);) p n
(        Button startButton = ) S
(new) K
( Button\(") p
(Start) str
("\);) p n
(        startButton.setPrefSize\(300,150\);) N
(        startButton.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        startButton.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.EXTRA_BOLD, 26) p n
(\)\);) N
() N
(        vBox.getChildren\(\).add\(londonSWLabel\);) N
(        vBox.getChildren\(\).add\(trafficSimLabel\);) N
(        vBox.getChildren\(\).add\(startButton\);) N
() N
(        Scene scene = ) S
(new) K
( Scene\(vBox\);) p n
(        primaryStage.setScene\(scene\);) N
(        primaryStage.setResizable\() S
(false) k
(\);) p n
(        primaryStage.show\(\);) N
(        primaryStage.centerOnScreen\(\);) N
() N
(        startButton.setOnMouseClicked\(click -> {) N
(            goToChooseModeScreen\(primaryStage\);) N
(        }\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * This is the method that gets called when the user hits the START button o) N
(n the initial screen. It) N
(     * loads the "Choose Mode" screen, which gives 2 options: Opening a pre-made) N
( map, or users building their own map.) N
(     * @param primaryStage the stage to display the screen in) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( goToChooseModeScreen\(Stage primaryStage\) {) p n
(        VBox vBox = ) S
(new) K
( VBox\(\);) p n
(        vBox.setPrefSize\(600,400\);) N
(        vBox.setSpacing\(50\);) N
(        vBox.setStyle\(") S
(-fx-background-color:papayawhip) str
("\);) p n
(        vBox.setAlignment\(Pos.CENTER\);) N
(        Platform.runLater\(\(\) -> vBox.requestFocus\(\)\);) N
() N
(        Button openMap = ) S
(new) K
( Button\(") p
(Open a Pre-made Map) str
("\);) p n
(        openMap.setPrefSize\(300, 90\);) N
(        openMap.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        openMap.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.EXTRA_BOLD, 16\)\);) p n
() N
(        Button makeMap = ) S
(new) K
( Button\(") p
(Make a new Map) str
("\);) p n
(        makeMap.setPrefSize\(300, 90\);) N
(StartUpController.java) (Page 2/5) (Mar 25, 16 10:42) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (9/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 10
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        makeMap.setStyle\(") p
(-fx-base:Gold) str
("\);) p n
(        makeMap.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 16\)\);) p n
() N
(        vBox.getChildren\(\).add\(openMap\);) N
(        vBox.getChildren\(\).add\(makeMap\);) N
() N
(        Scene scene = ) S
(new) K
( Scene\(vBox\);) p n
(        primaryStage.setScene\(scene\);) N
() N
(        openMap.setOnMouseClicked\(click -> {) N
(            ) S
(try) K
( {) p n
(                goToSimulationMode\(primaryStage\);) N
(            } ) S
(catch) K
( \(Exception e\) {) p n
(                e.printStackTrace\(\);) N
(            }) N
(        }\);) N
() N
(        makeMap.setOnMouseClicked\(click -> {) N
(            goToMapMakerMode\(primaryStage\);) N
(        }\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * When the user click "Choose Pre-made map..." button, it will go to Simula) N
(tionMode screen. It will first) N
(     * prompt the user to open a file \(only Map files are allowed to be opened\),) N
( set a ticker interval speed,) N
(     * and then it will go to draw the simulation mode screen.) N
(     * @param primaryStage the click that caused this method invocation) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( goToSimulationMode\(Stage primaryStage\) ) p
(throws) K
( Exception {) p n
(        FileChooser chooser=) S
(new) K
( FileChooser\(\);) p n
(        chooser.setTitle\(") S
(Open Map) str
("\);) p n
(        chooser.getExtensionFilters\(\).add\() S
(new) K
( FileChooser.ExtensionFilter\(") p
(Map Fi) str n
(le \(*.map\)) S
(", ") p
(*.map) str
("\)\);) p n
(        File file = chooser.showOpenDialog\() S
(new) K
( Stage\(\)\);) p n
() N
() N
(        ) S
(if) K
(\(file!=) p
(null) k
(\)) p n
(        {) N
(//            String mapName = file.getName\(\);) c n
(            String mapName = file.getAbsolutePath\(\);) p n
() N
() N
(            Dialog<Long> dialog = ) S
(new) K
( Dialog<>\(\);) p n
(            dialog.setTitle\(") S
(Choose Ticker Interval Duration) str
("\);) p n
(            dialog.setHeaderText\(") S
(Choose a duration \(in milliseconds\) for\\nthe ticker in the system.) str
("\)) p n
(;) N
(            dialog.setGraphic\() S
(null) k
(\);) p n
(            dialog.getDialogPane\(\).getButtonTypes\(\).addAll\(ButtonType.OK\);) N
(            dialog.initStyle\(StageStyle.UNDECORATED\);) N
() N
(            GridPane grid = ) S
(new) K
( GridPane\(\);) p n
(            grid.setHgap\(10\);) N
(            grid.setVgap\(10\);) N
(            grid.setPadding\() S
(new) K
( Insets\(20, 80, 10, 10\)\);) p n
(            grid.add\() S
(new) K
( Label\(") p
(Duration: ) str
("\), 0, 0\);) p n
(            Spinner<Double> spinner = ) S
(new) K
( Spinner<Double>\(100, 2000, Ticker.getT) p n
(StartUpController.java) (Page 3/5) (Mar 25, 16 10:42) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (10/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 11
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ickInterval\(\), 100\);) p n
(            grid.add\(spinner, 1, 0\);) N
(            dialog.getDialogPane\(\).setContent\(grid\);) N
(            Platform.runLater\(\(\) -> spinner.requestFocus\(\)\);) N
() N
(            dialog.setResultConverter\(dialogButton -> {) N
(                ) S
(if) K
(\(dialogButton == ButtonType.OK\) {) p n
(                    ) S
(double) k
( value =  spinner.getValue\(\);) p n
(                    ) S
(return) K
( \() p
(long) k
(\) value;) p n
(                }) N
(                ) S
(return) K
( ) p
(null) k
(;) p n
(            }\);) N
() N
(            Optional<Long> result = dialog.showAndWait\(\);) N
(            result.ifPresent\(aLong -> {) N
(                Ticker.setTickInterval\(aLong\);) N
(                Ticker.start\(\);) N
(            }\);) N
() N
(            ) S
(//Decorate map to extend to GUI functionality) c n
(            SimulationController simulationController = ) p
(new) K
( SimulationController) p n
(\(primaryStage\);) N
(            simulationController.setMapName\(mapName\);) N
(            simulationController.drawScreen\(\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * This method gets called when the user chooses to go to Map Maker mode. It) N
( will prompt the user for) N
(     * the width and height that they want for their new map, in the range from ) N
(5 to 30 for both width and) N
(     * height. It will then bring the user to the screen where they can build th) N
(e map.) N
(     * @param primaryStage the click event that caused this method invocation) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( goToMapMakerMode\(Stage primaryStage\) {) p n
(        Dialog<Pair<String, String>> dialog = ) S
(new) K
( Dialog<>\(\);) p n
(        dialog.setTitle\(") S
(Choose Map Size) str
("\);) p n
(        dialog.setHeaderText\(") S
(Choose new map's width and height) str
("\);) p n
(        dialog.setGraphic\() S
(null) k
(\);) p n
() N
(        GridPane grid = ) S
(new) K
( GridPane\(\);) p n
(        grid.setHgap\(10\);) N
(        grid.setVgap\(10\);) N
(        grid.setPadding\() S
(new) K
( Insets\(20, 150, 10, 10\)\);) p n
() N
(        dialog.getDialogPane\(\).getButtonTypes\(\).addAll\(ButtonType.OK, ButtonType) N
(.CANCEL\);) N
() N
(        ObservableList<Integer> choices = FXCollections.observableArrayList\(\);) N
(        ) S
(for) K
(\() p
(int) k
( i = 5; i <= 30; i++\) {) p n
(            choices.add\(i\);) N
(        }) N
() N
(        ChoiceBox<Integer> widthBox = ) S
(new) K
( ChoiceBox<>\(\);) p n
(        widthBox.setItems\(choices\);) N
(        widthBox.setMinWidth\(100\);) N
(        Platform.runLater\(\(\) -> widthBox.requestFocus\(\)\);) N
(StartUpController.java) (Page 4/5) (Mar 25, 16 10:42) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (11/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 12
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ChoiceBox<Integer> heightBox = ) p
(new) K
( ChoiceBox<>\(\);) p n
(        heightBox.setItems\(choices\);) N
(        heightBox.setMinWidth\(100\);) N
() N
(        grid.add\() S
(new) K
( Label\(") p
(Width:) str
("\), 0, 0\);) p n
(        grid.add\(widthBox, 1, 0\);) N
(        grid.add\() S
(new) K
( Label\(") p
(Height:) str
("\), 0, 1\);) p n
(        grid.add\(heightBox, 1, 1\);) N
() N
(        dialog.getDialogPane\(\).setContent\(grid\);) N
() N
(        Button doneBtn = \(Button\) dialog.getDialogPane\(\).lookupButton\(ButtonType) N
(.OK\);) N
(        doneBtn.setDisable\() S
(true) k
(\);) p n
(        doneBtn.disableProperty\(\).bind\() N
(                widthBox.valueProperty\(\).isNull\(\)) N
(                .or\(heightBox.valueProperty\(\).isNull\(\)\)) N
(        \);) N
() N
(        dialog.setResultConverter\(dialogButton -> {) N
(            ) S
(if) K
(\(dialogButton == ButtonType.OK\) {) p n
(                ) S
(return) K
( ) p
(new) K
( Pair<>\(widthBox.getValue\(\).toString\(\),heightBox.getVa) p n
(lue\(\).toString\(\)\);) N
(            }) N
(            ) S
(return) K
( ) p
(null) k
(;) p n
(        }\);) N
() N
(        Optional<Pair<String, String>> result = dialog.showAndWait\(\);) N
() N
(        result.ifPresent\(widthAndHeight -> {) N
(            ) S
(int) k
( width = Integer.parseInt\(widthAndHeight.getKey\(\)\);) p n
(            ) S
(int) k
( height = Integer.parseInt\(widthAndHeight.getValue\(\)\);) p n
() N
(            MapMakerController mapMakerController = ) S
(new) K
( MapMakerController\(prima) p n
(ryStage\);) N
(            mapMakerController.setWidthAndHeight\(width,height\);) N
(            ) S
(try) K
( {) p n
(                mapMakerController.drawScreen\(\);) N
(            } ) S
(catch) K
( \(Exception e\) {) p n
(                e.printStackTrace\(\);) N
(            }) N
(        }\);) N
(    }) N
() N
(}) N
(StartUpController.java) (Page 5/5) (Mar 25, 16 10:42) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (12/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 13
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.controller;) p n
() N
(import) K
( londonsw.model.simulation.components.LightColour;) p n
(import) K
( londonsw.model.simulation.components.TrafficLight;) p n
(import) K
( londonsw.view.simulation.TrafficLightDecorator;) p n
() N
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.HashMap;) p n
(import) K
( java.util.Map;) p n
() N
(/**) C n
( * Controls all the traffic lights. This gets notified when the traffic light ch) N
(anges in the model, and it) N
( * does the necessary work to change the GUI to display the new model.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(TrafficLightController) L
( {) p n
() N
(    ) S
(private) K
( Map<TrafficLight, TrafficLightDecorator> trafficLights;) p n
(    ) S
(private) K
( ArrayList<TrafficLight> allLights;) p n
(    ) S
(private) K
( ) p
(long) k
( DURATION;) p n
(    ) S
(private) K
( ) p
(boolean) k
( lightsEnabled;) p n
() N
(    ) S
(private) K
( ) p
(static) K
( TrafficLightController instance;) p n
() N
(    ) S
(/**) C n
(     * Creates a new instance of a TrafficLightController. It is set to protecte) N
(d so that the creation of this) N
(     * controller is controlled. This class follows the singleton pattern, so th) N
(ere can be at most one instance) N
(     * of this class in the system.) N
(     */) N
(    ) p
(protected) K
( TrafficLightController\(\) {) p n
(        trafficLights = ) S
(new) K
( HashMap<>\(\);) p n
(        allLights = ) S
(new) K
( ArrayList<>\(\);) p n
(        DURATION = 3000;) N
(        lightsEnabled = ) S
(true) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gives an instance of this class. This is what needs to be called if an in) N
(stance is needed. If there is) N
(     * not an instance created, it creates a new one, otherwise it returns an ex) N
(isting instance.) N
(     * @return) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( TrafficLightController getInstance\(\) {) p n
(        ) S
(if) K
(\(instance == ) p
(null) k
(\) {) p n
(            instance = ) S
(new) K
( TrafficLightController\(\);) p n
(        }) N
(        ) S
(return) K
( instance;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets whether the traffic lights are enabled or not) N
(     * @return true if all traffic lights are working and enabled, false otherwi) N
(se) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( areLightsEnabled\(\) {) p n
(        ) S
(return) K
( lightsEnabled;) p n
(TrafficLightController.java) (Page 1/4) (Mar 24, 16 20:54) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (13/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 14
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
(    ) S
(/**) C n
(     * Sets the lights boolean to true. Useful if re-loading a map and wanting t) N
(o go back to default state.) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setLightsToEnabled\(\) {) p n
(        lightsEnabled = ) S
(true) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Disables or enables all traffic lights in the system. If traffic lights a) N
(re disabled, cars will) N
(     * move freely without stopping anywhere. If enabled, they listen to the tra) N
(ffic lights.) N
(     * @param disable true disables the lights, false enables the lights) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( disableLights\() p
(boolean) k
( disable\) {) p n
(        ) S
(if) K
(\(disable\) {) p n
(            lightsEnabled = ) S
(false) k
(;) p n
(            ) S
(for) K
(\(TrafficLight t : allLights\) {) p n
(                TrafficLightDecorator decorator = trafficLights.get\(t\);) N
(                ) S
(if) K
(\(decorator != ) p
(null) k
(\)) p n
(                    decorator.hideCircle\() S
(true) k
(\);) p n
(            }) N
(        }) N
(        ) S
(else) K
( {) p n
(            lightsEnabled = ) S
(true) k
(;) p n
(            ) S
(for) K
(\(TrafficLight t : allLights\) {) p n
(                TrafficLightDecorator decorator = trafficLights.get\(t\);) N
(                ) S
(if) K
(\(decorator != ) p
(null) k
(\)) p n
(                    decorator.hideCircle\() S
(false) k
(\);) p n
(            }) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Creates a new TrafficLightDecorator for the given TrafficLight) N
(     * @param tl the TrafficLight for which to create the decorator) N
(     * @return the newly created decorated for that TrafficLight) N
(     */) N
(    ) p
(public) K
( TrafficLightDecorator createNewDecorator\(TrafficLight tl\) {) p n
(        ) S
(return) K
( ) p
(new) K
( TrafficLightDecorator\(tl\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Called by the TrafficLight \(in the model\) when the color changes. It tell) N
(s the corresponding) N
(     * TrafficLightDecorator to change its color in the GUI.) N
(     * @param colour the new color to be) N
(     * @param tl a TrafficLight that had its color changed) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( colourChanged\(LightColour colour, TrafficLight tl\) {) p n
(        ) S
(if) K
(\(trafficLights.get\(tl\) == ) p
(null) k
(\) {) p n
(            ) S
(return) K
(;) p n
(        }) N
(        trafficLights.get\(tl\).setGUIColour\(colour\);) N
(    }) N
() N
(TrafficLightController.java) (Page 2/4) (Mar 24, 16 20:54) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (14/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 15
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Register a TrafficLight \(in the model\) to a TrafficLightDecorator \(in the) N
( GUI\), and add to an) N
(     * ArrayList to keep track of all lights) N
(     * @param tl the TrafficLight instance from the model) N
(     * @param gui the corresponding instance of the TrafficLightDecorator for th) N
(at TrafficLight) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( addTrafficLightAndDecoratorPair\(TrafficLight tl, TrafficLightDec) p n
(orator gui\) {) N
(        trafficLights.put\(tl,gui\);) N
(        allLights.add\(tl\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * If you need to get the decorator for that TrafficLight outside of this cl) N
(ass, use this method) N
(     * @param tl a TrafficLight that you are querying for to get its decorator) N
(     * @return the corresponding TrafficLightDecorator for that TrafficLight) N
(     */) N
(    ) p
(public) K
( TrafficLightDecorator getTrafficLightGUI\(TrafficLight tl\) {) p n
(        ) S
(return) K
( trafficLights.get\(tl\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Get a list of all the TrafficLights in the system) N
(     * @return ArrayList of all lights) N
(     */) N
(    ) p
(public) K
( ArrayList<TrafficLight> getAllTrafficLights\(\) {) p n
(        ) S
(return) K
( allLights;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the duration length for traffic lights. Traffic lights call this met) N
(hod to know how long to be a certain color.) N
(     * @return length of duration in millis) N
(     */) N
(    ) p
(public) K
( ) p
(long) k
( getDurationLength\(\) {) p n
(        ) S
(return) K
( DURATION;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the duration length for traffic lights) N
(     * @param duration the duration for the traffic lights in millis) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setDurationLength\() p
(long) k
( duration\) {) p n
(        this.DURATION = duration;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Set the duration of all the traffic lights in the map) N
(     * @param duration the duration of the traffic light in milliseconds) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setTrafficLightDuration\() p
(long) k
( duration\) {) p n
(        ) S
(for) K
(\(TrafficLight t : allLights\) {) p n
(            t.setDuration\(duration\);) N
(        }) N
(    }) N
() N
(TrafficLightController.java) (Page 3/4) (Mar 24, 16 20:54) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (15/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 16
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Gets the HashMap of all TrafficLight,TrafficLightDecorator pairs) N
(     * @return a Map of all TrafficLight, TrafficLightDecorator pairs) N
(     */) N
(    ) p
(public) K
( Map getTrafficLightsMap\(\) {) p n
(        ) S
(return) K
( trafficLights;) p n
(    }) N
() N
(}) S
(TrafficLightController.java) (Page 4/4) (Mar 24, 16 20:54) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (16/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 17
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.controller;) p n
() N
() N
(import) K
( londonsw.model.simulation.components.Lane;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
(import) K
( londonsw.view.simulation.VehicleGUIDecorator;) p n
() N
() N
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.HashMap;) p n
(import) K
( java.util.Map;) p n
() N
(/**) C n
( * This is the controller for all vehicle movement. It keeps track of all vehicl) N
(es and their decorators. It also) N
( * has the methods that facilitates vehicle movement in the model and in the map) N
(.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(VehicleController) L
( {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( Map<Vehicle, VehicleGUIDecorator> vehiclesAndDecorators = ) p
(new) K
() p n
( HashMap<>\(\);) N
(    ) S
(private) K
( ) p
(static) K
( ArrayList<Vehicle> allVehicles = ) p
(new) K
( ArrayList<>\(\);) p n
() N
(    ) S
(/**) C n
(     * Register a car to a specific CarGuiDecorator so we can retrieve it and dr) N
(aw the decorator for) N
(     * for that car. This replaces the need to pass the CarGuiDecorator as a par) N
(ameter. This also adds) N
(     * the vehicle to an ArrayList, only to keep track of all cars in the system) N
( and nothing more.) N
(     *) N
(     * @param vehicle   an instance of a Vehicle type) N
(     * @param decorator the CarGuiDecorator for that specific vehicle) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( addVehicleAndDecoratorPair\(Vehicle vehicle, VehicleGUIDec) p n
(orator decorator\) {) N
(        vehiclesAndDecorators.put\(vehicle, decorator\);) N
(        allVehicles.add\(vehicle\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Removes the vehicle instance from the list of all vehicles and the map of) N
( all vehicle,decorator pairs) N
(     * @param v the vehicle to remove) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( removeFromListAndMap\(Vehicle v\) {) p n
(        allVehicles.remove\(v\);) N
(        vehiclesAndDecorators.remove\(v\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets all the vehicles in the system) N
(     * @return ArrayList with all vehicles in the system) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ArrayList<Vehicle> getVehicleList\(\){) p n
(        ) S
(return) K
( allVehicles;) p n
(    }) N
() N
(VehicleController.java) (Page 1/4) (Mar 24, 16 22:32) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (17/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 18
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Given an index in the array, this removes the vehicle from existence.) N
(     * @param index the index in the list allVehicles that the vehicle occupies) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( removeVehicle\() p
(int) k
( index\) {) p n
(        ) S
(try) K
( {) p n
(            Vehicle v = allVehicles.get\(index\);) N
(            VehicleGUIDecorator decorator = vehiclesAndDecorators.get\(v\);) N
(            decorator.getPane\(\).getChildren\(\).remove\(decorator.getRectangle\(\)\);) N
(            v.setVehicleState\(3\);) N
(            v.unsubscribe\(\);) N
(            Lane currLane = v.getCurrentLane\(\);) N
(            ) S
(int) k
( currCell = v.getCurrentCell\(\);) p n
(            currLane.setCell\() S
(null) k
(, currCell\);) p n
(            allVehicles.remove\(index\);) N
(            vehiclesAndDecorators.remove\(v\);) N
(            v = ) S
(null) k
(;) p n
(        } ) S
(catch) K
( \(Exception e\) {) p n
(            e.printStackTrace\(\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the total time spent standing for all vehicles in the system.) N
(     * @return the total time spent standing by all vehicles in the system) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(int) k
( getTotalTimeSpentStanding\(\) {) p n
(        ) S
(int) k
( sum = 0;) p n
(        ) S
(for) K
(\(Vehicle v : allVehicles\) {) p n
(            sum += v.getTimeSpentStanding\(\);) N
(        }) N
(        ) S
(return) K
( sum;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the total times ticked by all vehicles in the system. This is used i) N
(n the calculation of) N
(     * average time spent standing in the system.) N
(     * @return) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(int) k
( getTotalTimesTicked\(\) {) p n
(        ) S
(int) k
( sum = 0;) p n
(        ) S
(for) K
(\(Vehicle v : allVehicles\) {) p n
(            sum += v.getTimesTicked\(\);) N
(        }) N
(        ) S
(return) K
( sum;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Retrieve the VehicleGGUIDecorator for the vehicle, for operations that ha) N
(ppen outside this class) N
(     *) N
(     * @param vehicle the Vehicle to retrieve the decorator for) N
(     * @return CarGuiDecorator instance associated with that specific Vehicle) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( VehicleGUIDecorator getDecoratorForVehicle\(Vehicle vehicle\) {) p n
(        ) S
(return) K
( vehiclesAndDecorators.get\(vehicle\);) p n
(    }) N
() N
(VehicleController.java) (Page 2/4) (Mar 24, 16 22:32) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (18/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 19
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * This is the method that gets called by the Vehicle \(in the model\) when th) N
(e ticker ticks. This controller) N
(     * handles the rest of the moving.) N
(     *) N
(     * @param v    the Vehicle that notified that it should move) N
(     * @param step how far the vehicle should move) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( moveOnTick\(Vehicle v, ) p
(int) k
( step\) ) p
(throws) K
( Exception {) p n
(        VehicleGUIDecorator decorator = vehiclesAndDecorators.get\(v\);) N
(        moveVehicle\(decorator, step\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Moves the vehicle in the model and in the GUI) N
(     * @param vehicleGUIDecorator the GUI decorator for this vehicle) N
(     * @param step how many slots to move) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( moveVehicle\(VehicleGUIDecorator vehicleGUIDecorator, ) p
(int) k
( ) p n
(step\) ) S
(throws) K
( Exception {) p n
() N
(        ) S
(int) k
( move = 0;) p n
() N
(        vehicleGUIDecorator.setPreviousLane\(vehicleGUIDecorator.getCurrentLane\(\)) N
(\);) N
(        vehicleGUIDecorator.setPreviousCoordinate\(vehicleGUIDecorator.getCurrent) N
(Coordinate\(\)\);) N
() N
(        ) S
(// Vehicle is at an intersection) c n
(        ) p
(if) K
( \(vehicleGUIDecorator.getCurrentCoordinate\(\).equals\(vehicleGUIDecorato) p n
(r.getCurrentLane\(\).getExit\(\)\)\) {) N
(            ) S
(//only read when intersection is available) c n
(            vehicleGUIDecorator.readTrafficLight\(\);) p n
() N
(            ) S
(if) K
( \(vehicleGUIDecorator.getVehicleState\(\) == 1\) { ) p
(// if vehicle was ) c n
(moving) N
(                ) p
(// get next lane available to move to) c n
(                Lane l = vehicleGUIDecorator.chooseLane\(\);) p n
() N
(                vehicleGUIDecorator.setVehicleState\(2\); ) S
(// set vehicle's state t) c n
(o "in intersection") N
(                move = vehicleGUIDecorator.vehicleTurn\(l\); ) p
(// move the vehicle i) c n
(n the model and get a result int) N
(            }) p n
(        } ) S
(else) K
( {) p n
(            ) S
(if) K
( \(vehicleGUIDecorator.getVehicleState\(\) != 0\) { ) p
(// if not at inter) c n
(section, and wasn't stopped, move forward) N
(                move = vehicleGUIDecorator.moveVehicle\(step\);) p n
(            }) N
(        }) N
() N
(        ) S
(if) K
(\(move == 0\) {) p n
(            Vehicle thisVehicle = vehicleGUIDecorator.getVehicle\(\);) N
(            thisVehicle.incrementTimeSpentStanding\(\);) N
(        }) N
() N
(        ) S
(if) K
( \(vehicleGUIDecorator.getVehicleState\(\) == 3\) { ) p
(//vehicle is deleted j) c n
(VehicleController.java) (Page 3/4) (Mar 24, 16 22:32) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (19/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 20
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ust move to next space) c n
(            vehicleGUIDecorator.moveVehicleGUI\(move, vehicleGUIDecorator.getVehi) p n
(cleState\(\)\);) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(move>0 && vehicleGUIDecorator.getVehicleState\(\)!=0\) { ) p
(// move th) c n
(e vehicle in the GUI) N
(            vehicleGUIDecorator.moveVehicleGUI\(move, vehicleGUIDecorator.getVehi) p n
(cleState\(\)\);) N
(        }) N
(    }) N
(}) S
(VehicleController.java) (Page 4/4) (Mar 24, 16 22:32) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (20/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 21
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation;) p n
() N
(import) K
( londonsw.model.simulation.components.TrafficLight;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
(import) K
( rx.Subscriber;) p n
() N
(import) K
( java.io.File;) p n
(import) K
( java.io.IOException;) p n
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.logging.FileHandler;) p n
(import) K
( java.util.logging.Logger;) p n
(import) K
( java.util.logging.SimpleFormatter;) p n
() N
() N
( ) S
(/**) C n
( * Created by felix on 18/03/2016.) N
(  * Logs what is happening in the system for every tick.) N
( */) N
() p n
(public) K
( ) p
(class) K
( ) p
(Log) L
( ) p
(extends) K
( Subscriber<Long> {) p n
() N
(     ) S
(private) K
( String fileName;) p n
(     ) S
(private) K
( ) p
(final) K
( String LOG_DIR = ") p
(./logs/) str
(";) p n
(     ) S
(private) K
( String filePath;) p n
() N
(     ) S
(/**) C n
(      * Creates a log with the given file name to log what is happening in the s) N
(ystem. It will be stored in the) N
(      * directory LOG_DIR.) N
(      * @param fileName the file name for the log) N
(      */) N
(     ) p
(public) K
( Log\(String fileName\) {) p n
(         this.fileName = fileName;) N
() N
(         File directory = ) S
(new) K
( File\(LOG_DIR\);) p n
(         ) S
(if) K
(\(!directory.exists\(\)\) {) p n
(             directory.mkdir\(\);) N
(         }) N
() N
(         filePath = LOG_DIR + fileName + ") S
(.log) str
(";) p n
(         File logFile = ) S
(new) K
( File\(filePath\);) p n
(         ) S
(if) K
(\(!logFile.exists\(\)\) {) p n
(             ) S
(try) K
( {) p n
(                 logFile.createNewFile\(\);) N
(             } ) S
(catch) K
( \(IOException e\) {) p n
(                 e.printStackTrace\(\);) N
(             }) N
(         }) N
() N
(         Ticker.subscribe\() S
(this) k
(\);) p n
(     }) N
() N
(     ) S
(/**) C n
(      * Generates log information for that Ticker tick) N
(      * @param aLong current time in the system) N
(      */) N
(     ) p
(private) K
( ) p
(void) k
( generate\() p
(long) k
( aLong\) {) p n
() N
(         ArrayList al = Ticker.getSubscribers\(\);) N
(Log.java) (Page 1/3) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (21/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 22
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(         Logger logger = Logger.getLogger\(") S
(SIMULATION) str
("\);) p n
() N
(         FileHandler fh;) N
() N
(         ) S
(try) K
( {) p n
() N
(             StringBuilder sb = ) S
(new) K
( StringBuilder\(\);) p n
() N
(             sb.append\(") S
(TICK!: ) str
(" + aLong\);) p n
(             sb.append\(System.lineSeparator\(\)\);) N
() N
(             ) S
(for) K
( \(Object o : al\) {) p n
(                 ) S
(if) K
( \(o ) p
(instanceof) K
( Vehicle\) {) p n
() N
(                     Vehicle vLog = \(Vehicle\) o;) N
() N
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(---------VEHICLE---------) str
("\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(ID: ) str
(" + vLog.getId\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(CURRENT LANE ID: ) str
(" + vLog.getCurrentLane\(\).getId\() p n
(\)\);) N
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(CURRENT COORDINATES: ) str
(" + vLog.getCurrentCoordina) p n
(te\(\).getX\(\) + ") S
(,) str
(" + vLog.getCurrentCoordinate\(\).getY\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
() N
(                     ) S
(if) K
( \(vLog.getPreviousLane\(\) != ) p
(null) k
(\) {) p n
(                         sb.append\(") S
(PREVIOUS LANE ID: ) str
(" + vLog.getPreviousLane\(\).) p n
(getId\(\)\);) N
(                         sb.append\(System.lineSeparator\(\)\);) N
(                         sb.append\(") S
(PREVIOUS LANE COORDINATES: ) str
(" + vLog.getPrevi) p n
(ousCoordinate\(\).getX\(\) + ") S
(,) str
(" + vLog.getCurrentCoordinate\(\).getY\(\)\);) p n
(                         sb.append\(System.lineSeparator\(\)\);) N
(                     }) N
() N
(                     sb.append\(") S
(CURRENT CELL: ) str
(" + vLog.getCurrentCell\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(BEHAVIOUR: ) str
(" + vLog.getVehicleBehavior\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(PRIORITY: ) str
(" + vLog.getVehiclePriority\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(STATE: ) str
(" + vLog.getVehicleState\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(SUBSCRIBED: ) str
(" + \(vLog.isUnsubscribed\(\)==) p
(false) k
(?") p
(Y) str n
(ES) S
(":") p
(NO) str
("\)\);) p n
() N
() N
(                 } ) S
(else) K
( ) p
(if) K
( \(o ) p
(instanceof) K
( TrafficLight\) {) p n
(                     TrafficLight tLog = \(TrafficLight\) o;) N
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(------TRAFFIC LIGHT------) str
("\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(ID: ) str
(" + tLog.getId\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(                     sb.append\(") S
(DURATION: ) str
(" + tLog.getDuration\(\)\);) p n
(                     sb.append\(System.lineSeparator\(\)\);) N
(Log.java) (Page 2/3) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (22/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 23
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                     sb.append\(") p
(STATE: ) str
(" + tLog.getState\(\)\);) p n
(                 }) N
(             }) N
() N
(             sb.append\(System.lineSeparator\(\)\);) N
(             sb.append\(") S
(===========================================================) str n
(=) S
("\);) p n
() N
(             fh = ) S
(new) K
( FileHandler\(filePath,) p
(true) k
(\);) p n
() N
(             logger.addHandler\(fh\);) N
(             SimpleFormatter formatter = ) S
(new) K
( SimpleFormatter\(\);) p n
(             fh.setFormatter\(formatter\);) N
(             logger.setUseParentHandlers\() S
(false) k
(\);) p n
(             logger.info\(sb.toString\(\)\);) N
(             fh.close\(\);) N
() N
(         } ) S
(catch) K
( \(SecurityException e\) {) p n
(             e.printStackTrace\(\);) N
(         } ) S
(catch) K
( \(IOException e\) {) p n
(             e.printStackTrace\(\);) N
(         }) N
(     }) N
() N
(     @Override) N
(     ) S
(public) K
( ) p
(void) k
( onCompleted\(\) {  }) p n
() N
(     ) S
(/**) C n
(      * If there's some error with the ticker and this subscriber, this method w) N
(ould call.) N
(      * Left not implemented on purpose) N
(      * @param throwable) N
(      */) N
(     @Override) p n
(     ) S
(public) K
( ) p
(void) k
( onError\(Throwable throwable\) {    }) p n
() N
(     ) S
(/**) C n
(      * Called on Ticker tick, will generated a log entry for that tick) N
(      * @param aLong current time in the sytem) N
(      */) N
(     @Override) p n
(     ) S
(public) K
( ) p
(void) k
( onNext\(Long aLong\) {) p n
(        generate\(aLong\);) N
(     }) N
( }) S
(Log.java) (Page 3/3) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (23/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 24
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation;) p n
() N
(import) K
( londonsw.controller.TrafficLightController;) p n
(import) K
( londonsw.model.simulation.components.*;) p n
(import) K
( londonsw.view.simulation.IntersectionDecorator;) p n
(import) K
( londonsw.view.simulation.TrafficLightDecorator;) p n
() N
(import) K
( java.io.*;) p n
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.Collections;) p n
(import) K
( java.util.HashMap;) p n
(import) K
( java.util.Random;) p n
() N
(/**) C n
( * This is the graph structure that our map holds \(Roads and Intersections\)) N
( */) N
(public) K
( ) p
(class) K
( ) p
(Map) L
( ) p
(implements) K
( Serializable {) p n
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = -1932129809569954013L;) p n
(    ) S
(private) K
( ArrayList<Road> roads;) p n
(    ) S
(private) K
( ArrayList<Intersection> intersections;) p n
(    ) S
(private) K
( MapGrid grid;) p n
(    ) S
(private) K
( ) p
(final) K
( ) p
(static) K
( String MAP_DIR = ") p
(./maps/) str
(";) p n
() N
() N
(    ) S
(/**) C n
(     * Creates an empty map with no roads or intersections) N
(     *) N
(     * @param width width of the map) N
(     * @param height height of the map) N
(     */) N
(    ) p
(public) K
( Map\() p
(int) k
( width, ) p
(int) k
( height\) {) p n
(        roads = ) S
(new) K
( ArrayList<Road>\(\);) p n
(        intersections = ) S
(new) K
( ArrayList<Intersection>\(\);) p n
(        grid = ) S
(new) K
( MapGrid\(width,height\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the width of the map) N
(     *) N
(     * @return integer representing width of the map) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getWidth\(\) {) p n
(        ) S
(return) K
( grid.getWidth\(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the height of the map) N
(     *) N
(     * @return integer representing the height of the map) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getHeight\(\) {) p n
(        ) S
(return) K
( grid.getHeight\(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets all the roads currently in the map) N
(     * @return ArrayList of all Roads in the map) N
(     */) N
(    ) p
(public) K
( ArrayList<Road> getRoads\(\) {) p n
(Map.java) (Page 1/6) (Mar 25, 16 10:35) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (24/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 25
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(return) K
( roads;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets a random road from the Map) N
(     * @return a random Road instance from the current map) N
(     */) N
(    ) p
(public) K
( Road getRandomRoad\(\) {) p n
(        ArrayList<Road> roads = getRoads\(\);) N
(        Road road = ) S
(null) k
(;) p n
(        Random randomRoad = ) S
(new) K
( Random\(\);) p n
() N
(        ) S
(if) K
(\(roads.size\(\) > 0\) {) p n
(            ) S
(int) k
( roadSize = randomRoad.nextInt\(this.getRoads\(\).size\(\)\);) p n
(            road = roads.get\(roadSize\);) N
(        }) N
() N
(        ) S
(return) K
( road;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets a random lane from the Map) N
(     * @return a random Lane instance from the current Map) N
(     */) N
(    ) p
(public) K
( Lane getRandomLane\(\) {) p n
(        Road road = getRandomRoad\(\);) N
(        Lane lane = ) S
(null) k
(;) p n
() N
(        ) S
(if) K
( \(road != ) p
(null) k
(\) {) p n
(            Random randomLane = ) S
(new) K
( Random\(\);) p n
(            ) S
(int) k
( numberLanes = road.getNumberLanes\(\);) p n
() N
(            ) S
(if) K
( \(numberLanes > 0\) {) p n
(                ) S
(int) k
( laneSize = randomLane.nextInt\(road.getNumberLanes\(\)\);) p n
(                lane = road.getLanes\(\).get\(laneSize\);) N
(                ) S
(while) K
( \(lane.getState\(\) != 1\) { ) p
(// if road is disabled, choose a ) c n
(new one) N
(                    road = getRandomRoad\(\);) p n
(                    lane = road.getLanes\(\).get\(randomLane.nextInt\(road.getNumber) N
(Lanes\(\)\)\);) N
(                }) N
(            }) N
(        }) N
() N
(        ) S
(return) K
( lane;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets a random cell from a random Lane from the system, which is an int. A) N
( vehicle can go in this cell.) N
(     * @return index of random cell from a random Lane in the Map) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getRandomCell\(\){) p n
(        Random randomCell = ) S
(new) K
( Random\(\);) p n
(        Lane randomLane = getRandomLane\(\);) N
(        ) S
(return) K
( randomCell.nextInt\(randomLane.getLength\(\)\);) p n
(    }) N
() N
(    ) S
(/**) C n
(Map.java) (Page 2/6) (Mar 25, 16 10:35) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (25/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 26
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * If you have a list of roads already, set the roads to the map) C n
(     * @param roads an ArrayList of valid Road instances) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setRoads\(ArrayList<Road> roads\) {) p n
(        this.roads = roads;) N
(        ) S
(for) K
(\(Road r : roads\)) p n
(            grid.addComponent\(r\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets all the intersections currently in the map) N
(     * @return ArrayList of all intersections in the map) N
(     */) N
(    ) p
(public) K
( ArrayList<Intersection> getIntersections\(\) {) p n
(        ) S
(return) K
( intersections;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * If you have a list of intersections already, set the intersections to the) N
( map) N
(     * @param intersections) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setIntersections\(ArrayList<Intersection> intersections\) {) p n
(        this.intersections = intersections;) N
(        ) S
(for) K
(\(Intersection i : intersections\)) p n
(            grid.addComponent\(i\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the underlying MapGrid of the Map and returns it) N
(     * @return the actual MapGrid of this map) N
(     */) N
(    ) p
(public) K
( MapGrid getGrid\(\) {) p n
(        ) S
(return) K
( grid;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * If you have a valid MapGrid grid, set it as the grid to this Map) N
(     * @return valid instance of MapGrid) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setGrid\(MapGrid grid\) {) p n
(        this.grid = grid;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a brand new road to this map.) N
(     * @param r valid Road instance to put into the Map) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( addRoad\(Road r\) {) p n
(        roads.add\(r\);) N
(        grid.addComponent\(r\);) N
(    }) N
() N
(    ) S
(public) K
( Component getAtLocation\(Coordinate c\) {) p n
(        ) S
(int) k
( x = c.getX\(\);) p n
(        ) S
(int) k
( y = c.getY\(\);) p n
(        ) S
(return) K
( grid.get\(x,y\);) p n
(    }) N
() N
(Map.java) (Page 3/6) (Mar 25, 16 10:35) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (26/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 27
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Adds a brand new intersection to this map) N
(     * @param i valid Intersection instance to put into the Map) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( addIntersection\(Intersection i\) {) p n
(        intersections.add\(i\);) N
(        grid.addComponent\(i\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Removes the map Component at the given coordinate \(only deletes it from t) N
(he model, not the view\)) N
(     * @param c the coordinate where to delete the Map component) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( clearCell\(Coordinate c\) {) p n
(        ) S
(int) k
( x = c.getX\(\);) p n
(        ) S
(int) k
( y = c.getY\(\);) p n
(        grid.clearCell\(x, y\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Saves the map to the disk. Given a file name, it saves the map into MAP_D) N
(IR with that file name) N
(     * @param fileName the file name for saving the map) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( saveMap\(String fileName\)) p n
(    {) N
(        ) S
(try) K n
(        {) p n
(            File directory = ) S
(new) K
( File\(MAP_DIR\);) p n
(            ) S
(if) K
(\(!directory.exists\(\)\) {) p n
(                directory.mkdir\(\);) N
(            }) N
() N
(            String path = MAP_DIR + fileName;) N
() N
(            File file = ) S
(new) K
( File\(path\);) p n
(            ) S
(if) K
(\(!file.exists\(\)\) {) p n
(                file.createNewFile\(\);) N
(            }) N
() N
(            ) S
(// save the map) c n
(            FileOutputStream fileOut = ) p
(new) K
( FileOutputStream\(path\);) p n
(            ObjectOutputStream out = ) S
(new) K
( ObjectOutputStream\(fileOut\);) p n
(            out.writeObject\() S
(this) k
(\);) p n
(            out.close\(\);) N
(            fileOut.close\(\);) N
(        }) S
(catch) K
(\(IOException i\)) p n
(        {) N
(            i.printStackTrace\(\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Loads a map from the disk with the given file name. It unserializes it an) N
(d returns an instance of a Map. This) N
(     * method is static so it can be called without any instances of a Map.) N
(     * @param fileName the name of the map file to open \(extension included\)) N
(     * @return an instance of a loaded Map that was opened from the disk) N
(Map.java) (Page 4/6) (Mar 25, 16 10:35) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (27/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 28
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     */) C n
(    ) p
(public) K
( ) p
(static) K
( Map loadMap\(String fileName\) {) p n
(        Map map = ) S
(null) k
(;) p n
() N
(        ) S
(try) K
( {) p n
(            ) S
(// open the Map) c n
(            FileInputStream fileIn = ) p
(new) K
( FileInputStream\(fileName\);) p n
(            ObjectInputStream in = ) S
(new) K
( ObjectInputStream\(fileIn\);) p n
(            map = \(Map\) in.readObject\(\);) N
(            in.close\(\);) N
(            fileIn.close\(\);) N
() N
(            ) S
(/*) c n
(             * Each intersection has 4 traffic lights, for each traffic light:) N
(             *      - subscribe to the ticker) N
(             *      - create a new Decorator) N
(             * For each intersection:) N
(             *      - create a new IntersectionDecorator) N
(             *      - link each new TrafficLightDecorator to the corresponding f) N
(ield in the IntersectionDecorator) N
(             * */) N
(            ) p
(for) K
(\(Intersection i : map.getIntersections\(\)\) {) p n
(                i.subscribeToTicker\(\);) N
(                IntersectionDecorator decorator = ) S
(new) K
( IntersectionDecorator\(i\);) p n
(                TrafficLight north = i.getNorthTrafficLight\(\);) N
(                TrafficLight south = i.getSouthTrafficLight\(\);) N
(                TrafficLight east = i.getEastTrafficLight\(\);) N
(                TrafficLight west = i.getWestTrafficLight\(\);) N
(                ) S
(if) K
(\(north != ) p
(null) k
(\) {) p n
(                    north.subscribeToTicker\(\);) N
(                    TrafficLightDecorator dec = TrafficLightController.getInstan) N
(ce\(\).createNewDecorator\(north\);) N
(                    decorator.setNorthTrafficLightDecorator\(dec\);) N
(                }) N
(                ) S
(if) K
(\(south != ) p
(null) k
(\) {) p n
(                    south.subscribeToTicker\(\);) N
(                    TrafficLightDecorator dec = TrafficLightController.getInstan) N
(ce\(\).createNewDecorator\(south\);) N
(                    decorator.setSouthTrafficLightDecorator\(dec\);) N
(                }) N
(                ) S
(if) K
(\(east != ) p
(null) k
(\) {) p n
(                    east.subscribeToTicker\(\);) N
(                    TrafficLightDecorator dec = TrafficLightController.getInstan) N
(ce\(\).createNewDecorator\(east\);) N
(                    decorator.setEastTrafficLightDecorator\(dec\);) N
(                }) N
(                ) S
(if) K
(\(west != ) p
(null) k
(\) {) p n
(                    west.subscribeToTicker\(\);) N
(                    TrafficLightDecorator dec = TrafficLightController.getInstan) N
(ce\(\).createNewDecorator\(west\);) N
(                    decorator.setWestTrafficLightDecorator\(dec\);) N
(                }) N
(            }) N
() N
(            ) S
(long) k
( duration = TrafficLightController.getInstance\(\).getDurationLeng) p n
(th\(\);) N
(            TrafficLightController.getInstance\(\).setTrafficLightDuration\(duratio) N
(n\);) N
(            TrafficLightController.getInstance\(\).setLightsToEnabled\(\);) N
(Map.java) (Page 5/6) (Mar 25, 16 10:35) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (28/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 29
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        } ) p
(catch) K
(\(IOException i\) {) p n
(            System.out.println\(") S
(IO Exception) str
("\);) p n
(            i.printStackTrace\(\);) N
(        } ) S
(catch) K
( \(ClassNotFoundException e\) {) p n
(            System.out.println\(") S
(Did not find object) str
("\);) p n
(            e.printStackTrace\(\);) N
(        }) N
() N
(        ) S
(return) K
( map;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * For debug only. Prints the map layout to the console.) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( printMapGrid\(\) {) p n
(        Component[][] grid = this.getGrid\(\).getGrid\(\);) N
(        ) S
(int) k
( width = this.getGrid\(\).getWidth\(\);) p n
(        ) S
(int) k
( height = this.getGrid\(\).getHeight\(\);) p n
(        ) S
(for) K
(\() p
(int) k
( i = 0; i < height; i++\) {) p n
(            ) S
(for) K
(\() p
(int) k
( j = 0; j < width; j++\) {) p n
(                Component current = grid[i][j];) N
(                ) S
(if) K
(\(current ) p
(instanceof) K
( Road\)) p n
(                    System.out.print\(") S
(R ) str
("\);) p n
(                ) S
(else) K
( ) p
(if) K
(\(current ) p
(instanceof) K
( Intersection\)) p n
(                    System.out.print\(") S
(I ) str
("\);) p n
(                ) S
(else) K n
(                    System.out.print\(") p
(- ) str
("\);) p n
(            }) N
(            System.out.println\(\);) N
(        }) N
(        System.out.println\(\);) N
(    }) N
(}) S
(Map.java) (Page 6/6) (Mar 25, 16 10:35) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (29/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 30
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation;) p n
() N
(import) K
( londonsw.model.simulation.components.*;) p n
() N
(import) K
( java.io.Serializable;) p n
(import) K
( java.lang.reflect.Array;) p n
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * This class is the underlying structure of our Map. It is a 2D-array of map Co) N
(mponents,) N
( * each Component being something that you would want to be displayed on the map) N
(, such as) N
( * a Road or Intersection.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(MapGrid) L
( ) p
(implements) K
( Serializable, IMapGrid {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = -8256761045077358688L;) p n
(    ) S
(private) K
( ) p
(int) k
( width;) p n
(    ) S
(private) K
( ) p
(int) k
( height;) p n
(    ) S
(private) K
( Component[][] grid;) p n
(    ) S
(private) K
( ArrayList<Component> allComponents;) p n
() N
(    ) S
(/**) C n
(     * Creates a brand new MapGrid instance to be part of a Map) N
(     * @param width width of the Map that this will be part of) N
(     * @param height height of the Map that this will be part of) N
(     */) N
(    ) p
(public) K
( MapGrid\() p
(int) k
( width, ) p
(int) k
( height\) {) p n
(        this.width = width;) N
(        this.height = height;) N
(        grid = ) S
(new) K
( Component[height][width];) p n
(        allComponents = ) S
(new) K
( ArrayList<Component>\(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Returns the actual 2D-array of Components) N
(     * @return 2D-array array of Components signifying the layout of the Map) N
(     */) N
(    ) p
(public) K
( Component[][] getGrid\(\) {) p n
(        ) S
(return) K
( grid;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the width of the grid) N
(     * @return width of the grid) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getWidth\(\) {) p n
(        ) S
(return) K
( width;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the height of the grid) N
(     * @return height of the grid) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getHeight\(\) {) p n
(        ) S
(return) K
( height;) p n
(    }) N
() N
(MapGrid.java) (Page 1/3) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (30/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 31
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Gets all Components from the MapGrid) N
(     * @return an ArrayList of all components in the Map) N
(     */) N
(    ) p
(public) K
( ArrayList<Component> getAllComponents\(\) { ) p
(return) K
( allComponents; }) p n
() N
(    ) S
(/**) C n
(     * Gets a Component from the MapGrid at the given \(x, y\) location) N
(     * @param x the x coordinate of the requested Component) N
(     * @param y the y coordinate of the requested Component) N
(     * @return a Component at the location \(x, y\), if there is nothing there, nu) N
(ll is returned) N
(     */) N
(    ) p
(public) K
( Component get\() p
(int) k
( x, ) p
(int) k
( y\) {) p n
(        ) S
(return) K
( grid[y][x];) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Empties the cell at the given \(x, y\) location) N
(     * @param x the x-coordinate where to clear the) N
(     * @param y) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( clearCell\() p
(int) k
( x, ) p
(int) k
( y\) {) p n
(        grid[y][x] = ) S
(null) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a Component to the map grid structure) N
(     * @param c the Component to be added) N
(     * @return true if successfully added, false otherwise) N
(     */) N
(    @SuppressWarnings\(") p
(Duplicates) str
("\)) p n
(    ) S
(public) K
( ) p
(boolean) k
( addComponent\(Component c\) {) p n
(        ) S
(if) K
(\(c ) p
(instanceof) K
( Intersection\) {) p n
(            Intersection i = \(Intersection\) c;) N
(            Coordinate coord = i.getLocation\(\);) N
(            grid[coord.getY\(\)][coord.getX\(\)] = i;) N
(            allComponents.add\(i\);) N
(            ) S
(return) K
( ) p
(true) k
(;) p n
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(c ) p
(instanceof) K
( Road\) {) p n
(            Road road = \(Road\) c;) N
(            Coordinate start = road.getStartLocation\(\);) N
(            Coordinate end = road.getEndLocation\(\);) N
(            ) S
(int) k
( startX = start.getX\(\);) p n
(            ) S
(int) k
( startY = start.getY\(\);) p n
(            ) S
(int) k
( endX = end.getX\(\);) p n
(            ) S
(int) k
( endY = end.getY\(\);) p n
() N
(            ) S
(if) K
(\(road.runsVertically\(\)\) { ) p
(// road runs vertically) c n
(                ) p
(if) K
(\(startY <= endY\) { ) p
(// start coordinate is north of end coordin) c n
(ate) N
(                    ) p
(for) K
(\() p
(int) k
( i = startY; i <= endY; i++\) {) p n
(                        grid[i][startX] = road;) N
(                    }) N
(                    allComponents.add\(road\);) N
(                    ) S
(return) K
( ) p
(true) k
(;) p n
(                }) N
(                ) S
(else) K
( { ) p
(// start coordinate is south of end coordinate) c n
(MapGrid.java) (Page 2/3) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (31/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 32
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                    ) p
(for) K
(\() p
(int) k
( i = endY; i <= startY; i++\) {) p n
(                        grid[i][startX] = road;) N
(                    }) N
(                    allComponents.add\(road\);) N
(                    ) S
(return) K
( ) p
(true) k
(;) p n
(                }) N
(            }) N
(            ) S
(else) K
( { ) p
(// road runs horizontally) c n
(                ) p
(if) K
(\(startX <= endX\) { ) p
(// start coordinate is west of end coordina) c n
(te) N
(                    ) p
(for) K
(\() p
(int) k
( i = startX; i <= endX; i++\) {) p n
(                        grid[startY][i] = road;) N
(                    }) N
(                    allComponents.add\(road\);) N
(                    ) S
(return) K
( ) p
(true) k
(;) p n
(                }) N
(                ) S
(else) K
( {) p n
(                    ) S
(for) K
(\() p
(int) k
( i = endX; i <= startX; i++\) { ) p
(// start coordinate is) c n
( east of end coordinate) N
(                        grid[startY][i] = road;) p n
(                    }) N
(                    allComponents.add\(road\);) N
(                    ) S
(return) K
( ) p
(true) k
(;) p n
(                }) N
(            }) N
(        }) N
(        ) S
(else) K n
(            ) p
(return) K
( ) p
(false) k
(;) p n
(    }) N
() N
(}) N
(MapGrid.java) (Page 3/3) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (32/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 33
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation;) p n
() N
(/**) C n
( * This is the class that keeps time for our simulation) N
( *) N
( * This uses RxJava's Observer and Subscriber to pass events to the classes that) N
( want messages from the) N
( * ticker. This also uses RxJavaFx to make sure that the GUI events are running ) N
(on the JavaFX thread scheduler.) N
( */) N
() p n
(import) K
( rx.Observable;) p n
(import) K
( rx.Subscriber;) p n
(import) K
( rx.schedulers.JavaFxScheduler;) p n
(import) K
( rx.subjects.PublishSubject;) p n
() N
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.concurrent.TimeUnit;) p n
() N
(public) K
( ) p
(class) K
( ) p
(Ticker) L
( {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ArrayList<Subscriber<Long>> subscribers = ) p
(new) K
( ArrayList<Subsc) p n
(riber<Long>>\(\);;) N
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(long) k
( TICK_INTERVAL = 1000;) p n
() N
(    ) S
(private) K
( ) p
(static) K
( Ticker instance;) p n
() N
(    ) S
(private) K
( ) p
(static) K
( Observable<Long> tickerObservable;) p n
() N
(    ) S
(private) K
( ) p
(static) K
( PublishSubject stop = PublishSubject.create\(\);) p n
() N
() N
(    ) S
(protected) K
( Ticker\(\) { }) p n
() N
(    ) S
(/**) C n
(     * Singleton of the Ticker class, prevents having more than 1 ticker in the ) N
(system. Creates a new) N
(     * Ticker if one does not yet exist, otherwise gives the instance) N
(     * @return) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( Ticker getInstance\(\) {) p n
(        ) S
(if) K
(\(instance == ) p
(null) k
(\) {) p n
(            instance = ) S
(new) K
( Ticker\(\);) p n
(        }) N
(        ) S
(return) K
( instance;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Starts the ticker with the tick interval) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( start\(\) {) p n
(        tickerObservable = Observable.interval\(TICK_INTERVAL, TimeUnit.MILLISECO) N
(NDS\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a subscriber to the ticker. Any class that extends Subscriber can su) N
(bscribe to the ticker. This) N
(Ticker.java) (Page 1/2) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (33/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 34
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * also adds the subscriber to an arraylist of subscribers just to keep trac) C n
(k of them all.) N
(     * @param sub the new subscriber to the ticker) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( subscribe\(Subscriber<Long> sub\) {) p n
(        ) S
(if) K
(\(tickerObservable!=) p
(null) k
(\) {) p n
(            tickerObservable.takeUntil\(stop\).observeOn\(JavaFxScheduler.getInstan) N
(ce\(\)\).subscribe\(sub\);) N
(            subscribers.add\(sub\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Get the list of all subscribers of this ticker, which can include Vehicle) N
(s and TrafficLights) N
(     * @return ArrayList of all subscribers of the ticker) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ArrayList<Subscriber<Long>> getSubscribers\(\) {) p n
(        ) S
(return) K
( subscribers;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Get the length of the current tick interval) N
(     * @return length of the current tick interval) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(long) k
( getTickInterval\(\) { ) p
(return) K
( TICK_INTERVAL; }) p n
() N
(    ) S
(/**) C n
(     * Change the length of a tick interval.) N
(     * @param interval length of new interval) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( setTickInterval\() p
(long) k
( interval\) { TICK_INTERVAL = interval) p n
(; }) N
() N
() N
(    ) S
(/**) C n
(     * Ends the ticker. All subscribers must unsubscribe and a "stop" call is ex) N
(plicitly called, just in case.) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ) p
(void) k
( end\(\) {) p n
(        ) S
(for) K
(\(Subscriber s : subscribers\)) p n
(            s.unsubscribe\(\);) N
(        stop.onNext\() S
(null) k
(\);) p n
(    }) N
() N
(}) N
(Ticker.java) (Page 2/2) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (34/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 35
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(/**) C n
( * This interface is to have a common denominator between things that can be add) N
(ed to a Map) N
( * Currently, there are two types of Components, Intersections and Roads) N
( */) N
(public) K
( ) p
(interface) K
( ) p
(Component) L
( {) p n
( ) S
(// intersection or road) c n
(}) p n
(Component.java) (Page 1/1) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (35/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 36
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( java.io.Serializable;) p n
() N
(/**) C n
( * The Coordinate class represents an \(x, y\) pair of integers that signify a loc) N
(ation in the map) N
( * Coordinates are also used for doing calculations and translations for movemen) N
(t of vehicles) N
( * A coordinate at the top-left of a map is \(0,0\)) N
( */) N
(public) K
( ) p
(class) K
( ) p
(Coordinate) L
( ) p
(implements) K
( Serializable {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = 252245795148278739L;) p n
(    ) S
(private) K
( ) p
(int) k
( x, y;) p n
() N
(    ) S
(/**) C n
(     *) N
(     * @param x takes the value of the x region/axis) N
(     * @param y takes the value of the y region) N
(     */) N
(    ) p
(public) K
( Coordinate\() p
(int) k
( x, ) p
(int) k
( y\) {) p n
(        this.x = x;) N
(        this.y = y;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the y coordinate of this instance) N
(     * @param y int of the y coordinate) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setY\() p
(int) k
( y\) {) p n
(        this.y = y;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the x coordinate of this instance) N
(     * @param x int of the x coordinate) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setX\() p
(int) k
( x\) {) p n
(        this.x = x;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the x-coordinate of this instance) N
(     * @return int of the x coordinate) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getX\(\) {) p n
(        ) S
(return) K
( x;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the y-coordinate of this instance) N
(     * @return int of the y coordinate) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getY\(\) {) p n
(        ) S
(return) K
( y;) p n
(    }) N
() N
(    ) S
(/**) C n
(Coordinate.java) (Page 1/3) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (36/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 37
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * Checks if two coordinates are equal) C n
(     * @param obj coordinate to be compared with) N
(     * @return true if the coordinates are the same, false otherwise) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( equals\(Object obj\) {) p n
(        Coordinate other = \(Coordinate\)obj;) N
(        ) S
(return) K
( \(x == other.getX\(\)\) && \(y == other.getY\(\)\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Adds 2 coordinates and returns their sum) N
(     * @param a first coordinate to add) N
(     * @param b second coordinate to add) N
(     * @return the sum of the two coordinates' x's and y's as a Coordinate insta) N
(nce) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( Coordinate add\(Coordinate a, Coordinate b\) {) p n
(        ) S
(return) K
( ) p
(new) K
( Coordinate\(a.getX\(\)+b.getX\(\), a.getY\(\)+b.getY\(\)\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Subtracts 2 coordinates and returns their difference) N
(     * @param a coordinate to subtract from) N
(     * @param b coordinate to subtract) N
(     * @return the difference of the two coordinates' x's and y's as a Coordinat) N
(e instance) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( Coordinate substract\(Coordinate a, Coordinate b\) {) p n
(        ) S
(return) K
( ) p
(new) K
( Coordinate\(a.getX\(\)-b.getX\(\), a.getY\(\)-b.getY\(\)\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Formats the coordinate for console output) N
(     * @return the coordinate formatted as follows: \(x, y\)) N
(     */) N
(    ) p
(public) K
( String toString\(\) {) p n
(        ) S
(return) K
( ") p
(\() str
(" + x + ") p
(, ) str
(" + y + ") p
(\)) str
(";) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a step to the coordinate based on map direction. i.e if the map dire) N
(ction is eastwards,) N
(     * and a specified coordinate is \(2,1\), calling addStep method returns a new) N
( coordinate with dimensions \(2,1\)) N
(     * @param mapDirection i.e directions north,south, east or west) N
(     * @return sum, returns a new valid coordinate with a step added to it) N
(     */) N
(    ) p
(public) K
( Coordinate addStep\(MapDirection mapDirection\) {) p n
(        Coordinate sum = ) S
(new) K
( Coordinate\(-1,-1\);) p n
() N
(        ) S
(switch) K
( \(mapDirection\) {) p n
(            ) S
(case) K
( NORTH:) p n
(                sum.setY\(this.getY\(\) - 1\);) N
(                sum.setX\(this.getX\(\)\);) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( SOUTH:) p n
(                sum.setY\(this.getY\(\) + 1\);) N
(                sum.setX\(this.getX\(\)\);) N
(                ) S
(break) K
(;) p n
(Coordinate.java) (Page 2/3) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (37/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 38
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            ) p
(case) K
( EAST:) p n
(                sum.setX\(this.getX\(\) + 1\);) N
(                sum.setY\(this.getY\(\)\);) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( WEST:) p n
(                sum.setX\(this.getX\(\) - 1\);) N
(                sum.setY\(this.getY\(\)\);) N
(                ) S
(break) K
(;) p n
(        }) N
() N
(        ) S
(return) K
( sum;) p n
(    }) N
() N
(}) N
(Coordinate.java) (Page 3/3) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (38/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 39
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(/**) C n
( * Created by felix on 25/02/2016.) N
( */) N
(public) K
( ) p
(interface) K
( ) p
(IMapGrid) L
( {) p n
() N
(    Component[][] getGrid\(\);) N
() N
(    ) S
(int) k
( getWidth\(\);) p n
() N
(    ) S
(int) k
( getHeight\(\);) p n
() N
(    ) S
(boolean) k
( addComponent\(Component component\);) p n
() N
(}) N
(IMapGrid.java) (Page 1/1) (Mar 02, 16 21:30) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (39/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 40
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * Created by felix on 23/02/2016.) N
( */) N
(public) K
( ) p
(interface) K
( ) p
(IRoad) L
( {) p n
(    ArrayList<Lane> getLanes\(\);) N
(    ) S
(void) k
( addLane\(Lane lane\);) p n
(    Lane getLaneAtIndex\() S
(int) k
( index\);) p n
(    Coordinate getEndLocation\(\);) N
(    ) S
(int) k
( getNumberLanes\(\);) p n
(    Intersection getIntersection\(\);) N
(    ) S
(void) k
( setIntersection\(Intersection intersection\);) p n
(    ) S
(int) k
( getLength\(\);) p n
(    ) S
(boolean) k
( runsVertically\(\);) p n
(}) S
(IRoad.java) (Page 1/1) (Mar 16, 16 10:50) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (40/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 41
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(/**) C n
( * Interface ITrafficLight) N
( */) N
(public) K
( ) p
(interface) K
( ) p
(ITrafficLight) L
( {) p n
() N
(    ) S
(/**) C n
(     * Methods....) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( nextState\(\);) p n
(    ) S
(public) K
( ) p
(void) k
( change\() p
(int) k
( no\);) p n
(    ) S
(public) K
( ) p
(void) k
( setDuration\() p
(long) k
( duration\);) p n
(    ) S
(public) K
( ) p
(long) k
( getDuration\(\);) p n
(}) N
(ITrafficLight.java) (Page 1/1) (Feb 22, 16 12:21) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (41/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 42
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( londonsw.controller.IntersectionController;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
(import) K
( rx.Subscriber;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
() N
(import) K
( java.io.Serializable;) p n
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.Random;) p n
() N
() N
(/**) C n
( * This class is our "node" in our directed graph) N
( * It will hold anywhere between 1 and 4 traffic lights) N
( * It will connect anywhere between 2 and 4 roads) N
( * Each will have a location in the map) N
( */) N
() p n
(/* the traffic light belongs to the road) c n
( * in each intersection, a car can choose\(maybe randomly\) Which road he can ente) N
(r based on the array IntersectionRoad) N
( */) N
() p n
() N
(public) K
( ) p
(class) K
( ) p
(Intersection) L
( ) p
(extends) K
( Subscriber<Long> ) p
(implements) K
( Component, Serializa) p n
(ble {) N
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = -2621352799268337492L;) p n
(    ) S
(private) K
( Road northRoad;) p n
(    ) S
(private) K
( Road southRoad;) p n
(    ) S
(private) K
( Road eastRoad;) p n
(    ) S
(private) K
( Road westRoad;) p n
() N
(    ) S
(private) K
( TrafficLight northTrafficLight;) p n
(    ) S
(private) K
( TrafficLight southTrafficLight;) p n
(    ) S
(private) K
( TrafficLight eastTrafficLight;) p n
(    ) S
(private) K
( TrafficLight westTrafficLight;) p n
(    ) S
(private) K
( ArrayList<TrafficLight> allLights;) p n
(    ) S
(private) K
( ) p
(int) k
( id;) p n
(    ) S
(private) K
( Coordinate location;) p n
(    ) S
(private) K
( ) p
(static) K
(  ) p
(int) k
( counter=0;) p n
() N
() N
(    ) S
(/**) C n
(     * Creats) N
(     * @param location) N
(     */) N
(    ) p
(public) K
( Intersection\(Coordinate location\){) p n
(        this.northRoad = ) S
(null) k
(;) p n
(        this.southRoad = ) S
(null) k
(;) p n
(        this.eastRoad = ) S
(null) k
(;) p n
(        this.westRoad = ) S
(null) k
(;) p n
(        this.location = location;) N
(        this.northTrafficLight = ) S
(null) k
(;) p n
(        this.southTrafficLight = ) S
(null) k
(;) p n
(        this.eastTrafficLight = ) S
(null) k
(;) p n
(        this.westTrafficLight = ) S
(null) k
(;) p n
(        Ticker.subscribe\() S
(this) k
(\);) p n
(Intersection.java) (Page 1/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (42/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 43
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        id=++counter;) N
(    }) N
() N
(    ) S
(/* getters */) c n
(    ) p
(public) K
( TrafficLight getNorthTrafficLight\(\) {) p n
(        ) S
(return) K
( northTrafficLight;) p n
(    }) N
(    ) S
(public) K
( TrafficLight getSouthTrafficLight\(\) {) p n
(        ) S
(return) K
( southTrafficLight;) p n
(    }) N
(    ) S
(public) K
( TrafficLight getEastTrafficLight\(\) {) p n
(        ) S
(return) K
( eastTrafficLight;) p n
(    }) N
(    ) S
(public) K
( TrafficLight getWestTrafficLight\(\) {) p n
(        ) S
(return) K
( westTrafficLight;) p n
(    }) N
(    ) S
(public) K
( Road getNorthRoad\(\) {) p n
(        ) S
(return) K
( northRoad;) p n
(    }) N
(    ) S
(public) K
( Road getEastRoad\(\) {) p n
(        ) S
(return) K
( eastRoad;) p n
(    }) N
(    ) S
(public) K
( Road getSouthRoad\(\) {) p n
(        ) S
(return) K
( southRoad;) p n
(    }) N
(    ) S
(public) K
( Road getWestRoad\(\) {) p n
(        ) S
(return) K
( westRoad;) p n
(    }) N
(    ) S
(public) K
( Coordinate getLocation\(\) {) p n
(        ) S
(return) K
( location;) p n
(    }) N
(    ) S
(public) K
( ) p
(int) k
( getId\(\) {) p n
(        ) S
(return) K
( id;) p n
(    }) N
() N
(    ) S
(/* setters */) c n
(    ) p
(public) K
( ) p
(void) k
( setNorthTrafficLight\(TrafficLight northTrafficLight\) {) p n
(        this.northTrafficLight = northTrafficLight;) N
(    }) N
(    ) S
(public) K
( ) p
(void) k
( setSouthTrafficLight\(TrafficLight southTrafficLight\) {) p n
(        this.southTrafficLight = southTrafficLight;) N
(    }) N
(    ) S
(public) K
( ) p
(void) k
( setEastTrafficLight\(TrafficLight eastTrafficLight\) {) p n
(        this.eastTrafficLight = eastTrafficLight;) N
(    }) N
(    ) S
(public) K
( ) p
(void) k
( setWestTrafficLight\(TrafficLight westTrafficLight\) {) p n
(        this.westTrafficLight = westTrafficLight;) N
(    }) N
(    ) S
(public) K
( ) p
(void) k
( setLocation\(Coordinate location\) ) p
(throws) K
( IntersectionSetupExcepti) p n
(on {) N
(        this.location = location;) N
(    }) N
(    ) S
(public) K
( ) p
(void) k
( setIdIntersection\() p
(int) k
( id\) {) p n
(        this.id = id;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Subscribes this intersection to the Ticker. This is expecially useful whe) N
(Intersection.java) (Page 2/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (43/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 44
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(n loading maps from file!) C n
(     */) N
(    ) p
(public) K
( ) p
(void) k
( subscribeToTicker\(\) {) p n
(        Ticker.subscribe\() S
(this) k
(\);) p n
(    }) N
() N
() N
(    ) S
(public) K
( ) p
(void) k
( setNorthRoad\(Road northRoad\) ) p
(throws) K
( Exception {) p n
(        ) S
(if) K
(\(\(this.location.getX\(\) == northRoad.getEndLocation\(\).getX\(\)) p n
(                && \(this.location.getY\(\) - 1 == northRoad.getEndLocation\(\).getY\() N
(\)) N
(                ||  this.location.getY\(\) - 1 == northRoad.getStartLocation\(\).get) N
(Y\(\)\)\)\)) N
(        {) N
(            this.northRoad = northRoad;) N
(            ) S
(for) K
(\() p
(int) k
( i=0; i<this.northRoad.getNumberLanes\(\);i++\){) p n
(                ) S
(if) K
(\(this.northRoad.getLaneAtIndex\(i\).getMovingDirection\(\)==MapDir) p n
(ection.SOUTH\)) N
(                {) N
(                    this.northRoad.getLaneAtIndex\(i\).setEndIntersection\() S
(this) k
(\);) p n
(                }) N
(            }) N
(        }) N
(        ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( IntersectionSetupException\(") p
(Road end location coordinates must match w) str n
(ith Intersection) S
("\);) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setSouthRoad\(Road southRoad\) ) p
(throws) K
( Exception {) p n
(        ) S
(if) K
(\(\(this.location.getX\(\)==southRoad.getEndLocation\(\).getX\(\)) p n
(                && \(this.location.getY\(\) + 1 == southRoad.getEndLocation\(\).getY\() N
(\)) N
(                || this.location.getY\(\) + 1 == southRoad.getStartLocation\(\).getY) N
(\(\)\)\)\)) N
(        {) N
(            this.southRoad = southRoad;) N
(            ) S
(for) K
(\() p
(int) k
( i=0; i<this.southRoad.getNumberLanes\(\);i++\){) p n
(                ) S
(if) K
(\(this.southRoad.getLaneAtIndex\(i\).getMovingDirection\(\)==MapDir) p n
(ection.NORTH\)) N
(                {) N
(                    this.southRoad.getLaneAtIndex\(i\).setEndIntersection\() S
(this) k
(\);) p n
(                }) N
(            }) N
() N
(        }) N
(        ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( IntersectionSetupException\(") p
(Road end location coordinates must match w) str n
(ith Intersection) S
("\);) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setEastRoad\(Road eastRoad\) ) p
(throws) K
( Exception {) p n
(        ) S
(if) K
( \(this.location.getY\(\) == eastRoad.getEndLocation\(\).getY\(\)) p n
(                && \(this.location.getX\(\) + 1  == eastRoad.getEndLocation\(\).getX\() N
(\)) N
(                || this.location.getX\(\) + 1 == eastRoad.getStartLocation\(\).getX\() N
(\)\)\) {) N
(            this.eastRoad = eastRoad;) N
(            ) S
(for) K
(\() p
(int) k
( i=0; i<this.eastRoad.getNumberLanes\(\);i++\){) p n
(                ) S
(if) K
(\(this.eastRoad.getLaneAtIndex\(i\).getMovingDirection\(\)==MapDire) p n
(Intersection.java) (Page 3/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (44/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 45
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ction.WEST\)) p n
(                {) N
(                    this.eastRoad.getLaneAtIndex\(i\).setEndIntersection\() S
(this) k
(\);) p n
(                }) N
(            }) N
() N
(        } ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( IntersectionSetupException\(") p
(Road end location coordinates must match w) str n
(ith Intersection) S
("\);) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setWestRoad\(Road westRoad\) ) p
(throws) K
( IntersectionSetupException {) p n
(        ) S
(if) K
( \(\(this.location.getY\(\)  == westRoad.getEndLocation\(\).getY\(\)) p n
(                && \(this.location.getX\(\) - 1 == westRoad.getEndLocation\(\).getX\(\)) N
(                || this.location.getX\(\) -1 == westRoad.getStartLocation\(\).getX\(\)) N
(\)\)\) {) N
(            this.westRoad = westRoad;) N
(            ) S
(for) K
(\() p
(int) k
( i=0; i<this.westRoad.getNumberLanes\(\);i++\){) p n
(                ) S
(if) K
(\(this.westRoad.getLaneAtIndex\(i\).getMovingDirection\(\)==MapDire) p n
(ction.EAST\)) N
(                {) N
(                    this.westRoad.getLaneAtIndex\(i\).setEndIntersection\() S
(this) k
(\);) p n
(                }) N
(            }) N
() N
(        } ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( IntersectionSetupException\(") p
(Road end location coordinates must match w) str n
(ith Intersection) S
("\);) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setDefaultTrafficLightsForRoads\(\) {) p n
(        ) S
(if) K
(\(northRoad != ) p
(null) k
(\) {) p n
(            ArrayList<Lane> lanes = northRoad.getLanes\(\);) N
(            ) S
(boolean) k
( hasSouthLane = ) p
(false) k
(;) p n
(            ) S
(for) K
(\(Lane l : lanes\) {) p n
(                ) S
(if) K
(\(l.getMovingDirection\(\) == MapDirection.SOUTH\) {) p n
(                    hasSouthLane = ) S
(true) k
(;) p n
(                    ) S
(break) K
(;) p n
(                }) N
(            }) N
(            ) S
(if) K
(\(hasSouthLane\)) p n
(                northTrafficLight = ) S
(new) K
( TrafficLight\(\);) p n
(        }) N
() N
(        ) S
(if) K
(\(southRoad != ) p
(null) k
(\) {) p n
(            ArrayList<Lane> lanes = southRoad.getLanes\(\);) N
(            ) S
(boolean) k
( hasNorthLane = ) p
(false) k
(;) p n
(            ) S
(for) K
(\(Lane l : lanes\) {) p n
(                ) S
(if) K
(\(l.getMovingDirection\(\) == MapDirection.NORTH\) {) p n
(                    hasNorthLane = ) S
(true) k
(;) p n
(                    ) S
(break) K
(;) p n
(                }) N
(            }) N
(            ) S
(if) K
(\(hasNorthLane\)) p n
(                southTrafficLight = ) S
(new) K
( TrafficLight\(\);) p n
(        }) N
(        ) S
(if) K
(\(eastRoad != ) p
(null) k
(\) {) p n
(            ArrayList<Lane> lanes = eastRoad.getLanes\(\);) N
(            ) S
(boolean) k
( hasWestLane = ) p
(false) k
(;) p n
(Intersection.java) (Page 4/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (45/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 46
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            ) p
(for) K
(\(Lane l : lanes\) {) p n
(                ) S
(if) K
(\(l.getMovingDirection\(\) == MapDirection.WEST\) {) p n
(                    hasWestLane = ) S
(true) k
(;) p n
(                    ) S
(break) K
(;) p n
(                }) N
(            }) N
(            ) S
(if) K
(\(hasWestLane\) {) p n
(                ) S
(if) K
( \(northRoad != ) p
(null) k
( || southRoad != ) p
(null) k
(\) {) p n
(                    eastTrafficLight = ) S
(new) K
( TrafficLight\(LightColour.GREEN\);) p n
(                } ) S
(else) K n
(                    eastTrafficLight = ) p
(new) K
( TrafficLight\(\);) p n
(            }) N
(        }) N
(        ) S
(if) K
(\(westRoad != ) p
(null) k
(\) {) p n
(            ArrayList<Lane> lanes = westRoad.getLanes\(\);) N
(            ) S
(boolean) k
( hasEastLane = ) p
(false) k
(;) p n
(            ) S
(for) K
(\(Lane l : lanes\) {) p n
(                ) S
(if) K
(\(l.getMovingDirection\(\) == MapDirection.EAST\) {) p n
(                    hasEastLane = ) S
(true) k
(;) p n
(                    ) S
(break) K
(;) p n
(                }) N
(            }) N
(            ) S
(if) K
(\(hasEastLane\) {) p n
(                ) S
(if) K
( \(northRoad != ) p
(null) k
( || southRoad != ) p
(null) k
(\)) p n
(                    westTrafficLight = ) S
(new) K
( TrafficLight\(LightColour.GREEN\);) p n
(                ) S
(else) K n
(                    westTrafficLight = ) p
(new) K
( TrafficLight\(\);) p n
(            }) N
(        }) N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * generate a list of 4 items form 1 to 4) N
(     * these items are placed in the array randomly) N
(     * @return list of integer in type of ArrayList) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ArrayList<Integer> generateRandom \(\){) p n
(        ) S
(int) k
( size =4;) p n
(        ArrayList<Integer> list = ) S
(new) K
( ArrayList<Integer>\(size\);) p n
(        ArrayList<Integer> l = ) S
(new) K
( ArrayList<Integer>\(size\);) p n
() N
(        ) S
(for) K
(\() p
(int) k
( i = 1; i <= size; i++\) {) p n
(            list.add\(i\);) N
(        }Random rand = ) S
(new) K
( Random\(\);) p n
(        ) S
(while) K
(\(list.size\(\) > 0\) {) p n
(            ) S
(int) k
( index = rand.nextInt\(list.size\(\)\);) p n
(            l.add\(list.get\(index\)\);) N
(           ) S
(// System.out.println\("Selected: "+list.remove\(index\)\);) c n
(            list.remove\(index\);) p n
(        }) N
() N
(        ) S
(return) K
( l;) p n
() N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * intersection gives each vehicle on it a priority to turn first) N
(Intersection.java) (Page 5/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (46/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 47
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * first it checks :) C n
(     * 1. if there is a road connected to it.) N
(     * 2. if in the road there is a lane which its direction to this intersectio) N
(n) N
(     * 3. if there is a vehicle at the last cell in this lane, which is this int) N
(ersection) N
(     * if these conditions are obtained , then the intersection gives this vehic) N
(le a priority to turn) N
(     * and put these vehicle in arrayList .) N
(     * @param randomPriority a list 4 items form 1 to 4, arranged randomly in th) N
(e array list) N
(     * @return vehicleInIntersection an arrayList in type of integer , which con) N
(tains all vehicles which) N
(     * has priority to turn) N
(     * @throws) N
(     */) N
(    ) p
(public) K
( ArrayList<Vehicle> giveVehiclePriorities \(ArrayList<Integer>  randomP) p n
(riority\) ) S
(throws) K
( Exception {) p n
() N
(       ) S
(// ArrayList<Integer>  randomPriority = \(ArrayList<Integer>\)this.generate) c n
(Random\(4\).clone\(\);) N
(        ArrayList<Vehicle> vehicleInIntersection= ) p
(new) K
( ArrayList<>\(\) ;) p n
() N
(        ) S
(if) K
( \(this.getNorthRoad\(\) != ) p
(null) k
(\) {) p n
(            ) S
(for) K
( \() p
(int) k
( i = 0; i < this.getNorthRoad\(\).getNumberLanes\(\); i++\) {) p n
(                ) S
(if) K
( \(\(this.getNorthRoad\(\).getLaneAtIndex\(i\).getMovingDirection\(\) ) p n
(== MapDirection.SOUTH\)\) {) N
(                    ) S
(if) K
( \(\(this.getNorthRoad\(\).getLaneAtIndex\(i\).getVehicleInInter) p n
(section\(\) != ) S
(null) k
(\)\) {) p n
(                        ) S
(if) K
(\(this.getNorthTrafficLight\(\)!= ) p
(null) k
(\)) p n
(                            this.getNorthRoad\(\).getLaneAtIndex\(i\).getVehicleInIn) N
(tersection\(\).setVehicleTrafficLight\(this.getNorthTrafficLight\(\)\);) N
(                        this.getNorthRoad\(\).getLaneAtIndex\(i\).getVehicleInInters) N
(ection\(\).setVehiclePriorityToTurn\(randomPriority.get\(0\)\);) N
(                        vehicleInIntersection.add\( this.getNorthRoad\(\).getLaneAt) N
(Index\(i\).getVehicleInIntersection\(\)\);) N
(                    }) N
(                }) N
(            }) N
(        }) N
() N
(        ) S
(if) K
( \(this.getSouthRoad\(\) != ) p
(null) k
(\) {) p n
(            ) S
(for) K
( \() p
(int) k
( i = 0; i < this.getSouthRoad\(\).getNumberLanes\(\); i++\) {) p n
(                ) S
(if) K
( \(\(this.getSouthRoad\(\).getLaneAtIndex\(i\).getMovingDirection\(\) ) p n
(== MapDirection.NORTH\)\) {) N
(                    ) S
(if) K
( \(\(this.getSouthRoad\(\).getLaneAtIndex\(i\).getVehicleInInter) p n
(section\(\) != ) S
(null) k
(\)\) {) p n
(                        ) S
(if) K
(\(this.getSouthTrafficLight\(\)!= ) p
(null) k
(\)) p n
(                            this.getSouthRoad\(\).getLaneAtIndex\(i\).getVehicleInIn) N
(tersection\(\).setVehicleTrafficLight\(this.getSouthTrafficLight\(\)\);) N
(                        this.getSouthRoad\(\).getLaneAtIndex\(i\).getVehicleInInters) N
(ection\(\).setVehiclePriorityToTurn\(randomPriority.get\(1\)\);) N
(                        vehicleInIntersection.add\( this.getSouthRoad\(\).getLaneAt) N
(Index\(i\).getVehicleInIntersection\(\)\);) N
(                    }) N
(                }) N
(            }) N
(        }) N
() N
(Intersection.java) (Page 6/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (47/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (7) 48
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(if) K
( \(this.getEastRoad\(\) != ) p
(null) k
(\) {) p n
(            ) S
(for) K
( \() p
(int) k
( i = 0; i < this.getEastRoad\(\).getNumberLanes\(\); i++\) {) p n
(                ) S
(if) K
( \(\(this.getEastRoad\(\).getLaneAtIndex\(i\).getMovingDirection\(\) =) p n
(= MapDirection.WEST\)\) {) N
(                    ) S
(if) K
( \(\(this.getEastRoad\(\).getLaneAtIndex\(i\).getVehicleInInters) p n
(ection\(\) != ) S
(null) k
(\)\) {) p n
(                        ) S
(if) K
(\(this.getEastTrafficLight\(\)!= ) p
(null) k
(\)) p n
(                            this.getEastRoad\(\).getLaneAtIndex\(i\).getVehicleInInt) N
(ersection\(\).setVehicleTrafficLight\(this.getEastTrafficLight\(\)\);) N
(                        this.getEastRoad\(\).getLaneAtIndex\(i\).getVehicleInInterse) N
(ction\(\).setVehiclePriorityToTurn\(randomPriority.get\(2\)\);) N
(                        vehicleInIntersection.add\( this.getEastRoad\(\).getLaneAtI) N
(ndex\(i\).getVehicleInIntersection\(\)\);) N
(                    }) N
(                }) N
(            }) N
(        }) N
() N
(        ) S
(if) K
( \(this.getWestRoad\(\) != ) p
(null) k
(\) {) p n
(            ) S
(for) K
( \() p
(int) k
( i = 0; i < this.getWestRoad\(\).getNumberLanes\(\); i++\) {) p n
(                ) S
(if) K
( \(\(this.getWestRoad\(\).getLaneAtIndex\(i\).getMovingDirection\(\) =) p n
(= MapDirection.EAST\)\) {) N
(                    ) S
(if) K
( \(\(this.getWestRoad\(\).getLaneAtIndex\(i\).getVehicleInInters) p n
(ection\(\) != ) S
(null) k
(\)\) {) p n
(                        ) S
(if) K
(\(this.getWestTrafficLight\(\)!= ) p
(null) k
(\)) p n
(                            this.getWestRoad\(\).getLaneAtIndex\(i\).getVehicleInInt) N
(ersection\(\).setVehicleTrafficLight\(this.getWestTrafficLight\(\)\);) N
(                        this.getWestRoad\(\).getLaneAtIndex\(i\).getVehicleInInterse) N
(ction\(\).setVehiclePriorityToTurn\(randomPriority.get\(3\)\);) N
(                        vehicleInIntersection.add\( this.getWestRoad\(\).getLaneAtI) N
(ndex\(i\).getVehicleInIntersection\(\)\);) N
(                    }) N
(                }) N
(            }) N
(        }) N
(        ) S
(return) K
( vehicleInIntersection;) p n
() N
(    }) N
() N
(    ) S
(/**) C n
(     * checks the vehicle with higher priority to turn) N
(     * if a vehicle has a higher priority) N
(     * it sets its priority to turn to 1 which means move) N
(     * otherwise sets it to 0 which means stop) N
(     * @param vehicles an array list in type of integer which contains all vehic) N
(les which has priority to turn) N
(     * @return) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( vehicleTurnFirst \(ArrayList<Vehicle> vehicles\)) p
(throws) K
( Exceptio) p n
(n{) N
(        ) S
(int) k
( max=0;) p n
() N
(       ) S
(// for \(int i=0; i<vehicles.size\(\);i++\)) c n
(       ) p
(// {System.out.println\("ID is: " + vehicles.get\(i\).getId\(\)+ "  priority i) c n
(s : "+ vehicles.get\(i\).getVehiclePriorityToTurn\(\)\);}) N
() p n
() N
(        ) S
(if) K
( \(vehicles != ) p
(null) k
(\) {) p n
(Intersection.java) (Page 7/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (48/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (8) 49
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(for) K
( \() p
(int) k
( i = 0; i < vehicles.size\(\); i++\) {) p n
(            ) S
(if) K
( \(max <= vehicles.get\(i\).getVehiclePriorityToTurn\(\) \){) p n
(                ) S
(if) K
(\(vehicles.get\(i\).getVehicleTrafficLight\(\)!= ) p
(null) k
(\){) p n
(                ) S
(if) K
(\(vehicles.get\(i\).getVehicleTrafficLight\(\).getState\(\)==LightCol) p n
(our.GREEN\)) N
(                max = vehicles.get\(i\).getVehiclePriorityToTurn\(\);}) N
(        ) S
(else) K
( max = vehicles.get\(i\).getVehiclePriorityToTurn\(\);}) p n
() N
(    }) N
() N
() N
(    ) S
(for) K
( \() p
(int) k
( i = 0; i < vehicles.size\(\); i++\) {) p n
(            ) S
(if) K
( \(vehicles.get\(i\).getVehiclePriorityToTurn\(\) == max || vehicles.ge) p n
(t\(i\).getVehiclePriority\(\)==5\)) N
(            {vehicles.get\(i\).setVehiclePriorityToTurn\(1\);}) N
(        ) S
(else) K
( vehicles.get\(i\).setVehiclePriorityToTurn\(0\);) p n
(    }) N
(}) N
() N
(        ) S
(return) K
( ) p
(true) k
(;) p n
(    }) N
() N
() N
(    ) S
(/**) C n
(     * This is the method that gets called when the ticker terminates) N
(     *  Left not implemented on purpose) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onCompleted\(\) {) p n
() N
(    }) N
() N
(    ) S
(/**) C n
(     * If there's some error with the ticker and this subscriber, this method wo) N
(uld call.) N
(     * Left not implemented on purpose) N
(     * @param throwable) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onError\(Throwable throwable\) {) p n
() N
(    }) N
() N
(    ) S
(/**) C n
(     * This is like the onTick method. This is what intersection would do when t) N
(he ticker ticks.) N
(     * @param aLong this gives the current time in the system to the intersectio) N
(n \(although it is probably not required\)) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onNext\(Long aLong\){) p n
(        ) S
(try) K
( {) p n
() N
(            IntersectionController.vehicleTurnFirst\() S
(this) k
(, this.giveVehiclePriori) p n
(ties\(this.generateRandom\(\)\)\);) N
(        } ) S
(catch) K
( \(Exception e\) {) p n
(            e.printStackTrace\(\);) N
(        }) N
() N
(Intersection.java) (Page 8/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (49/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (9) 50
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
() N
() N
(}) N
() N
(class) K
( ) p
(IntersectionSetupException) L
( ) p
(extends) K
( Exception {) p n
(    ) S
(public) K
( IntersectionSetupException\(\) {) p n
(        ) S
(super) K
(\(\);) p n
(    }) N
(    ) S
(public) K
( IntersectionSetupException\(String msg\) {) p n
(        ) S
(super) K
(\(\);) p n
(    }) N
(    ) S
(public) K
( IntersectionSetupException\(String msg, Throwable t\) {) p n
(        ) S
(super) K
(\(msg, t\);) p n
(    }) N
(    ) S
(public) K
( IntersectionSetupException\(Throwable t\) {) p n
(        ) S
(super) K
(\(t\);) p n
(    }) N
(}) S
(Intersection.java) (Page 9/9) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (50/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 51
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
() N
(import) K
( java.io.Serializable;) p n
() N
(/**) C n
( * This class is where the vehicles actually move) N
( * This is based on the cell automaton model of simulation) N
( * Each lane is an "queue" and has a direction) N
( * Number slots in the lane will be based on the number of "cells" in the view t) N
(he road/lane takes up) N
( */) N
(public) K
( ) p
(class) K
( ) p
(Lane) L
( ) p
(implements) K
( Serializable {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = 7899381124564682583L;) p n
(    ) S
(private) K
( Vehicle[] lane;) p n
(    ) S
(private) K
( ) p
(int) k
( length;) p n
(    ) S
(private) K
( Coordinate entry;) p n
(    ) S
(private) K
( Coordinate exit;) p n
(    ) S
(private) K
( MapDirection movingDirection;) p n
(    ) S
(private) K
( Road road;) p n
(    ) S
(private) K
( Intersection endIntersection;) p n
(    ) S
(private) K
( ) p
(int) k
( RoadIndex;) p n
(    ) S
(private) K
( ) p
(int) k
( state;) p n
(    ) S
(private) K
( ) p
(int) k
( id;) p n
(    ) S
(private) K
( ) p
(static) K
(  ) p
(int) k
( counter=0;) p n
() N
() N
(    ) S
(/**) C n
(     * Creates a lane and sets its first and last cell and it's moving direction) N
(     * and calculate the length of a lane and gives it a unique Id) N
(     * stes the state to 1 which means a lane is enabled.) N
(     * @param entry first cell in a lane in type of Coordinate) N
(     * @param exit last cell in a lane un type of Coordinate) N
(     * @param movingDirection the moving direction  of a lane in type of Map dir) N
(ection) N
(     * @throws NotALaneException) N
(     */) N
(    ) p
(public) K
( Lane\(Coordinate entry, Coordinate exit, MapDirection movingDirection\)) p n
( ) S
(throws) K
( NotALaneException {) p n
(        this.entry = entry;) N
(        this.exit = exit;) N
(        this.movingDirection = movingDirection;) N
(        length = this.getLaneLength\(\);) N
(        lane = ) S
(new) K
( Vehicle[length];) p n
(        id=++counter;) N
(        this.setState\(1\);) N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * Gets the vehicle in last cell in a lane) N
(     * @return the vehicle in an intersection if there is any in type of vehicle) N
(     * if there is no, it returns null) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( Vehicle getVehicleInIntersection\(\) ) p
(throws) K
( Exception {) p n
(        ) S
(if) K
( \(lane[length-1] != ) p
(null) k
(\)) p n
(            ) S
(return) K
( lane[length-1];) p n
(Lane.java) (Page 1/5) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (51/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 52
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(else) K n
(            ) p
(return) K
( ) p
(null) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets a lane's state) N
(     * 1 if a lane is enabled) N
(     * 0 if it is disabled) N
(     *) N
(     * @return the state of a lane in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getState\(\) {) p n
(        ) S
(return) K
( state;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets a unique ID for the lane) N
(     * @return a lane's ID in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getId\(\) {) p n
(        ) S
(return) K
( id;) p n
(    }) N
() N
() N
(    ) S
(/**) C n
(     * Sets an ID to the lane) N
(     * @param id is a unique Id for a lane in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setId\() p
(int) k
( id\) {) p n
(        this.id = id;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets a state of a lane) N
(     * @param state is the state of a lane in type of integer) N
(     *              where 1 is enabled  and 0 is disabled) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setState\() p
(int) k
( state\) {) p n
(        this.state = state;) N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * Gets the length of a lane,) N
(     * and checks if it is a legal lane : which means the entry and exit coordin) N
(ate of a lane must have) N
(     * either same x's or y's) N
(     *) N
(     * @return the lane length in type od integer) N
(     * @throws NotALaneException if the lane coordinates are not legal.) N
(     */) N
(    ) p
(private) K
( ) p
(int) k
( getLaneLength\(\) ) p
(throws) K
( NotALaneException {) p n
(        ) S
(int) k
( aX = entry.getX\(\);) p n
(        ) S
(int) k
( aY = entry.getY\(\);) p n
(        ) S
(int) k
( bX = exit.getX\(\);) p n
(        ) S
(int) k
( bY = exit.getY\(\);) p n
(        ) S
(int) k
( length;) p n
() N
(        ) S
(if) K
( \(aX == bX\) {) p n
(Lane.java) (Page 2/5) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (52/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 53
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            length = Math.abs\(aY - bY\) + 1;) p n
(            ) S
(return) K
( length;) p n
(        } ) S
(else) K
( ) p
(if) K
( \(aY == bY\) {) p n
(            length = Math.abs\(aX - bX\) + 1;) N
(            ) S
(return) K
( length;) p n
(        } ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( NotALaneException\(") p
(Not a lane. Coordinate x or y must match for both) str
("\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the length of a lane) N
(     * @return the lane length in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getLength\(\) {) p n
(        ) S
(return) K
( length;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Checks if a given cell is empty) N
(     * @param cell is a cell in a lane in type of integer) N
(     * @return the true if a cell is empty and false if not) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( isCellEmpty\() p
(int) k
( cell\) {) p n
(        ) S
(if) K
( \(cell < 0 || cell > this.length\)) p n
(            ) S
(return) K
( ) p
(false) k
(;) p n
() N
(        ) S
(if) K
( \(lane[cell] == ) p
(null) k
(\)) p n
(            ) S
(return) K
( ) p
(true) k
(;) p n
(        ) S
(return) K
( ) p
(false) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Checks if a lane is full) N
(     * @return true if a lane is full, false otherwise) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( isFull \(\)) p n
(    {) N
(        ) S
(for) K
( \() p
(int) k
( i=0; i<this.getLength\(\);i++\)) p n
(        {) S
(if) K
( \(this.isCellEmpty\(i\)\)) p n
(            ) S
(return) K
( ) p
(false) k
(;) p n
(        }) N
(        ) S
(return) K
( ) p
(true) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the entry coordinate of a lane) N
(     * @return the lane entry in type of coordinate) N
(     */) N
(    ) p
(public) K
( Coordinate getEntry\(\) {) p n
(        ) S
(return) K
( entry;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the exit coordinate of a lane) N
(     * @return the lane exit in type of coordinate) N
(     */) N
(    ) p
(public) K
( Coordinate getExit\(\) {) p n
(        ) S
(return) K
( exit;) p n
(    }) N
(Lane.java) (Page 3/5) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (53/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 54
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(    ) S
(/**) C n
(     * Gets the moving direction of a lane) N
(     * @return the lane moving direction in type of MapDirection) N
(     */) N
(    ) p
(public) K
( MapDirection getMovingDirection\(\) {) p n
(        ) S
(return) K
( movingDirection;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the road that a lane is belongs to) N
(     * @return the Road that lane in it in type of road) N
(     */) N
(    ) p
(public) K
( Road getRoad\(\) {) p
(return) K
( road; }) p n
() N
(    ) S
(/**) C n
(     * Sets the road that a alane belongs to) N
(     * @param road to set it to a lane in type of road) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setRoad\(Road road\) {this.road = road;}) p n
() N
() N
(    ) S
(/**) C n
(     * Gets the end Intersection of a lane,) N
(     * @return the lane End intersection in type of Intersection) N
(     */) N
(    ) p
(public) K
( Intersection getEndIntersection\(\) {) p n
(        ) S
(return) K
( endIntersection;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the end intersection for a lane) N
(     *) N
(     * then sets the intersection to the) N
(     * and checks if the intersection is in the right coordinates) N
(     * and if it matches the correct lane direction) N
(     * @param endIntersection is the intersection to set to the lane) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setEndIntersection\(Intersection endIntersection\) {) p n
(        ) S
(int) k
( x =endIntersection.getLocation\(\).getX\(\);) p n
(        ) S
(int) k
( y =endIntersection.getLocation\(\).getY\(\);) p n
() N
(        ) S
(if) K
( \(\(this.getMovingDirection\(\)==MapDirection.NORTH\)&&\(this.getExit\(\).get) p n
(X\(\)==x\)&&\(this.getExit\(\).getY\(\)==y+1\) \)) N
(        {this.endIntersection = endIntersection;}) N
() N
(        ) S
(else) K
( ) p
(if) K
( \(\(this.getMovingDirection\(\)==MapDirection.SOUTH\)&&\(this.getExit\() p n
(\).getX\(\)==x\)&&\(this.getExit\(\).getY\(\)==y-1\) \)) N
(        {this.endIntersection = endIntersection;}) N
() N
(        ) S
(else) K
( ) p
(if) K
(\(\(this.getMovingDirection\(\)==MapDirection.EAST\)&&\(this.getExit\(\).) p n
(getX\(\)==x-1\)&&\(this.getExit\(\).getY\(\)==y\) \)) N
(        {this.endIntersection = endIntersection;}) N
() N
(        ) S
(else) K
( ) p
(if) K
(\(\(this.getMovingDirection\(\)==MapDirection.WEST\)&&\(this.getExit\(\).) p n
(getX\(\)==x+1\)&&\(this.getExit\(\).getY\(\)==y\) \)) N
(        {this.endIntersection = endIntersection;}) N
() N
(    }) N
(Lane.java) (Page 4/5) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (54/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 55
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(    ) S
(/**) C n
(     * @param v is a vehicle to set it to a lane) N
(     * @param cell is a cell in a lane to set vehicle on it) N
(     * @return true if a vehicle is setted) N
(     * false if the cell is out of bound) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( setCell\(Vehicle v, ) p
(int) k
( cell\) {) p n
(        ) S
(if) K
( \(cell < 0 || cell >= length\)) p n
(            ) S
(return) K
( ) p
(false) k
(;) p n
(        ) N
(        lane[cell] = v;) N
(        ) S
(return) K
( ) p
(true) k
(;) p n
(    }) N
() N
() N
() N
() N
(    ) S
(public) K
( ) p
(int) k
( getRoadIndex\(\) {) p n
(        ) S
(return) K
( RoadIndex;) p n
(    }) N
(    ) S
(public) K
( Vehicle get\() p
(int) k
( i\) {) p n
(        ) S
(return) K
( lane[i];) p n
(    }) N
(    ) S
(public) K
( ) p
(void) k
( setRoadIndex\() p
(int) k
( roadIndex\) {) p n
(        RoadIndex = roadIndex;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(static) K
( ) p
(boolean) k
( Rotate\(Lane lane1, Lane lane2\){) p n
(        ) S
(if) K
( \(lane1.getMovingDirection\(\)==lane2.getMovingDirection\(\)\){) p n
(            ) S
(return) K
( ) p
(false) k
(;) p n
(        }) N
(        ) S
(return) K
( ) p
(true) k
(;) p n
(    }) N
(}) N
() N
(class) K
( ) p
(NotALaneException) L
( ) p
(extends) K
( Exception {) p n
(    ) S
(public) K
( NotALaneException\(\) { ) p
(super) K
(\(\); }) p n
(    ) S
(public) K
( NotALaneException\(String msg\) { ) p
(super) K
(\(msg\); }) p n
(    ) S
(public) K
( NotALaneException\(String msg, Throwable t\) { ) p
(super) K
(\(msg,t\); }) p n
(    ) S
(public) K
( NotALaneException\(Throwable t\) { ) p
(super) K
(\(t\); }) p n
(}) N
(Lane.java) (Page 5/5) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (55/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 56
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(/**) C n
( * This enum represents the types of colors that a TrafficLight could have. The ) N
(system only uses RED and GREEN at the moment,) N
( * but in case YELLOW was to be added in the future, it is included here as well) N
(.) N
( */) N
(public) K
( enum LightColour {) p n
(    GREEN, YELLOW, RED) N
(}) S
(LightColour.java) (Page 1/1) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (56/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 57
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(/**) C n
( * This enum is to represent different directions in the map, namely the 4 cardi) N
(nal directions NORTH, SOUTH, EAST, AND WEST.) N
( */) N
(public) K
( enum MapDirection {) p n
(    NORTH, SOUTH, EAST, WEST, ERROR) N
(}) N
(MapDirection.java) (Page 1/1) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (57/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 58
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( java.math.BigDecimal;) p n
() N
(/**) C n
( * This class represents how images will be resized to fit on the screen. Each i) N
(mage in our system is 100x100, but they) N
( * need to be scaled down in order to be displayed properly. This is used throug) N
(hout the system, for drawing the grid) N
( * squares, vehicles, and determining the location to where vehicles will move.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(ResizeFactor) L
( {) p n
() N
(    ) S
(private) K
( ) p
(double) k
( resizeX;) p n
(    ) S
(private) K
( ) p
(double) k
( resizeY;) p n
() N
(    ) S
(/**) C n
(     * Creates a new ResizeFactor instance. There are two parameters, although o) N
(nly one is used in most situations. This) N
(     * is so that each square image maintains its aspect ratio. The typical rang) N
(e for resize factors is from 0 < ResizeFactor < 1.) N
(     * @param resizeX how much to resize the x direction by) N
(     * @param resizeY how much to resize the y direction by) N
(     */) N
(    ) p
(public) K
( ResizeFactor\() p
(double) k
( resizeX, ) p
(double) k
( resizeY\) {) p n
(        this.resizeX = resizeX;) N
(        this.resizeY = resizeY;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the resize factor of the x-direction) N
(     * @return resize factor of x) N
(     */) N
(    ) p
(public) K
( ) p
(double) k
( getResizeX\(\) {) p n
(        ) S
(return) K
( resizeX;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the resize factor of the y-direction) N
(     * @return resize factor of y) N
(     */) N
(    ) p
(public) K
( ) p
(double) k
( getResizeY\(\) {) p n
(        ) S
(return) K
( resizeY;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Dynamically determines the resize factor for a map. Given a map width and) N
( height, determine the best) N
(     * resize factor so that the map best displays on the user's display. It use) N
(s the larger of the two dimensions) N
(     * to determine the best fitting resize factor.) N
(     * @param mapWidth width of the map to get a resize factor for) N
(     * @param mapHeight height of the map to get a resize factor for) N
(     * @return a ResizeFactor that is good for the given map dimensions) N
(     */) N
(    ) p
(public) K
( ) p
(static) K
( ResizeFactor getSuggestedResizeFactor\() p
(int) k
( mapWidth, ) p
(int) k
( mapHei) p n
(ght\) {) N
(        ) S
(int) k
( larger = mapHeight > mapWidth ? mapHeight : mapWidth;) p n
() N
(ResizeFactor.java) (Page 1/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (58/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 59
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(double) k
( rf = 1.0;) p n
(        ) S
(if) K
(\(larger < 10 || larger < 10\) {) p n
(            rf = 1.0 / \(mapHeight * 0.4\);) N
(        }) N
(        ) S
(else) K
( {) p n
(            rf = 1.0 / \(larger * 0.2\);) N
(        }) N
() N
(        BigDecimal resizeFactor = ) S
(new) K
( BigDecimal\(rf\);) p n
(        BigDecimal rounded = resizeFactor.setScale\(2,BigDecimal.ROUND_HALF_UP\);) N
(        ) S
(double) k
( result = rounded.doubleValue\(\);) p n
() N
(        ) S
(return) K
( ) p
(new) K
( ResizeFactor\(result, result\);) p n
(    }) N
() N
(    ) S
(public) K
( String toString\(\) {) p n
(        ) S
(return) K
( resizeX+") p
(,) str
("+resizeY;) p n
(    }) N
(}) N
(ResizeFactor.java) (Page 2/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (59/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 60
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( java.io.Serializable;) p n
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * Each road is connected to at most 2 intersections \(one at each end\)) N
( * Each road is composed of a number of lanes \(currently 2, one for each directi) N
(on\)) N
( * These are like the edges in our directed graph) N
( * Each has a start-location and an end-location) N
( */) N
(public) K
( ) p
(class) K
( ) p
(Road) L
( ) p
(implements) K
( Component, Serializable, IRoad {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = 6679898165504556586L;) p n
(    ) S
(private) K
( Coordinate start;) p n
(    ) S
(private) K
( Coordinate end;) p n
(    ) S
(private) K
( ArrayList<Lane> lanes;) p n
(    ) S
(private) K
( Intersection intersection;) p n
(    ) S
(private) K
( ) p
(static) K
( ) p
(int) k
( counter = 0;) p n
() N
(    ) S
(public) K
( ) p
(int) k
( getId\(\) {) p n
(        ) S
(return) K
( id;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setId\() p
(int) k
( id\) {) p n
(        this.id = id;) N
(    }) N
() N
(    ) S
(private) K
( ) p
(int) k
( id;) p n
() N
(    ) S
(/**) C n
(     * Creates an instance of a new Road. It has no lanes yet. \(Note: a road wit) N
(hout lanes) N
(     * should not exist, so the user must specify lanes right away\). A road can ) N
(have anywhere) N
(     * between 1 and n lanes.) N
(     * A road is defined by where it starts in the grid and where it ends in the) N
( grid.) N
(     * The coordinates can be in any order, as long as they form a straight line) N
(.) N
(     *) N
(     * @param start the location of one end of the road) N
(     * @param end   the location of the other end of the road) N
(     */) N
(    ) p
(public) K
( Road\(Coordinate start, Coordinate end\) {) p n
(        lanes = ) S
(new) K
( ArrayList<Lane>\(\);) p n
(        this.start = start;) N
(        this.end = end;) N
(        this.id = ++counter;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the number of lanes a road has) N
(     *) N
(     * @return number of lanes in the road) N
(     */) N
(    ) p
(public) K
( ArrayList<Lane> getLanes\(\) {) p n
(        ) S
(return) K
( lanes;) p n
(Road.java) (Page 1/4) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (60/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 61
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
(    ) S
(/**) C n
(     * Adds a lane to the road) N
(     *) N
(     * @param l the Lane to add to the road) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( addLane\(Lane l\) {) p n
(        l.setRoad\() S
(this) k
(\);) p n
(        l.setRoadIndex\(lanes.size\(\)\);) N
(        lanes.add\(l\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the lane at the index specified) N
(     *) N
(     * @param i index of lane) N
(     * @return the instance of Lane at that index i) N
(     */) N
(    ) p
(public) K
( Lane getLaneAtIndex\() p
(int) k
( i\) {) p n
(        ) S
(return) K
( lanes.get\(i\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the beginning coordinate of the road) N
(     *) N
(     * @return location of beginning of road of type Coordinate) N
(     */) N
(    ) p
(public) K
( Coordinate getStartLocation\(\) {) p n
(        ) S
(return) K
( start;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the end coordinate of the road) N
(     *) N
(     * @return location of end of road of type Coordinate) N
(     */) N
(    ) p
(public) K
( Coordinate getEndLocation\(\) {) p n
(        ) S
(return) K
( end;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the number of lanes currently part of the road) N
(     *) N
(     * @return number of lanes in the road of type int) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getNumberLanes\(\) {) p n
(        ) S
(return) K
( lanes.size\(\);) p n
(    }) N
() N
(    ) S
(public) K
( Intersection getIntersection\(\) {) p n
(        ) S
(//TODO) c n
(        ) p
(return) K
( intersection;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setIntersection\(Intersection intersection\) {) p n
(        ) S
(//TODO) c n
(        this.intersection = intersection;) p n
(    }) N
(Road.java) (Page 2/4) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (61/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 62
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(    ) S
(public) K
( ) p
(void) k
( setStart\(Coordinate start\) {) p n
(        this.start = start;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setEnd\(Coordinate end\) {) p n
(        this.end = end;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Uses the coordinates to determine how long the road is) N
(     * A road has a minimum length of 1) N
(     *) N
(     * @return length of the road) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getLength\(\) {) p n
(        ) S
(int) k
( aX = start.getX\(\);) p n
(        ) S
(int) k
( aY = start.getY\(\);) p n
(        ) S
(int) k
( bX = end.getX\(\);) p n
(        ) S
(int) k
( bY = end.getY\(\);) p n
(        ) S
(int) k
( length;) p n
() N
(        ) S
(if) K
( \(aX == bX\) {) p n
(            length = Math.abs\(aY - bY\) + 1;) N
(            ) S
(return) K
( length;) p n
(        } ) S
(else) K
( ) p
(if) K
( \(aY == bY\) {) p n
(            length = Math.abs\(aX - bX\) + 1;) N
(            ) S
(return) K
( length;) p n
(        } ) S
(else) K n
(            ) p
(return) K
( -1;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Determines if a road runs NORTH to SOUTH) N
(     *) N
(     * @return true if the road runs NORTH to SOUTH or SOUTH to NORTH, false if ) N
(the road runs EAST to WEST or WEST to EAST) N
(     */) N
(    ) p
(public) K
( ) p
(boolean) k
( runsVertically\(\) {) p n
(        ) S
(int) k
( aX = start.getX\(\);) p n
(        ) S
(int) k
( bX = end.getX\(\);) p n
(        ) S
(int) k
( aY = start.getY\(\);) p n
(        ) S
(int) k
( bY = end.getY\(\);) p n
() N
(        ) S
(// if aX==bX, then road runs vertically) c n
(        ) p
(if) K
( \(aX == bX\) {) p n
(            ) S
(if) K
(\(aY == bY\) {) p n
(                ) S
(// the road is length of 1, do something else) c n
(                ) p
(if) K
(\(lanes.size\(\) == 0\) {) p n
(                    ) S
(return) K
( ) p
(true) k
(;) p n
(                } ) S
(else) K
( {) p n
(                    Lane lane = lanes.get\(0\);) N
(                    ) S
(if) K
(\(lane.getMovingDirection\(\) == MapDirection.NORTH || lane.g) p n
(etMovingDirection\(\) == MapDirection.SOUTH\) {) N
(                        ) S
(return) K
( ) p
(true) k
(;) p n
(                    } ) S
(else) K
( {) p n
(                        ) S
(return) K
( ) p
(false) k
(;) p n
(                    }) N
(                }) N
(Road.java) (Page 3/4) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (62/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 63
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            }) p n
(            ) S
(return) K
( ) p
(true) k
(;) p n
(        }) N
() N
(        ) S
(// if aY==bY, then road runs horizontally) c n
(        ) p
(return) K
( ) p
(false) k
(;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(boolean) k
( runsVertically\(MapDirection mapDirection\) {) p n
() N
(        ) S
(if) K
( \(mapDirection.equals\(mapDirection.NORTH\) || mapDirection.equals\(mapDi) p n
(rection.SOUTH\)\)) N
(            ) S
(return) K
( ) p
(true) k
(;) p n
(        ) S
(else) K n
(            ) p
(return) K
( ) p
(false) k
(;) p n
(    }) N
(}) N
(Road.java) (Page 4/4) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (63/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 64
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( londonsw.controller.TrafficLightController;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
(import) K
( rx.Subscriber;) p n
() N
(import) K
( java.io.Serializable;) p n
() N
(/**) C n
( * The implementation of the traffic lights in our system. This extends the RxJa) N
(va class Subscriber to receive) N
( * messages from the Ticker.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(TrafficLight) L
( ) p
(extends) K
( Subscriber<Long> ) p
(implements) K
( Serializable {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = 1299747948664926447L;) p n
(    ) S
(private) K
( LightColour state;) p n
(    ) S
(private) K
( ) p
(long) k
( duration;) p n
(    ) S
(private) K
( ) p
(long) k
( currentTime;) p n
(    ) S
(private) K
( ) p
(static) K
( ) p
(int) k
( counter = 0;) p n
(    ) S
(private) K
( ) p
(int) k
( id;) p n
() N
(    ) S
(/**) C n
(     * Default constructor, initial light color is red) N
(     */) N
(    ) p
(public) K
( TrafficLight\(\) {) p n
(        this.currentTime = 1000;) N
(        Ticker.subscribe\() S
(this) k
(\);) p n
(        this.state = LightColour.RED;) N
(        this.id = ++counter;) N
(        this.duration = TrafficLightController.getInstance\(\).getDurationLength\(\)) N
(;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Creating a new traffic light with a new default color) N
(     * @param colour the initial color of the traffic light) N
(     */) N
(    ) p
(public) K
( TrafficLight\(LightColour colour\) {) p n
(        this.currentTime = 1000;) N
(        Ticker.subscribe\() S
(this) k
(\);) p n
(        this.state = colour;) N
(        this.id = ++counter;) N
(        this.duration = TrafficLightController.getInstance\(\).getDurationLength\(\)) N
(;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Subscribes this traffic light to the Ticker. Especially useful if using a) N
( loaded map!) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( subscribeToTicker\(\) {) p n
(        Ticker.subscribe\() S
(this) k
(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Get the current color of the traffic light) N
(     * @return LightColour \(enum\) of the current colour) N
(     */) N
(TrafficLight.java) (Page 1/3) (Mar 24, 16 15:53) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (64/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 65
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(public) K
( LightColour getState\(\) {) p n
(        ) S
(return) K
( state;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the ID of the traffic light, useful for logging) N
(     * @return the id of this traffic light instance) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getId\(\) {) p n
(        ) S
(return) K
( id;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the id of the traffic light) N
(     * @param id the desired id of the traffic light) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setId\() p
(int) k
( id\) {) p n
(        this.id = id;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Set the color of the traffic light from an external source) N
(     * @param state LightColour \(enum\) of the color to be) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setState\(LightColour state\) {) p n
(        this.state = state;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Set the color of the traffic light based on the current state.) N
(     * Current behaviour:) N
(     * If currently red, go to green) N
(     * If currently green, go to red) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( nextState\(\) {) p n
(        ) S
(switch) K
( \(state\) {) p n
(            ) S
(case) K
( RED:) p n
(                state = LightColour.GREEN;) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( YELLOW:) p n
(                state = LightColour.RED;) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( GREEN:) p n
(                state = LightColour.RED; ) S
(// changed to RED, no yellow behaviour ) c n
(for now) N
(                ) p
(break) K
(;) p n
(            ) S
(default) K
(:) p n
(                state = LightColour.RED;) N
(                ) S
(break) K
(;) p n
(        }) N
() N
(    }) N
() N
(    ) S
(/**) C n
(     * Set how long the traffic light should be a specific color) N
(     * @param duration time \(in millis\) of how long the traffic light should sta) N
(y its color) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setDuration\() p
(long) k
( duration\) {) p n
(TrafficLight.java) (Page 2/3) (Mar 24, 16 15:53) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (65/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 66
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        this.duration = duration;) p n
() N
(    }) N
() N
(    ) S
(/**) C n
(     * Get the current duration of the traffic light \(how long a color lasts\)) N
(     * @return the duration \(in millis\)) N
(     */) N
(    ) p
(public) K
( ) p
(long) k
( getDuration\(\) {) p n
(        ) S
(return) K
( duration;) p n
(    }) N
() N
() N
(    ) S
(/**) C n
(     * This is for what the traffic light would do if the ticker stops. Left uni) N
(mplemented on purpose) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onCompleted\(\) {    }) p n
() N
(    ) S
(/**) C n
(     * This is what the traffic light would do if there is an error thrown by th) N
(e ticker's observable. Left) N
(     * unimplemented on purpose) N
(     * @param throwable) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onError\(Throwable throwable\) {   }) p n
() N
(    ) S
(/**) C n
(     * This is like the onTick method. This is what happens when the ticker tick) N
(s. The state changes after) N
(     * a specified amount of ticks \(the duration\).) N
(     * @param aLong the current time in the system) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onNext\(Long aLong\) {) p n
(        ) S
(if) K
(\(currentTime < \(duration\)\) {) p n
(            currentTime += 1000;) N
(        }) N
(        ) S
(else) K
( {) p n
(            currentTime = 1000;) N
(            nextState\(\);) N
(            TrafficLightController.getInstance\(\).colourChanged\(state, ) S
(this) k
(\);) p n
(        }) N
(    }) N
(}) S
(TrafficLight.java) (Page 3/3) (Mar 24, 16 15:53) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (66/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 67
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components;) p n
() N
(import) K
( java.util.Arrays;) p n
(import) K
( java.util.Collections;) p n
(import) K
( java.util.List;) p n
(import) K
( java.util.Random;) p n
() N
(/**) C n
( * This enum is to represent different types of behaviours vehicles can have. Fo) N
(r instance, a Car might have average) N
( * behaviour, but an Ambulance has aggressive behaviour.) N
( */) N
(public) K
( enum VehicleBehavior{) p n
(    AVERAGE, CAUTIOUS, AGGRESSIVE;) N
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( java.util.List<VehicleBehavior> VALUES= Collections.unm) p n
(odifiableList\(Arrays.asList\(values\(\)\)\);) N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(int) k
( size = VALUES.size\(\);) p n
(    ) S
(private) K
( ) p
(static) K
(  ) p
(final) K
( Random RANDOM= ) p
(new) K
( Random\(\);) p n
(    ) S
(public) K
( ) p
(static) K
( VehicleBehavior randomLetter\(\){) p n
(        ) S
(return) K
( VALUES.get\(RANDOM.nextInt\(size\)\);) p n
(    }) N
(}) N
(VehicleBehavior.java) (Page 1/1) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (67/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 68
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components.vehicles;) p n
() N
(import) K
( londonsw.model.simulation.components.Lane;) p n
() N
() N
(public) K
( ) p
(class) K
( ) p
(Ambulance) L
( ) p
(extends) K
( Vehicle {) p n
() N
() N
(    ) S
(/**) C n
(     * Create a vehicle and set its position by specify a cell in a lane) N
(     *) N
(     * @param currentCell the cell to set vehicle in, in the lane) N
(     * @param currentLane the lane to set vehicle in) N
(     */) N
(    ) p
(//TODO: Ambulance ignoring traffic light and blinking lights) c n
(    ) p
(// TODO: figure out why ambulance gets stuck after moving forward) c n
(    ) p
(public) K
( Ambulance\() p
(int) k
( currentCell, Lane currentLane\) {) p n
(        ) S
(super) K
(\(currentCell, currentLane\);) p n
(        this.vehicleLength=1;) N
(        this.vehicleSpeed=1.0;) N
(        this.vehiclePriority = 5;) N
(        this.vehicleBehavior = vehicleBehavior.AGGRESSIVE;) N
() N
(    }) N
(}) N
(Ambulance.java) (Page 1/1) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (68/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 69
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components.vehicles;) p n
(import) K
( londonsw.model.simulation.components.Lane;) p n
(import) K
( londonsw.model.simulation.components.VehicleBehavior;) p n
() N
(import) K
( java.io.Serializable;) p n
() N
(/**) C n
( * An implementation of a vehicle) N
( * This moves in a lane) N
( * Only moves forwards when the slot in front of it is empty) N
( */) N
() p n
() N
(public) K
( ) p
(class) K
( ) p
(Car) L
( ) p
(extends) K
( Vehicle ) p
(implements) K
( Serializable, ICar {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = -3555254273903868035L;) p n
(    ) S
(private) K
( ) p
(static) K
( ) p
(int) k
( idCounter = 0;) p n
(    ) S
(private) K
( ) p
(int) k
( id;) p n
() N
(    ) S
(public) K
( Car\() p
(int) k
( currentCell,Lane currentLane\) {) p n
(        ) S
(super) K
(\(currentCell,currentLane\);) p n
(        this.vehicleLength=1;) N
(        this.vehicleSpeed=1.0;) N
(        this.vehiclePriority = 1;) N
(        this.vehicleBehavior = VehicleBehavior.AVERAGE; ) S
(// default) c n
() p n
(        id = idCounter++;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(int) k
( getCarId\(\) { ) p
(return) K
( id; }) p n
() N
(  }) N
() N
() N
() N
(Car.java) (Page 1/1) (Mar 10, 16 9:20) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (69/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 70
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components.vehicles;) p n
() N
(/**) C n
( * Created by felix on 26/02/2016.) N
( */) N
(public) K
( ) p
(interface) K
( ) p
(ICar) L
( {) p n
() N
(    ) S
(int) k
( getCarId\(\);) p n
() N
(}) S
(ICar.java) (Page 1/1) (Mar 02, 16 21:30) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (70/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 71
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components.vehicles;) p n
() N
(import) K
( londonsw.model.simulation.components.Coordinate;) p n
(import) K
( londonsw.model.simulation.components.Lane;) p n
(import) K
( londonsw.model.simulation.components.TrafficLight;) p n
(import) K
( londonsw.model.simulation.components.VehicleBehavior;) p n
() N
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * Created by felix on 04/03/2016.) N
( */) N
(public) K
( ) p
(interface) K
( ) p
(IVehicle) L
( {) p n
() N
(    Lane getPreviousLane\(\);) N
(    ) S
(void) k
( setPreviousLane\(Lane previousLane\);) p n
(    ) S
(void) k
( setCurrentCoordinate\(Coordinate currentCoordinate\);) p n
(    ) S
(int) k
( getVehicleLength\(\);) p n
(    ) S
(double) k
( getVehicleSpeed\(\);) p n
(    ) S
(int) k
( getVehiclePriority\(\);) p n
(    Lane getCurrentLane\(\);) N
(    ) S
(int) k
( getCurrentCell\(\);) p n
(    ) S
(int) k
( getVehicleState\(\);) p n
(    VehicleBehavior getVehicleBehavior\(\);) N
(    Coordinate getCurrentCoordinate\(\);) N
(    ) S
(void) k
( setVehicleLength\() p
(int) k
( vehicleLength\);) p n
(    ) S
(void) k
( setVehicleSpeed\() p
(double) k
( vehicleSpeed\);) p n
(    ) S
(void) k
( setVehiclePriority\() p
(int) k
( vehiclePriority\);) p n
(    ) S
(void) k
( setCurrentLane\(Lane currentLane\) ) p
(throws) K
( Exception;) p n
(    ) S
(void) k
( setCurrentCell\() p
(int) k
( curCell,Lane currentLane\) ) p
(throws) K
( Exception;) p n
(    ) S
(void) k
( setVehicleState\() p
(int) k
( vehicleState\);) p n
(    ) S
(void) k
( setVehicleBehavior\(VehicleBehavior vehicleBehavior\);) p n
(    Lane chooseLane \(\) ) S
(throws) K
( Exception;) p n
(    ) S
(int) k
( moveVehicle\() p
(int) k
( step\) ) p
(throws) K
( Exception;) p
(//changed return type to int) c n
(    ) p
(void) k
( readTrafficLight\(\) ) p
(throws) K
( Exception;) p n
(    ArrayList<Lane> getLaneOptions\(\) ) S
(throws) K
( Exception;) p n
(    ) S
(int) k
( vehicleTurn \(Lane l\) ) p
(throws) K
( Exception; ) p
(//changed return type to int) c n
(    Coordinate getStoredCurrentCoordinate\(\);) p n
(    ) S
(void) k
( setPreviousCoordinate\(Coordinate coord\);) p n
() N
(     ) S
(int) k
( getVehiclePriorityToTurn\(\);) p n
(     ) S
(void) k
( setVehiclePriorityToTurn\() p
(int) k
( vehiclePriorityToTurn\);) p n
(     TrafficLight getVehicleTrafficLight\(\);) N
(     ) S
(void) k
( setVehicleTrafficLight\(TrafficLight vehicleTrafficLight\);) p n
(}) N
(IVehicle.java) (Page 1/1) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (71/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 72
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.model.simulation.components.vehicles;) p n
(import) K
( londonsw.controller.TrafficLightController;) p n
(import) K
( londonsw.controller.VehicleController;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
(import) K
( londonsw.model.simulation.components.*;) p n
(import) K
( rx.Subscriber;) p n
() N
(import) K
( java.io.Serializable;) p n
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.Random;) p n
() N
() N
(/**) C n
( * This is the abstract class that all vehicles will implement) N
( * This allows for scalability because we can add more types of cars \(eg. ambula) N
(nce, bus\)) N
( *) N
( * This uses RxJava's Subscriber class to subscribe to the Ticker \(that has as O) N
(bservable\). On each tick,) N
( * the onNext\(..\) method runs.) N
( */) N
(public) K
( ) p
(abstract) K
( ) p
(class) K
( ) p
(Vehicle) L
( ) p
(extends) K
( Subscriber<Long> ) p
(implements) K
( Serializable {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = -4552832373570448039L;) p n
(    ) S
(protected) K
( ) p
(int) k
( vehicleLength;) p n
(    ) S
(protected) K
( ) p
(double) k
( vehicleSpeed;) p n
(    ) S
(protected) K
( ) p
(int) k
( currentCell;) p n
(    ) S
(protected) K
( ) p
(int) k
( vehiclePriority;) p
(// 1 is the lowest) c n
(    ) p
(protected) K
( ) p
(int) k
( vehicleState;) p n
(    ) S
(protected) K
( VehicleBehavior vehicleBehavior;) p n
(    ) S
(protected) K
(  Lane currentLane;) p n
(    ) S
(protected) K
(  ArrayList<Lane> laneOptions = ) p
(new) K
( ArrayList<Lane>\(\);) p n
(    ) S
(protected) K
(  Random randomDirection;) p n
(    ) S
(protected) K
( Lane l;) p n
(    ) S
(protected) K
( Coordinate currentCoordinate;) p n
(    ) S
(protected) K
(  Coordinate previousCoordinate;) p n
(    ) S
(protected) K
(  Lane previousLane;) p n
(    ) S
(protected) K
( ) p
(int) k
( vehiclePriorityToTurn;) p n
(    ) S
(protected) K
( TrafficLight vehicleTrafficLight;) p n
(    ) S
(protected) K
( ) p
(int) k
( timesTicked;) p n
(    ) S
(private) K
( ) p
(static) K
( ) p
(int) k
( counter = 0;) p n
(    ) S
(protected) K
( ) p
(int) k
( id;) p n
(    ) S
(protected) K
( ) p
(int) k
( timeSpentStanding;) p n
() N
() N
(    ) S
(/**) C n
(     * Create a vehicle and set its position by specify a cell in a lane) N
(     *) N
(     * @param currentCell the cell to set vehicle in, in the lane) N
(     * @param currentLane the lane to set vehicle in) N
(     */) N
(    ) p
(public) K
( Vehicle\() p
(int) k
( currentCell, Lane currentLane\) {) p n
(        this.currentCell = currentCell;) N
(        this.currentLane = currentLane;) N
(        this.currentLane.setCell\() S
(this) k
(, currentCell\);) p n
(        Ticker.subscribe\() S
(this) k
(\);) p n
(        timesTicked = 0;) N
(        id = ++counter;) N
(        timeSpentStanding = 0;) N
(Vehicle.java) (Page 1/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (72/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 73
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
(    ) S
(/**) C n
(     * gets the traffic light that vehicle must read) N
(     * @return traffic light in front of a vehicle in type of traffic light) N
(     */) N
(    ) p
(public) K
( TrafficLight getVehicleTrafficLight\(\) {) p n
(        ) S
(return) K
( vehicleTrafficLight;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * sets the traffic light for vehicle) N
(     * @param vehicleTrafficLight traffic light in front of vehicle) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setVehicleTrafficLight\(TrafficLight vehicleTrafficLight\) {) p n
(        this.vehicleTrafficLight = vehicleTrafficLight;) N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * sets the vehicle priority to turn) N
(     * @param vehiclePriorityToTurn the Priority Of vehicle To turn first int ty) N
(pe of integer) N
(     * in each intersection if there are more than vehicle, vehicles are given p) N
(riorities to decide which turn first) N
(     * so they do not crash) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setVehiclePriorityToTurn\() p
(int) k
( vehiclePriorityToTurn\) {) p n
(        this.vehiclePriorityToTurn = vehiclePriorityToTurn;) N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * gets vehicle priority to turn ,) N
(     * @return the Priority Of vehicle To which turn first ib type of integer) N
(     *depends on its priority its turns or stops) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getVehiclePriorityToTurn\(\) {) p n
(        ) S
(return) K
( vehiclePriorityToTurn;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * gets a unique vehicle ID) N
(     * @return  ID of vehicle in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getId\(\) {) p n
(        ) S
(return) K
( id;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * sets a unique ID for vehicle) N
(     * @param id  unique ID for vehicle in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setId\() p
(int) k
( id\) {) p n
(        this.id = id;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the length of a vehicle) N
(Vehicle.java) (Page 2/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (73/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 74
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     *) C n
(     * @return the length of a vehicle in type of integer) N
(     * each type of vehicle has its own length) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getVehicleLength\(\) {) p n
(        ) S
(return) K
( vehicleLength;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the speed of a vehicle) N
(     *) N
(     * @return the speed of a vehicle in type of double) N
(     * each vehicle's speed depends on its behavior) N
(     */) N
(    ) p
(public) K
( ) p
(double) k
( getVehicleSpeed\(\) {) p n
(        ) S
(return) K
( vehicleSpeed;) p n
(    }) N
() N
() N
(    ) S
(public) K
( ) p
(int) k
( getVehiclePriority\(\) {) p n
(        ) S
(return) K
( vehiclePriority;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the lane which is vehicle in) N
(     *) N
(     * @return the lane which is vehicle in on the current time in type of lane) N
(     */) N
(    ) p
(public) K
( Lane getCurrentLane\(\) {) p n
(        ) S
(return) K
( currentLane;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the current cell in lane which is vehicle in) N
(     *) N
(     * @return cell from lane which is vehicle in on the current time , in type ) N
(of integer) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getCurrentCell\(\) {) p n
(        ) S
(return) K
( currentCell;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the state of vehicle which are 0 refers to still or 1 refers to movi) N
(ng) N
(     *) N
(     * @return the state of vehicle in type if integer) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getVehicleState\(\) {) p n
(        ) S
(return) K
( vehicleState;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the behavior of a vehicle from three behaviors AVERAGE, AGGRESSIVE, ) N
(and CAUTIOUS) N
(     *) N
(     * @return the behavior of a vehicle in type of enum VehicleBehavior) N
(     */) N
(    ) p
(public) K
( VehicleBehavior getVehicleBehavior\(\) {) p n
(Vehicle.java) (Page 3/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (74/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 75
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(return) K
( this.vehicleBehavior;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the previous lane which vehicle was in) N
(     * @return the previous lane in type of Lane) N
(     */) N
(    ) p
(public) K
( Lane getPreviousLane\(\) {) p n
(        ) S
(return) K
( previousLane;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setPreviousCoordinate\(Coordinate prev\) {) p n
(        this.previousCoordinate = prev;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setPreviousLane\(Lane previousLane\) {) p n
(        this.previousLane = previousLane;) N
(    }) N
() N
(    ) S
(public) K
( Coordinate getPreviousCoordinate\(\) {) p n
(        ) S
(return) K
( previousCoordinate;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Increments the time spent standing by this vehicle. This exists because t) N
(he VehicleController needs) N
(     * to call this for all stationary vehicles.) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( incrementTimeSpentStanding\(\) {) p n
(        timeSpentStanding++;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the time spent standing \(not moving\) in the system) N
(     * @return the total time spent standing by this vehicle in the system) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getTimeSpentStanding\(\) {) p n
(        ) S
(return) K
( timeSpentStanding;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the times ticked by this vehicle in the system. This is used in the ) N
(calculation for the average vehicle time) N
(     * standing in the system.) N
(     * @return the number of ticks this vehicle heard) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getTimesTicked\(\) {) p n
(        ) S
(return) K
( timesTicked;) p n
(    }) N
() N
() N
(    ) S
(/**) C n
(     * Gets the current coordinate of this vehicle in the Map) N
(     * @return the current coordinate of this vehicle in the Map) N
(     */) N
(    ) p
(public) K
( Coordinate getCurrentCoordinate\(\) {) p n
(        ) S
(int) k
( currentCell = this.getCurrentCell\(\);) p n
(        Lane currentLane = this.getCurrentLane\(\);) N
(        Coordinate coordinate = ) S
(new) K
( Coordinate\(0, 0\);) p n
(Vehicle.java) (Page 4/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (75/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 76
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        MapDirection mapDirection = currentLane.getMovingDirection\(\);) N
() N
() N
(        ) S
(switch) K
( \(mapDirection\) {) p n
(            ) S
(case) K
( NORTH:) p n
(                coordinate.setX\(currentLane.getEntry\(\).getX\(\)\);) N
(                coordinate.setY\(currentLane.getEntry\(\).getY\(\) - currentCell\);) N
(                ) S
(break) K
(;) p n
() N
(            ) S
(case) K
( SOUTH:) p n
(                coordinate.setX\(currentLane.getEntry\(\).getX\(\)\);) N
(                coordinate.setY\(currentLane.getEntry\(\).getY\(\) + currentCell\);) N
(                ) S
(break) K
(;) p n
() N
(            ) S
(case) K
( EAST:) p n
(                coordinate.setX\(currentLane.getEntry\(\).getX\(\) + currentCell\);) N
(                coordinate.setY\(currentLane.getEntry\(\).getY\(\)\);) N
(                ) S
(break) K
(;) p n
() N
(            ) S
(case) K
( WEST:) p n
(                coordinate.setX\(currentLane.getEntry\(\).getX\(\) - currentCell\);) N
(                coordinate.setY\(currentLane.getEntry\(\).getY\(\)\);) N
(                ) S
(break) K
(;) p n
(        }) N
() N
(        this.currentCoordinate = coordinate;) N
() N
(        ) S
(return) K
( coordinate;) p n
(    }) N
() N
(    ) S
(public) K
( Coordinate getStoredCurrentCoordinate\(\) {) p n
(        ) S
(return) K
( currentCoordinate;) p n
(    }) N
(    ) S
(//Setter) c n
() p n
(    ) S
(/**) C n
(     * @param vehicleLength the length of a vehicle in type of integer) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setVehicleLength\() p
(int) k
( vehicleLength\) {) p n
(        this.vehicleLength = vehicleLength;) N
(    }) N
() N
(    ) S
(/**) C n
(     * @param vehicleSpeed the speed of vehicle in type of double) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setVehicleSpeed\() p
(double) k
( vehicleSpeed\) {) p n
(        this.vehicleSpeed = vehicleSpeed;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setVehiclePriority\() p
(int) k
( vehiclePriority\) {) p n
(        this.vehiclePriority = vehiclePriority;) N
(    }) N
() N
() N
(    ) S
(/**) C n
(     * @param currentLane a lane to set car in, in type of lane) N
(     * @throws Exception if lane is not exist) N
(     *                   set a vehicle into a new lane) N
(Vehicle.java) (Page 5/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (76/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 77
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     */) C n
(    ) p
(public) K
( ) p
(void) k
( setCurrentLane\(Lane currentLane\) ) p
(throws) K
( Exception {) p n
(        ) S
(if) K
( \(currentLane != ) p
(null) k
(\) {) p n
(            this.currentLane = currentLane;) N
(        } ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( Exception\(") p
(Lane is not Exist !) str
("\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * @param curCell     new cell to assign vehicle to) N
(     * @param currentLane lane that cell takes place in) N
(     * @throws Exception if the cell is out of bounds or is not empty) N
(     *                   <p>) N
(     *                   set a vehicle into a new cell) N
(     *                   check if a new cell is empty, and not out of bounds) N
(     *                   not less than zero or equal or more than lane length) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setCurrentCell\() p
(int) k
( curCell, Lane currentLane\) ) p
(throws) K
( Exception {) p n
(        ) S
(if) K
( \(\(curCell >= 0\) && \(curCell < currentLane.getLength\(\)\) && \(currentLan) p n
(e.isCellEmpty\(curCell\)\)\) {) N
(            this.currentCell = curCell;) N
(        } ) S
(else) K
( ) p
(if) K
( \(this.getVehiclePriority\(\) != 5\) {) p n
(            ) S
(throw) K
( ) p
(new) K
( Exception\(") p
(new cell is not available !) str
("\);) p n
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * @param vehicleState in type of integer) N
(     *                     set the state of vehicle) N
(     *                     0 for still and 1 for movement) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setVehicleState\() p
(int) k
( vehicleState\) {) p n
(        this.vehicleState = vehicleState;) N
(    }) N
() N
(    ) S
(/**) C n
(     * @param vehicleBehavior in type of VehicleBehavior enum) N
(     *                        sets the behavior of a vehicle) N
(     *                        there are three behaviors AVERAGE, AGGRESSIVE, and) N
( CAUTIOUS) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setVehicleBehavior\(VehicleBehavior vehicleBehavior\) {) p n
(        this.vehicleBehavior = vehicleBehavior;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setCurrentCoordinate\(Coordinate currentCoordinate\) {) p n
(        this.currentCoordinate = currentCoordinate;) N
(    }) N
() N
(    ) S
(/**) C n
(     * @param step number of steps to move, depends on the behavior) N
(     * @return returns the number of steps the vehicle is able to achieve) N
(     * @throws Exception vehicle can move one step or more, depends on its behav) N
(ior) N
(     *                   if it moves two steps, should check if this movement is) N
( available) N
(     *                   if not it checks if one step is available) N
(     *                   if not vehicle stops) N
(     */) N
(Vehicle.java) (Page 6/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (77/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (7) 78
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(public) K
( ) p
(int) k
( moveVehicle\() p
(int) k
( step\) ) p
(throws) K
( Exception {) p n
() N
(        ) S
(int) k
( curCell = this.getCurrentCell\(\);) p n
() N
(        ) S
(while) K
( \(step > 0\) {) p n
(            ) S
(if) K
( \(curCell + step >= this.currentLane.getLength\(\) || !this.currentL) p n
(ane.isCellEmpty\(curCell + step\)\) {) N
(                step--;) N
(            } ) S
(else) K n
(                ) p
(break) K
(;) p n
(        }) N
() N
(            currentLane.setCell\() S
(null) k
(, curCell\);) p n
(            curCell += step;) N
(            this.setCurrentCell\(curCell, this.getCurrentLane\(\)\);) N
(            currentLane.setCell\() S
(this) k
(, curCell\);) p n
() N
(            ) S
(return) K
( step;) p n
(        }) N
() N
() N
() N
(    ) S
(/**) C n
(     * to make a vehicle reads a traffic light) N
(     * use intersection to read the traffic light, each intersection has up to f) N
(our traffic light) N
(     * depends on the direction of a lane which vehicle is in, a vehicle can rea) N
(ds the corresponding traffic light) N
(     * if the traffic light is green the vehicle state set to moving) N
(     * if the traffic light is red the vehicle state set to still) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( readTrafficLight\(\)) p
(throws) K
( Exception {) p n
(        ) S
(if) K
( \(this.getCurrentCell\(\) == this.currentLane.getLength\(\) - 1\) {) p n
(            TrafficLight light;) N
() N
(            ) S
(// traffic lights are disabled, allow cars to move through lights) c n
(            ) p
(if) K
(\(!TrafficLightController.getInstance\(\).areLightsEnabled\(\)\) {) p n
(                this.setVehicleState\(1\);) N
(                ) S
(return) K
(;) p n
(            }) N
() N
(            ) S
(if) K
( \(this.getCurrentLane\(\).getEndIntersection\(\) != ) p
(null) k
(\) {) p n
(                ) S
(switch) K
( \(this.getCurrentLane\(\).getMovingDirection\(\)\) {) p n
(                    ) S
(case) K
( NORTH:) p n
(                        light = this.getCurrentLane\(\).getEndIntersection\(\).getSo) N
(uthTrafficLight\(\);) N
(                        ) S
(break) K
(;) p n
(                    ) S
(case) K
( SOUTH:) p n
(                        light = this.getCurrentLane\(\).getEndIntersection\(\).getNo) N
(rthTrafficLight\(\);) N
(                        ) S
(break) K
(;) p n
(                    ) S
(case) K
( EAST:) p n
(                        light = this.getCurrentLane\(\).getEndIntersection\(\).getWe) N
(stTrafficLight\(\);) N
(                        ) S
(break) K
(;) p n
(                    ) S
(case) K
( WEST:) p n
(                        light = this.getCurrentLane\(\).getEndIntersection\(\).getEa) N
(stTrafficLight\(\);) N
(Vehicle.java) (Page 7/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (78/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (8) 79
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                        ) p
(break) K
(;) p n
(                    ) S
(default) K
(: ) p
(// ERROR case) c n
(                        light = ) p
(null) k
(;) p n
(                        ) S
(throw) K
( ) p
(new) K
( Exception\(") p
(Error Direction!) str
("\);) p n
(                        ) S
(// break;) c n
(                }) p n
() N
(                ) S
(if) K
( \(this.getVehiclePriority\(\) > 1 && light != ) p
(null) k
(\) {) p n
(                    ) S
(if) K
( \(light.getState\(\) == LightColour.RED\) {) p n
(                        this.vehicleState = 1;) N
() N
(                    }) N
(                } ) S
(else) K
( ) p
(if) K
( \(light != ) p
(null) k
(\) {) p n
(                    ) S
(if) K
( \(light.getState\(\) == LightColour.RED\)) p n
(                        this.vehicleState = 0;) N
(                    ) S
(else) K n
(                        this.vehicleState = 1;) p n
(                }) N
(                ) S
(else) K n
(                {) p n
(                    ) S
(//move because there isn't any traffic light) c n
(                    this.setVehicleState\(1\);) p n
() N
(                }) N
(            } ) S
(else) K
( {) p n
(                ) S
(int) k
( curCell = this.getCurrentCell\(\);) p n
(                currentLane.setCell\() S
(null) k
(, curCell\);) p n
(                this.setVehicleState\(3\);) N
(                this.unsubscribe\(\);) N
(                VehicleController.removeFromListAndMap\() S
(this) k
(\);) p n
(            }) N
() N
() N
(        } ) S
(else) K n
(            ) p
(throw) K
( ) p
(new) K
( Exception\(") p
(Reading traffic light when not at end of lane) str
("\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * in each intersection this method gives vehicles options of available lane) N
(s that vehicles can move to) N
(     * this method checks three conditions) N
(     * 1. if the lane is exist) N
(     * 2. if there is a space for a new vehicle) N
(     * 3. if the direction of a lane is legal for the vehicle) N
(     * if  a lane obtains these conditions, then it is added to laneOptions Arra) N
(y List) N
(     * @return  the options of lanes that vehicle can move to in type of Array L) N
(ist of lanes) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ArrayList<Lane> getLaneOptions\(\) ) p
(throws) K
( Exception {) p n
(        laneOptions.clear\(\);) N
() N
(        ) S
(if) K
(\(this.currentLane.getEndIntersection\(\)!=) p
(null) k
(\) {) p n
(            ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getEastRoad\(\) != ) p
(null) k
(\) &&) p n
(                    \(this.currentLane.getMovingDirection\(\) != MapDirection.WEST\)) N
(\) {) N
(                ) S
(for) K
( \() p
(int) k
( i = 0; i < this.currentLane.getEndIntersection\(\).getEas) p n
(tRoad\(\).getNumberLanes\(\); i++\) {) N
(Vehicle.java) (Page 8/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (79/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (9) 80
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                    ) p
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getEastRoad\(\).get) p n
(LaneAtIndex\(i\).getMovingDirection\(\) == MapDirection.EAST\)) N
(                            && \(this.currentLane.getEndIntersection\(\).getEastRoa) N
(d\(\).getLaneAtIndex\(i\).getState\(\) == 1\)\) {) N
(                        laneOptions.add\(this.currentLane.getEndIntersection\(\).ge) N
(tEastRoad\(\).getLaneAtIndex\(i\)\);) N
(                    }) N
(                }) N
(            }) N
() N
(            ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getSouthRoad\(\) != ) p
(null) k
(\) &) p n
(&) N
(                    \(this.currentLane.getMovingDirection\(\) != MapDirection.NORTH) N
(\)\) {) N
(                ) S
(for) K
( \() p
(int) k
( i = 0; i < this.currentLane.getEndIntersection\(\).getSou) p n
(thRoad\(\).getNumberLanes\(\); i++\) {) N
(                    ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getSouthRoad\(\).ge) p n
(tLaneAtIndex\(i\).getMovingDirection\(\) == MapDirection.SOUTH\)) N
(                            && \(this.currentLane.getEndIntersection\(\).getSouthRo) N
(ad\(\).getLaneAtIndex\(i\).getState\(\) == 1\)\) {) N
(                        laneOptions.add\(this.currentLane.getEndIntersection\(\).ge) N
(tSouthRoad\(\).getLaneAtIndex\(i\)\);) N
(                    }) N
(                }) N
(            }) N
() N
(            ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getNorthRoad\(\) != ) p
(null) k
(\) &) p n
(&) N
(                    \(this.currentLane.getMovingDirection\(\) != MapDirection.SOUTH) N
(\)\) {) N
(                ) S
(for) K
( \() p
(int) k
( i = 0; i < this.currentLane.getEndIntersection\(\).getNor) p n
(thRoad\(\).getNumberLanes\(\); i++\) {) N
(                    ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getNorthRoad\(\).ge) p n
(tLaneAtIndex\(i\).getMovingDirection\(\) == MapDirection.NORTH\)) N
(                            && \(this.currentLane.getEndIntersection\(\).getNorthRo) N
(ad\(\).getLaneAtIndex\(i\).getState\(\) == 1\)\) {) N
(                        laneOptions.add\(this.currentLane.getEndIntersection\(\).ge) N
(tNorthRoad\(\).getLaneAtIndex\(i\)\);) N
(                    }) N
(                }) N
(            }) N
() N
(            ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getWestRoad\(\) != ) p
(null) k
(\) &&) p n
(                    \(this.currentLane.getMovingDirection\(\) != MapDirection.EAST\)) N
(\) {) N
(                ) S
(for) K
( \() p
(int) k
( i = 0; i < this.currentLane.getEndIntersection\(\).getWes) p n
(tRoad\(\).getNumberLanes\(\); i++\) {) N
(                    ) S
(if) K
( \(\(this.currentLane.getEndIntersection\(\).getWestRoad\(\).get) p n
(LaneAtIndex\(i\).getMovingDirection\(\) == MapDirection.WEST\)) N
(                            && \(this.currentLane.getEndIntersection\(\).getWestRoa) N
(d\(\).getLaneAtIndex\(i\).getState\(\) == 1\)\) {) N
(                        laneOptions.add\(this.currentLane.getEndIntersection\(\).ge) N
(tWestRoad\(\).getLaneAtIndex\(i\)\);) N
(                    }) N
(                }) N
(            }) N
() N
(            ) S
(return) K
( laneOptions;) p n
(        }) N
(Vehicle.java) (Page 9/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (80/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (10) 81
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        ) S
(return) K
( ) p
(null) k
(;) p n
(    }) N
() N
() N
() N
() N
() N
(    ) S
(/**) C n
(     * Chooses lane randomly from lanes options) N
(     * @return a random lane in type of Lane) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( Lane chooseLane\(\) ) p
(throws) K
( Exception {) p n
(        ) S
(int) k
( num = 0;) p n
() N
() N
(        ) S
(if) K
(\(this.getLaneOptions\(\)!=) p
(null) k
(\) {) p n
(            num = this.getLaneOptions\(\).size\(\);) N
(        }) N
() N
(        ) S
(if) K
( \(num > 0\) {) p n
(            randomDirection = ) S
(new) K
( Random\(\);) p n
(            ) S
(int) k
( size = randomDirection.nextInt\(this.getLaneOptions\(\).size\(\)\);) p n
(            l= this.getLaneOptions\(\).get\(size\);) N
(            ) S
(return) K
( l;) p n
(        }) N
() N
(        ) S
(return) K
( ) p
(null) k
(;) p n
(    }) N
() N
() N
(    ) S
(/**) C n
(     * there are four condition for vehicle to turn:) N
(     * 1. if the lane is exist and) N
(     * 2. the vehicle is at the last cell of the lane) N
(     * 3. the first cell is empty) N
(     * 4. the vehicle priority to turn is 1) N
(     * if these conditions are obtained vehicle turn) N
(     * otherwise vehicle stops) N
(     * @param l a random lane to move to in type of Lane) N
(     * @return integer representation of booleans) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( vehicleTurn\(Lane l\) ) p
(throws) K
( Exception {) p n
(        Lane oldLane = this.currentLane;) N
() N
() N
(            ) S
(//validate if its end of lane) c n
(            ) p
(if) K
( \(\(\(l != ) p
(null) k
(\) && \(this.getCurrentCell\(\) == this.currentLane.getLe) p n
(ngth\(\) -1\) && \(l.isCellEmpty\(0\)\) && this.getVehiclePriorityToTurn\(\)==1\) ||) N
(                    \(l != ) S
(null) k
( && this.getCurrentCell\(\) == this.currentLane.getL) p n
(ength\(\)-1 && l.isCellEmpty\(0\) && !TrafficLightController.getInstance\(\).areLights) N
(Enabled\(\)\)\)) N
(                {) N
(                    oldLane.setCell\() S
(null) k
(, oldLane.getLength\(\) - 1\);) p n
(                    this.setCurrentLane\(l\);) N
(                    this.setCurrentCell\(0, l\);) N
(                    this.getCurrentLane\(\).setCell\() S
(this) k
(,0\);) p n
(Vehicle.java) (Page 10/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (81/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (11) 82
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                    ) p
(return) K
( 1;) p n
(                }) N
() N
(            ) S
(else) K
( {) p n
(                this.setVehicleState\(0\);) N
(                ) S
(return) K
( 0;}) p n
() N
(    }) N
() N
() N
() N
() N
(    ) S
(/**) C n
(     * This is the method that gets called when the ticker terminates \(i.e. the ) N
(stop\(\) method was called) N
(     * on the ticker\). Left not implemented on purpose) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onCompleted\(\) {    }) p n
() N
(    ) S
(/**) C n
(     * If there's some error with the ticker and this subscriber, this method wo) N
(uld call.) N
(     * Left not implemented on purpose) N
(     * @param throwable) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onError\(Throwable throwable\) {    }) p n
() N
(    ) S
(/**) C n
(     * This is like the onTick method. This is what cars would do when the ticke) N
(r ticks.) N
(     * @param aLong this gives the current time in the system to the car \(althou) N
(gh it is probably not required\)) N
(     */) N
(    @Override) p n
(    ) S
(public) K
( ) p
(void) k
( onNext\(Long aLong\) {) p n
(//        System.out.print\("Tick! " + aLong + "     "\);) c n
(//        System.out.println\("Car: "+ this.getId\(\)+"  Location: " + this.getCurr) N
(entCoordinate\(\).getX\(\) + "," + this.getCurrentCoordinate\(\).getY\(\)\);) N
(        timesTicked++;) p n
(        ) S
(try) K
( {) p n
(            ) S
(if) K
( \(vehicleBehavior == VehicleBehavior.AVERAGE\) {) p n
(                VehicleController.moveOnTick\() S
(this) k
(,1\);) p n
(            } ) S
(else) K
( ) p
(if) K
( \(vehicleBehavior == VehicleBehavior.AGGRESSIVE\) {) p n
(                VehicleController.moveOnTick\() S
(this) k
(,2\);) p n
(            } ) S
(else) K
( ) p
(if) K
( \(vehicleBehavior == VehicleBehavior.CAUTIOUS\) {) p n
(                VehicleController.moveOnTick\() S
(this) k
(,1\);) p n
(            } ) S
(else) K n
(            {) p n
(                VehicleController.moveOnTick\() S
(this) k
(,1\); ) p
(// default behaviour) c n
(            }) p n
(        } ) S
(catch) K
(\(Exception e\) {) p n
(            e.printStackTrace\(\);) N
(        }) N
(    }) N
(}) N
() N
(Vehicle.java) (Page 11/11) (Mar 29, 16 18:01) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (82/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 83
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.mapcreation;) p n
() N
(/**) C n
( * Created by violet on 17/03/2016.) N
( */) N
(public) K
( enum ComponentType {) p n
(    INTERSECTION,) N
(    ROADNS,) N
(    ROADEW,) N
(    MAP_SQUARE,) N
(    GRASS,) N
(    NOTHING) N
(}) N
(ComponentType.java) (Page 1/1) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (83/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 84
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.mapcreation;) p n
() N
(import) K
( javafx.application.Platform;) p n
(import) K
( javafx.beans.value.ObservableValue;) p n
(import) K
( javafx.collections.ObservableList;) p n
(import) K
( javafx.fxml.FXMLLoader;) p n
(import) K
( javafx.geometry.Insets;) p n
(import) K
( javafx.scene.Node;) p n
(import) K
( javafx.scene.Parent;) p n
(import) K
( javafx.scene.Scene;) p n
(import) K
( javafx.scene.control.*;) p n
(import) K
( javafx.scene.effect.DropShadow;) p n
(import) K
( javafx.scene.image.Image;) p n
(import) K
( javafx.scene.image.ImageView;) p n
(import) K
( javafx.scene.input.MouseEvent;) p n
(import) K
( javafx.scene.layout.*;) p n
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.scene.text.Font;) p n
(import) K
( javafx.scene.text.FontWeight;) p n
(import) K
( javafx.stage.Stage;) p n
(import) K
( londonsw.controller.MapMakerController;) p n
(import) K
( londonsw.controller.StartUpController;) p n
(import) K
( londonsw.model.simulation.Map;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
(import) K
( londonsw.model.simulation.components.*;) p n
(import) K
( londonsw.view.simulation.MapGridGUIDecorator;) p n
() N
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.Optional;) p n
() N
() N
(@SuppressWarnings\(") S
(Duplicates) str
("\)) p n
(public) K
( ) p
(class) K
( ) p
(MapMakerScreen) L
( {) p n
() N
(    ) S
(private) K
( ) p
(int) k
( width;) p n
(    ) S
(private) K
( ) p
(int) k
( height;) p n
() N
(    ) S
(private) K
( ImageView intersectionImgView;) p n
(    ) S
(private) K
( ImageView roadNSImgView;) p n
(    ) S
(private) K
( ImageView roadEWImgView;) p n
(    ) S
(private) K
( ImageView grassImgView;) p n
() N
(    ) S
(/**) C n
(     * Creates a new MapMaker screen) N
(     * @param width the width the user chose for their map) N
(     * @param height the height the user chose for their map) N
(     */) N
(    ) p
(public) K
( MapMakerScreen\() p
(int) k
( width, ) p
(int) k
( height\) {) p n
(        this.width = width;) N
(        this.height = height;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Draws the MapMaker screen and displays it to the user) N
(     * @param primaryStage the stage to show it in) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( drawScreen\(Stage primaryStage\) ) p
(throws) K
( Exception {) p n
(        ) S
(// Create the base BorderPane for the whole window) c n
(MapMakerScreen.java) (Page 1/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (84/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 85
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        BorderPane borderPane = ) p
(new) K
( BorderPane\(\);) p n
(        borderPane.setStyle\(") S
(-fx-background-color: papayawhip) str
("\);) p n
() N
(        ) S
(// Add some instructions to the user) c n
(        String text = ") p
(Instructions:\\n) str
(" +) p n
(                ") S
(1. Click on the map component that you would like to place in the map\\n) str
(" +) p n
(                ") S
(2. Click on the place in the map where you want to place the component\\n) str
(" +) p n
(                ") S
(3. Repeat until you built the map you want!\\n) str
(" +) p n
(                ") S
(4. Hit the 'Save' button when you are done) str
(";) p n
(        Label instructions = ) S
(new) K
( Label\(text\);) p n
(        instructions.setFont\(Font.font\(") S
(Arial) str
(", FontWeight.BOLD,12\)\);) p n
(        instructions.setPadding\() S
(new) K
( Insets\(5, 5, 5, 5\)\);) p n
(        borderPane.setTop\(instructions\);) N
() N
(        ) S
(// Create the blank Map) c n
(        Pane mapPane = ) p
(new) K
( Pane\(\);) p n
(        Map map = ) S
(new) K
( Map\(width, height\);) p n
(        MapGridGUIDecorator mapGridGUIDecorator = ) S
(new) K
( MapGridGUIDecorator\(map.ge) p n
(tGrid\(\)\);) N
(        ResizeFactor rf = ResizeFactor.getSuggestedResizeFactor\(width, height\);) N
(        mapGridGUIDecorator.setResizeFactor\(rf\);) N
(        GridPane mapGridPane = mapGridGUIDecorator.drawComponents\(\);) N
(        mapGridPane.setPadding\() S
(new) K
( Insets\(0,0,5,5\)\);) p n
(        mapPane.getChildren\(\).add\(mapGridPane\);) N
(        borderPane.setCenter\(mapPane\);) N
(        MapMakerController.setCurrentFocused\(ComponentType.NOTHING\);) N
() N
(        VBox sideComponents = ) S
(new) K
( VBox\(\);) p n
() N
(        ) S
(/* Add "Components" label */) c n
(        Label componentsLabel = ) p
(new) K
( Label\(") p
(Components) str
("\);) p n
(        componentsLabel.setFont\(Font.font\(") S
(Arial) str
(",FontWeight.EXTRA_BOLD,14\)\);) p n
(        componentsLabel.setPadding\() S
(new) K
( Insets\(15,5,0,20\)\);) p n
(        sideComponents.getChildren\(\).add\(componentsLabel\);) N
() N
(        ) S
(/* Add Intersection square image */) c n
(        VBox intersectionPane = ) p
(new) K
( VBox\(\);) p n
(        Label intersectionLabel = ) S
(new) K
( Label\(") p
(Intersection) str
("\);) p n
(        intersectionLabel.setPadding\() S
(new) K
( Insets\(5,5,0,30\)\);) p n
(        intersectionLabel.setFont\(Font.font\(") S
(Arial) str
(",FontWeight.SEMI_BOLD,12\)\);) p n
(        Image intersectionImg = ) S
(new) K
( Image\(") p
(IntersectionX.png) str
(",60,60,) p
(true) k
(,) p
(false) k
(\);) p n
(        intersectionImgView = ) S
(new) K
( ImageView\(intersectionImg\);) p n
(        StackPane intersectionStackPane = ) S
(new) K
( StackPane\(intersectionImgView\);) p n
(        intersectionStackPane.setPadding\() S
(new) K
( Insets\(0,10,10,10\)\);) p n
(        intersectionPane.getChildren\(\).add\(intersectionLabel\);) N
(        intersectionPane.getChildren\(\).add\(intersectionStackPane\);) N
(        sideComponents.getChildren\(\).add\(intersectionPane\);) N
() N
(        ) S
(/* Add RoadNS square image */) c n
(        VBox roadNSPane = ) p
(new) K
( VBox\(\);) p n
(        Label roadNSLabel = ) S
(new) K
( Label\(") p
(Road \(North-South\)) str
("\);) p n
(        roadNSLabel.setPadding\() S
(new) K
( Insets\(5,5,0,15\)\);) p n
(        roadNSLabel.setFont\(Font.font\(") S
(Arial) str
(",FontWeight.SEMI_BOLD,12\)\);) p n
(        Image roadNSImg = ) S
(new) K
( Image\(") p
(RoadBackgroundNS.png) str
(",60,60,) p
(true) k
(,) p
(false) k
(\);) p n
(        roadNSImgView = ) S
(new) K
( ImageView\(roadNSImg\);) p n
(        StackPane roadNSStackPane = ) S
(new) K
( StackPane\(roadNSImgView\);) p n
(        roadNSStackPane.setPadding\() S
(new) K
( Insets\(0,10,10,10\)\);) p n
(        roadNSPane.getChildren\(\).add\(roadNSLabel\);) N
(        roadNSPane.getChildren\(\).add\(roadNSStackPane\);) N
(MapMakerScreen.java) (Page 2/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (85/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 86
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        sideComponents.getChildren\(\).add\(roadNSPane\);) p n
() N
(        ) S
(/* Add RoadEW square image */) c n
(        VBox roadEWPane = ) p
(new) K
( VBox\(\);) p n
(        Label roadEWLabel = ) S
(new) K
( Label\(") p
(Road \(East-West\)) str
("\);) p n
(        roadEWLabel.setPadding\() S
(new) K
( Insets\(5,5,0,15\)\);) p n
(        roadEWLabel.setFont\(Font.font\(") S
(Arial) str
(",FontWeight.SEMI_BOLD,12\)\);) p n
(        Image roadEWImg = ) S
(new) K
( Image\(") p
(RoadBackgroundEW.png) str
(",60,60,) p
(true) k
(,) p
(false) k
(\);) p n
(        roadEWImgView = ) S
(new) K
( ImageView\(roadEWImg\);) p n
(        StackPane roadEWStackPane = ) S
(new) K
( StackPane\(roadEWImgView\);) p n
(        roadEWStackPane.setPadding\() S
(new) K
( Insets\(0,10,10,10\)\);) p n
(        roadEWPane.getChildren\(\).add\(roadEWLabel\);) N
(        roadEWPane.getChildren\(\).add\(roadEWStackPane\);) N
(        sideComponents.getChildren\(\).add\(roadEWPane\);) N
() N
(        ) S
(/* Add Grass square image to empty out cells */) c n
(        VBox grassPane = ) p
(new) K
( VBox\(\);) p n
(        Label grassLabel = ) S
(new) K
( Label\(") p
(Grass \(clear square\)) str
("\);) p n
(        grassLabel.setPadding\() S
(new) K
( Insets\(5,5,0,15\)\);) p n
(        grassLabel.setFont\(Font.font\(") S
(Arial) str
(",FontWeight.SEMI_BOLD,12\)\);) p n
(        Image grassImg = ) S
(new) K
( Image\(") p
(Grass.png) str
(",60,60,) p
(true) k
(,) p
(false) k
(\);) p n
(        grassImgView = ) S
(new) K
( ImageView\(grassImg\);) p n
(        StackPane grassStackPane = ) S
(new) K
( StackPane\(grassImgView\);) p n
(        grassStackPane.setPadding\() S
(new) K
( Insets\(0,10,10,10\)\);) p n
(        grassPane.getChildren\(\).add\(grassLabel\);) N
(        grassPane.getChildren\(\).add\(grassStackPane\);) N
(        sideComponents.getChildren\(\).add\(grassPane\);) N
() N
(        ) S
(/* Add Save, Reset buttons */) c n
(        VBox buttonsPane = ) p
(new) K
( VBox\(\);) p n
(        buttonsPane.setPadding\() S
(new) K
( Insets\(0,0,0,10\)\);) p n
(        Label toolsLabel = ) S
(new) K
( Label\(") p
(Tools) str
("\);) p n
(        toolsLabel.setFont\(Font.font\(") S
(Arial) str
(",FontWeight.EXTRA_BOLD,14\)\);) p n
(        toolsLabel.setPadding\() S
(new) K
( Insets\(15,5,5,35\)\);) p n
(        buttonsPane.getChildren\(\).add\(toolsLabel\);) N
(        Insets padding = ) S
(new) K
( Insets\(0,0,5,0\);) p n
(        Button saveButton = ) S
(new) K
( Button\(") p
(Save Map) str
("\);) p n
(        StackPane saveButtonPane = ) S
(new) K
( StackPane\(saveButton\);) p n
(        saveButtonPane.setPadding\(padding\);) N
(        saveButton.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        saveButton.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\);) p n
(        buttonsPane.getChildren\(\).add\(saveButtonPane\);) N
(        Button resetButton = ) S
(new) K
( Button\(") p
(Reset Map) str
("\);) p n
(        resetButton.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        resetButton.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\);) p n
(        StackPane resetButtonPane = ) S
(new) K
( StackPane\(resetButton\);) p n
(        resetButtonPane.setPadding\(padding\);) N
(        buttonsPane.getChildren\(\).add\(resetButtonPane\);) N
(        Button backButton = ) S
(new) K
( Button\(") p
(Go Back) str
("\);) p n
(        backButton.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        backButton.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\);) p n
(        StackPane backButtonPane = ) S
(new) K
( StackPane\(backButton\);) p n
(        backButtonPane.setPadding\(padding\);) N
(        buttonsPane.getChildren\(\).add\(backButtonPane\);) N
() N
(        sideComponents.getChildren\(\).add\(buttonsPane\);) N
() N
(        Ticker.start\(\);) N
() N
(MapMakerScreen.java) (Page 3/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (86/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 87
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(/* Add click processing for Map grid squares */) c n
(        ) p
(for) K
(\() p
(int) k
( i = 0; i < height; i++\) {) p n
(            ) S
(for) K
(\() p
(int) k
( j = 0; j < width; j++\) {) p n
(                Node current = getNodeFromIndex\(i, j, mapGridPane\);) N
(                ) S
(final) K
( ) p
(int) k
( x = j;) p n
(                ) S
(final) K
( ) p
(int) k
( y = i;) p n
(                current.setOnMouseClicked\(\(MouseEvent click\) -> {) N
(                    MapMakerController.setPreviousFocused\(MapMakerController.get) N
(CurrentFocused\(\)\);) N
(                    MapMakerController.setCurrentFocused\(ComponentType.MAP_SQUAR) N
(E\);) N
(                    current.requestFocus\(\);) N
(                }\);) N
(                current.focusedProperty\(\).addListener\(\(ObservableValue<? ) S
(extends) K
() p n
( Boolean> observable, Boolean oldValue, Boolean newValue\) -> {) N
(                    ComponentType previous = MapMakerController.getPreviousFocus) N
(ed\(\);) N
(                    ) S
(if) K
(\(previous == ComponentType.INTERSECTION\) {) p n
(                        addIntersection\(x,y,map,mapGridGUIDecorator,mapGridPane,) N
(intersectionImgView\);) N
(                    }) N
(                    ) S
(else) K
( ) p
(if) K
(\(previous == ComponentType.ROADNS\) {) p n
(                        addRoadNS\(x,y,map,mapGridGUIDecorator,mapGridPane,roadNS) N
(ImgView\);) N
(                    }) N
(                    ) S
(else) K
( ) p
(if) K
(\(previous == ComponentType.ROADEW\) {) p n
(                        addRoadEW\(x,y,map,mapGridGUIDecorator,mapGridPane,roadEW) N
(ImgView\);) N
(                    }) N
(                    ) S
(else) K
( ) p
(if) K
(\(previous == ComponentType.GRASS\) {) p n
(                        addGrass\(x,y,map,mapGridGUIDecorator,mapGridPane,grassIm) N
(gView\);) N
(                    }) N
(                }\);) N
(            }) N
(        }) N
() N
(        ) S
(/* Add intersection icon click processing */) c n
(        DropShadow ds = ) p
(new) K
( DropShadow\(15, Color.BLUE\);) p n
(        intersectionImgView.setOnMouseClicked\(click -> {) N
(            MapMakerController.setPreviousFocused\(MapMakerController.getCurrentF) N
(ocused\(\)\);) N
(            MapMakerController.setCurrentFocused\(ComponentType.INTERSECTION\);) N
(            intersectionImgView.requestFocus\(\);) N
(        }\);) N
(        intersectionImgView.focusedProperty\(\).addListener\(\(ObservableValue<? ) S
(ext) K n
(ends) S
( Boolean> observable, Boolean oldValue, Boolean newValue\) -> {) p n
(            ) S
(if) K
(\(newValue\)) p n
(                intersectionImgView.setEffect\(ds\);) N
(            ) S
(else) K n
(                intersectionImgView.setEffect\() p
(null) k
(\);) p n
(        }\);) N
() N
(        ) S
(/* Add roadNS icon click processing */) c n
(        roadNSImgView.setOnMouseClicked\(click -> {) p n
(            MapMakerController.setPreviousFocused\(MapMakerController.getCurrentF) N
(ocused\(\)\);) N
(            MapMakerController.setCurrentFocused\(ComponentType.ROADNS\);) N
(            roadNSImgView.requestFocus\(\);) N
(MapMakerScreen.java) (Page 4/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (87/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 88
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        }\);) p n
(        roadNSImgView.focusedProperty\(\).addListener\(\(ObservableValue<? ) S
(extends) K
( B) p n
(oolean> observable, Boolean oldValue, Boolean newValue\) -> {) N
(            ) S
(if) K
(\(newValue\)) p n
(                roadNSImgView.setEffect\(ds\);) N
(            ) S
(else) K n
(                roadNSImgView.setEffect\() p
(null) k
(\);) p n
(        }\);) N
() N
(        ) S
(/* Add roadEW icon click processing */) c n
(        roadEWImgView.setOnMouseClicked\(click -> {) p n
(            MapMakerController.setPreviousFocused\(MapMakerController.getCurrentF) N
(ocused\(\)\);) N
(            MapMakerController.setCurrentFocused\(ComponentType.ROADEW\);) N
(            roadEWImgView.requestFocus\(\);) N
(        }\);) N
(        roadEWImgView.focusedProperty\(\).addListener\(\(ObservableValue<? ) S
(extends) K
( B) p n
(oolean> observable, Boolean oldValue, Boolean newValue\) -> {) N
(            ) S
(if) K
(\(newValue\)) p n
(                roadEWImgView.setEffect\(ds\);) N
(            ) S
(else) K n
(                roadEWImgView.setEffect\() p
(null) k
(\);) p n
(        }\);) N
() N
(        ) S
(/* Add grass icon click processing */) c n
(        grassImgView.setOnMouseClicked\(click -> {) p n
(            MapMakerController.setPreviousFocused\(MapMakerController.getCurrentF) N
(ocused\(\)\);) N
(            MapMakerController.setCurrentFocused\(ComponentType.GRASS\);) N
(            grassImgView.requestFocus\(\);) N
(        }\);) N
(        grassImgView.focusedProperty\(\).addListener\(\(ObservableValue<? ) S
(extends) K
( Bo) p n
(olean> observable, Boolean oldValue, Boolean newValue\) -> {) N
(            ) S
(if) K
(\(newValue\)) p n
(                grassImgView.setEffect\(ds\);) N
(            ) S
(else) K n
(                grassImgView.setEffect\() p
(null) k
(\);) p n
(        }\);) N
() N
(        ) S
(/* Add save button functionality */) c n
(        saveButton.setOnMouseClicked\(click -> {) p n
(            TextInputDialog nameDialog = ) S
(new) K
( TextInputDialog\(\);) p n
(            nameDialog.setTitle\(") S
(Save Map) str
("\);) p n
(            nameDialog.setHeaderText\(") S
(Please provide a name for your map \(no spaces or special char) str n
(acters\).\\nSaved maps go into the /maps directory of your working directory.) S
("\);) p n
(            nameDialog.setContentText\(") S
(File name) str
("\);) p n
(            Button btOk = \(Button\) nameDialog.getDialogPane\(\).lookupButton\(Butto) N
(nType.OK\);) N
(            TextField textfield = nameDialog.getEditor\(\);) N
(            Platform.runLater\(\(\) -> textfield.requestFocus\(\)\);) N
(            btOk.setDisable\() S
(true) k
(\);) p n
(            textfield.textProperty\(\).addListener\(\(\(observable, oldValue, newValu) N
(e\) -> {) N
(                btOk.setDisable\(newValue.trim\(\).isEmpty\(\)\);) N
(            }\)\);) N
() N
(            Optional<String> result = nameDialog.showAndWait\(\);) N
(            result.ifPresent\(name -> {) N
(                name = name.concat\(") S
(.map) str
("\);) p n
(MapMakerScreen.java) (Page 5/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (88/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 89
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                ) p
(try) K
( {) p n
(                    Map finalMap = buildAndSaveMap\(map\);) N
(                    finalMap.saveMap\(name\);) N
(                    goBack\(primaryStage\);) N
(                } ) S
(catch) K
( \(Exception e\) {) p n
(                    e.printStackTrace\(\);) N
(                }) N
(            }\);) N
(        }\);) N
() N
(        resetButton.setOnMouseClicked\(click -> {) N
(            ) S
(for) K
(\() p
(int) k
( y = 0; y < height; y++\) {) p n
(                ) S
(for) K
(\() p
(int) k
( x = 0; x < width; x++\) {) p n
(                    Component component = map.getAtLocation\() S
(new) K
( Coordinate\(x, y\)) p n
(\);) N
(                    ) S
(if) K
(\(component ) p
(instanceof) K
( Road || component ) p
(instanceof) K
( Interse) p n
(ction\) {) N
(                        addGrass\(x,y,map,mapGridGUIDecorator,mapGridPane,grassIm) N
(gView\);) N
(                    }) N
(                }) N
(            }) N
(        }\);) N
() N
(        backButton.setOnMouseClicked\(click -> {) N
(            ) S
(try) K
( {) p n
(                goBack\(primaryStage\);) N
(            } ) S
(catch) K
( \(Exception e\) {) p n
(                e.printStackTrace\(\);) N
(            }) N
(        }\);) N
() N
(        borderPane.setRight\(sideComponents\);) N
(        Scene scene = ) S
(new) K
( Scene\(borderPane\);) p n
(        primaryStage.setScene\(scene\);) N
(        primaryStage.centerOnScreen\(\);) N
(        primaryStage.setResizable\() S
(false) k
(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Build the map that the user drew into a complete and connected map) N
(     * @param map the map that the user built) N
(     * @return a fixed map that has all roads and intersections connected) N
(     * @throws Exception) N
(     */) N
(    ) p
(private) K
( Map buildAndSaveMap\(Map map\) ) p
(throws) K
( Exception {) p n
(        System.out.println\(") S
(Building and saving map...) str
("\);) p n
(        ) S
(int) k
( width = map.getWidth\(\);) p n
(        ) S
(int) k
( height = map.getHeight\(\);) p n
(        Map fixed = ) S
(new) K
( Map\(width,height\);) p n
() N
(        ) S
(for) K
(\() p
(int) k
( y = 0; y < height; y++\) {) p n
(            ) S
(for) K
(\() p
(int) k
( x = 0; x < width; x++\) {) p n
(                Component current = map.getGrid\(\).get\(x, y\);) N
(                ) S
(if) K
(\(current ) p
(instanceof) K
( Intersection\) {) p n
(                    Coordinate location = ) S
(new) K
( Coordinate\(x, y\);) p n
(                    Intersection i = ) S
(new) K
( Intersection\(location\);) p n
(                    fixed.addIntersection\(i\);) N
(                    deleteFromOldMap\(map, location, location\);) N
(MapMakerScreen.java) (Page 6/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (89/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (7) 90
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                }) p n
(                ) S
(else) K
( ) p
(if) K
(\(current ) p
(instanceof) K
( Road\) {) p n
(                    Road road = \(Road\) current;) N
(                    Coordinate lastKnownCoord = road.getEndLocation\(\);) N
() N
(                    ) S
(if) K
(\(road.runsVertically\(\)\) {) p n
(                        ) S
(if) K
(\(lastKnownCoord.getY\(\) != height-1\) {) p n
(                            Component next = map.getGrid\(\).get\(x,y++\);) N
(                            ) S
(while) K
(\(next != ) p
(null) k
( && next ) p
(instanceof) K
( Road\) {) p n
(                                lastKnownCoord = \(\(Road\) next\).getEndLocation\(\);) N
(                                ) S
(if) K
(\(y == height\) ) p
(break) K
(;) p n
(                                next = map.getGrid\(\).get\(x, y++\);) N
(                            }) N
(                            y = road.getStartLocation\(\).getY\(\); ) S
(// go back to th) c n
(e row we started at) N
(                        }) p n
(                        Coordinate start = road.getStartLocation\(\);) N
(                        Coordinate end = lastKnownCoord;) N
(                        Road newRoad = ) S
(new) K
( Road\(start, end\);) p n
(                        newRoad.addLane\() S
(new) K
( Lane\(end, start, MapDirection.NORTH\)) p n
(\);) N
(                        newRoad.addLane\() S
(new) K
( Lane\(start, end, MapDirection.SOUTH\)) p n
(\);) N
(                        fixed.addRoad\(newRoad\);) N
(                        deleteFromOldMap\(map, start, end\);) N
(                    }) N
(                    ) S
(else) K
( {) p n
(                        ) S
(if) K
(\(lastKnownCoord.getX\(\) != width-1\) {) p n
(                            Component next = map.getGrid\(\).get\(x++, y\);) N
(                            ) S
(while) K
( \(next != ) p
(null) k
( && next ) p
(instanceof) K
( Road\) {) p n
(                                lastKnownCoord = \(\(Road\) next\).getEndLocation\(\);) N
(                                ) S
(if) K
(\(x == width\) ) p
(break) K
(;) p n
(                                next = map.getGrid\(\).get\(x++, y\);) N
(                            }) N
(                            x = x - 2; ) S
(// we overshot by 1, so go back, and loop) c n
( will increment, so go back another) N
(                        }) p n
(                        Coordinate start = road.getStartLocation\(\);) N
(                        Coordinate end = lastKnownCoord;) N
(                        Road newRoad = ) S
(new) K
( Road\(start, end\);) p n
(                        newRoad.addLane\() S
(new) K
( Lane\(start, end, MapDirection.EAST\)\)) p n
(;) N
(                        newRoad.addLane\() S
(new) K
( Lane\(end, start, MapDirection.WEST\)\)) p n
(;) N
(                        fixed.addRoad\(newRoad\);) N
(                        deleteFromOldMap\(map, start, end\);) N
(                    }) N
(                }) N
(            }) N
(        }) N
() N
(        assignIntersectionsToRoads\(fixed\);) N
(        ) S
(return) K
( fixed;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the Node at a given location in the GridPane) N
(     * @param row the row \(y-coordinate\) where to get the Node) N
(     * @param column the column \(x-coordinate\) where to get the Node) N
(MapMakerScreen.java) (Page 7/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (90/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (8) 91
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * @param gridPane the GridPane to get a Node from) C n
(     * @return the Node at that given location from the GridPane) N
(     */) N
(    ) p
(private) K
( Node getNodeFromIndex\() p
(int) k
( row, ) p
(int) k
( column, GridPane gridPane\) {) p n
(        Node result = ) S
(null) k
(;) p n
(        ObservableList<Node> childrens = gridPane.getChildren\(\);) N
(        ) S
(for) K
(\(Node node : childrens\) {) p n
(            ) S
(if) K
(\(gridPane.getRowIndex\(node\) == row && gridPane.getColumnIndex\(node) p n
(\) == column\) {) N
(                result = node;) N
(                ) S
(break) K
(;) p n
(            }) N
(        }) N
(        ) S
(return) K
( result;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Adds an intersection to the map where the user clicks) N
(     *) N
(     * @param x the x coordinate where to add the intersection) N
(     * @param y the y coordinate where to add the intersection) N
(     * @param map the map to add the intersection to) N
(     * @param mapGridGUIDecorator the GUI decorator associated with this map) N
(     * @param mapGridPane the gridPane that would need to be updated with the ne) N
(w view) N
(     * @param imgView the associated image to place in the x,y cell) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( addIntersection\() p
(int) k
( x, ) p
(int) k
( y, Map map, MapGridGUIDecorator mapG) p n
(ridGUIDecorator, GridPane mapGridPane, ImageView imgView\) {) N
(        Coordinate coord = ) S
(new) K
( Coordinate\(x,y\);) p n
(        Intersection intersection = ) S
(new) K
( Intersection\(coord\);) p n
(        map.addIntersection\(intersection\);) N
(        StackPane sp = mapGridGUIDecorator.redrawCell\(x,y,mapGridPane\);) N
() N
(        sp.setOnMouseClicked\(click -> {) N
(            ComponentType currentFocused = MapMakerController.getCurrentFocused\() N
(\);) N
(            ) S
(if) K
(\(currentFocused == ComponentType.ROADNS\) {) p n
(                addRoadNS\(x,y,map,mapGridGUIDecorator,mapGridPane,roadNSImgView\)) N
(;) N
(            } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.ROADEW\) {) p n
(                addRoadEW\(x,y,map,mapGridGUIDecorator,mapGridPane,roadEWImgView\)) N
(;) N
(            } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.GRASS\) {) p n
(                addGrass\(x,y,map,mapGridGUIDecorator,mapGridPane,grassImgView\);) N
(            }) N
(        }\);) N
() N
(        ) S
(// put focus back on Intersection) c n
(        MapMakerController.setPreviousFocused\(MapMakerController.getCurrentFocus) p n
(ed\(\)\);) N
(        MapMakerController.setCurrentFocused\(ComponentType.INTERSECTION\);) N
(        imgView.requestFocus\(\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a section of road with 2 lanes that travels in the directions north ) N
(and south) N
(     *) N
(MapMakerScreen.java) (Page 8/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (91/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (9) 92
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * @param x the x coordinate where to add the road) C n
(     * @param y the y coordinate where to add the road) N
(     * @param map the map to add the road to) N
(     * @param mapGridGUIDecorator the GUI decorator associated with this map) N
(     * @param mapGridPane the gridPane that would need to be updated with the ne) N
(w view) N
(     * @param imgView the associated image to place in the x,y cell) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( addRoadNS\() p
(int) k
( x, ) p
(int) k
( y, Map map, MapGridGUIDecorator mapGridGUI) p n
(Decorator, GridPane mapGridPane, ImageView imgView\) {) N
(        Coordinate coord = ) S
(new) K
( Coordinate\(x,y\);) p n
(        Road road = ) S
(new) K
( Road\(coord,coord\);) p n
(        ) S
(try) K
( {) p n
(            road.addLane\() S
(new) K
( Lane\(coord,coord,MapDirection.NORTH\)\);) p n
(            road.addLane\() S
(new) K
( Lane\(coord,coord,MapDirection.SOUTH\)\);) p n
(            map.addRoad\(road\);) N
(            StackPane sp = mapGridGUIDecorator.redrawCell\(x,y,mapGridPane\);) N
() N
(            sp.setOnMouseClicked\(click -> {) N
(                ComponentType currentFocused = MapMakerController.getCurrentFocu) N
(sed\(\);) N
(                ) S
(if) K
(\(currentFocused == ComponentType.INTERSECTION\) {) p n
(                    addIntersection\(x,y,map,mapGridGUIDecorator,mapGridPane,inte) N
(rsectionImgView\);) N
(                } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.GRASS\) {) p n
(                    addGrass\(x,y,map,mapGridGUIDecorator,mapGridPane,grassImgVie) N
(w\);) N
(                } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.ROADEW\) {) p n
(                    addRoadEW\(x,y,map,mapGridGUIDecorator,mapGridPane,roadEWImgV) N
(iew\);) N
(                }) N
(            }\);) N
() N
(            ) S
(// put focus back on RoadNS) c n
(            MapMakerController.setPreviousFocused\(MapMakerController.getCurrentF) p n
(ocused\(\)\);) N
(            MapMakerController.setCurrentFocused\(ComponentType.ROADNS\);) N
(            imgView.requestFocus\(\);) N
(        } ) S
(catch) K
( \(Exception e\) {) p n
(            e.printStackTrace\(\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a section of road with 2 lanes that travels in the directions east a) N
(nd west) N
(     *) N
(     * @param x the x coordinate where to add the road) N
(     * @param y the y coordinate where to add the road) N
(     * @param map the map to add the road to) N
(     * @param mapGridGUIDecorator the GUI decorator associated with this map) N
(     * @param mapGridPane the gridPane that would need to be updated with the ne) N
(w view) N
(     * @param imgView the associated image to place in the x,y cell) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( addRoadEW\() p
(int) k
( x, ) p
(int) k
( y, Map map, MapGridGUIDecorator mapGridGUI) p n
(Decorator, GridPane mapGridPane, ImageView imgView\) {) N
(        Coordinate coord = ) S
(new) K
( Coordinate\(x,y\);) p n
(        Road road = ) S
(new) K
( Road\(coord,coord\);) p n
(MapMakerScreen.java) (Page 9/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (92/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (10) 93
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(try) K
( {) p n
(            road.addLane\() S
(new) K
( Lane\(coord,coord,MapDirection.EAST\)\);) p n
(            road.addLane\() S
(new) K
( Lane\(coord,coord,MapDirection.WEST\)\);) p n
(            map.addRoad\(road\);) N
(            StackPane sp = mapGridGUIDecorator.redrawCell\(x,y,mapGridPane\);) N
() N
(            sp.setOnMouseClicked\(click -> {) N
(                ComponentType currentFocused = MapMakerController.getCurrentFocu) N
(sed\(\);) N
(                ) S
(if) K
(\(currentFocused == ComponentType.INTERSECTION\) {) p n
(                    addIntersection\(x,y,map,mapGridGUIDecorator,mapGridPane,inte) N
(rsectionImgView\);) N
(                } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.ROADNS\) {) p n
(                    addRoadNS\(x,y,map,mapGridGUIDecorator,mapGridPane,roadNSImgV) N
(iew\);) N
(                } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.GRASS\) {) p n
(                    addGrass\(x,y,map,mapGridGUIDecorator,mapGridPane,grassImgVie) N
(w\);) N
(                }) N
(            }\);) N
() N
(            ) S
(// put focus back on RoadEW) c n
(            MapMakerController.setPreviousFocused\(MapMakerController.getCurrentF) p n
(ocused\(\)\);) N
(            MapMakerController.setCurrentFocused\(ComponentType.ROADEW\);) N
(            imgView.requestFocus\(\);) N
(        } ) S
(catch) K
( \(Exception e\) {) p n
(            e.printStackTrace\(\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Adds a "grass" component to the map, aka a null component) N
(     * Useful if the user wants to delete a map component they placed in the map) N
(     *) N
(     * @param x the x coordinate where to add the grass) N
(     * @param y the y coordinate where to add the grass) N
(     * @param map the map to add the grass to) N
(     * @param mapGridGUIDecorator the GUI decorator associated with this map) N
(     * @param mapGridPane the gridPane that would need to be updated with the ne) N
(w view) N
(     * @param imgView the associated image to place in the x,y cell) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( addGrass\() p
(int) k
( x, ) p
(int) k
( y, Map map, MapGridGUIDecorator mapGridGUID) p n
(ecorator, GridPane mapGridPane, ImageView imgView\) {) N
(        Coordinate coord = ) S
(new) K
( Coordinate\(x,y\);) p n
(        map.clearCell\(coord\);) N
() N
(        StackPane sp = mapGridGUIDecorator.redrawCell\(x,y,mapGridPane\);) N
() N
(        sp.setOnMouseClicked\(click -> {) N
(            ComponentType currentFocused = MapMakerController.getCurrentFocused\() N
(\);) N
(            ) S
(if) K
(\(currentFocused == ComponentType.INTERSECTION\) {) p n
(                addIntersection\(x,y,map,mapGridGUIDecorator,mapGridPane,intersec) N
(tionImgView\);) N
(            } ) S
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.ROADNS\) {) p n
(                addRoadNS\(x,y,map,mapGridGUIDecorator,mapGridPane,roadNSImgView\)) N
(;) N
(MapMakerScreen.java) (Page 10/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (93/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (11) 94
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            } ) p
(else) K
( ) p
(if) K
(\(currentFocused == ComponentType.ROADEW\) {) p n
(                addRoadEW\(x,y,map,mapGridGUIDecorator,mapGridPane,roadEWImgView\)) N
(;) N
(            }) N
(        }\);) N
() N
(        ) S
(// put focus back on Grass) c n
(        MapMakerController.setPreviousFocused\(MapMakerController.getCurrentFocus) p n
(ed\(\)\);) N
(        MapMakerController.setCurrentFocused\(ComponentType.GRASS\);) N
(        imgView.requestFocus\(\);) N
() N
(    }) N
() N
(    ) S
(/**) C n
(     * When saving a map, we are looping through the map that was built and addi) N
(ng the fixed roads to a new map.) N
(     * To prevent adding the same bits of roads again, delete all the bits from ) N
(the already added road) N
(     *) N
(     * @param oldMap the map from which to delete some number of components) N
(     * @param start the start coordinate from where to begin deleting components) N
(     * @param end the end coordinate to which we must delete all components) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( deleteFromOldMap\(Map oldMap, Coordinate start, Coordinate end\) ) p n
({) N
(        ) S
(int) k
( startX = start.getX\(\);) p n
(        ) S
(int) k
( startY = start.getY\(\);) p n
(        ) S
(int) k
( endX = end.getX\(\);) p n
(        ) S
(int) k
( endY = end.getY\(\);) p n
() N
(        ) S
(if) K
(\(startY == endY\) { ) p
(// horizontal) c n
(            ) p
(for) K
(\() p
(int) k
( i = startX; i <= endX; i++\) {) p n
(                oldMap.clearCell\() S
(new) K
( Coordinate\(i, startY\)\);) p n
(            }) N
(        } ) S
(else) K
( { ) p
(// vertical) c n
(            ) p
(for) K
(\() p
(int) k
( i = startY; i <= endY; i++\) {) p n
(                oldMap.clearCell\() S
(new) K
( Coordinate\(startX, i\)\);) p n
(            }) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Takes a map with disconnected Roads and Intersections and connects them. ) N
(This is like connecting nodes \(intersections\) to) N
(     * edges \(roads\) in a directed graph.) N
(     * @param fixed the map where components need to be connected) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( assignIntersectionsToRoads\(Map fixed\) ) p
(throws) K
( Exception {) p n
(        ArrayList<Intersection> intersections = fixed.getIntersections\(\);) N
(        ) S
(for) K
(\() p
(int) k
( i = 0; i < intersections.size\(\); i++\) {) p n
(            Intersection current = intersections.get\(i\);) N
(            Coordinate coord = current.getLocation\(\);) N
(            ) S
(int) k
( x = coord.getX\(\);) p n
(            ) S
(int) k
( y = coord.getY\(\);) p n
(            Coordinate north = \(y-1 >= 0\) ? ) S
(new) K
( Coordinate\(x, y-1\) : ) p
(null) k
(;) p n
(            Coordinate south = \(y+1 < height\) ? ) S
(new) K
( Coordinate\(x, y + 1\) : ) p
(null) k
(;) p n
(            Coordinate east = \(x + 1 < width\) ? ) S
(new) K
( Coordinate\(x + 1, y\) : ) p
(null) k
(;) p n
(            Coordinate west = \(x - 1 >= 0\) ? ) S
(new) K
( Coordinate\(x - 1, y\) : ) p
(null) k
(;) p n
(MapMakerScreen.java) (Page 11/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (94/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (12) 95
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(            ) S
(if) K
(\(north != ) p
(null) k
(\) {) p n
(                Component component = fixed.getAtLocation\(north\);) N
(                ) S
(if) K
(\(component ) p
(instanceof) K
( Road\) {) p n
(                    current.setNorthRoad\(\(Road\) component\);) N
(                }) N
(            }) N
() N
(            ) S
(if) K
(\(south != ) p
(null) k
(\) {) p n
(                Component component = fixed.getAtLocation\(south\);) N
(                ) S
(if) K
(\(component ) p
(instanceof) K
( Road\) {) p n
(                    current.setSouthRoad\(\(Road\) component\);) N
(                }) N
(            }) N
() N
(            ) S
(if) K
(\(east != ) p
(null) k
(\) {) p n
(                Component component = fixed.getAtLocation\(east\);) N
(                ) S
(if) K
(\(component ) p
(instanceof) K
( Road\) {) p n
(                    current.setEastRoad\(\(Road\) component\);) N
(                }) N
(            }) N
() N
(            ) S
(if) K
(\(west != ) p
(null) k
(\) {) p n
(                Component component = fixed.getAtLocation\(west\);) N
(                ) S
(if) K
(\(component ) p
(instanceof) K
( Road\) {) p n
(                    current.setWestRoad\(\(Road\) component\);) N
(                }) N
(            }) N
() N
(            current.setDefaultTrafficLightsForRoads\(\);) N
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Goes back to the previous screen \(Choose mode screen\)) N
(     * @param stage the stage which will display the screen) N
(     * @throws Exception) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( goBack\(Stage stage\) ) p
(throws) K
( Exception {) p n
(        StartUpController.getInstance\(\).goToChooseModeScreen\(stage\);) N
(        stage.centerOnScreen\(\);) N
(        stage.setResizable\() S
(false) k
(\);) p n
(    }) N
() N
(}) N
(MapMakerScreen.java) (Page 12/12) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (95/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 96
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.scene.Group;) p n
(import) K
( javafx.scene.Scene;) p n
(import) K
( javafx.scene.image.Image;) p n
(import) K
( javafx.scene.image.ImageView;) p n
(import) K
( javafx.scene.layout.Pane;) p n
(import) K
( javafx.scene.layout.StackPane;) p n
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.stage.Stage;) p n
(import) K
( londonsw.controller.IntersectionController;) p n
(import) K
( londonsw.model.simulation.components.Intersection;) p n
(import) K
( londonsw.model.simulation.components.ResizeFactor;) p n
() N
(import) K
( java.io.Serializable;) p n
() N
(/**) C n
( * Associates an Intersection GUI with an instance of an Intersection. Each has ) N
(up to 4) N
( * TrafficLightDecorators that live inside this GUI. The Intersection does not h) N
(ave any) N
( * explicit circles itself, it relies on the circles of each TrafficLightDecorat) N
(or that) N
( * is associated with each TrafficLight in the Intersection instance.) N
( *) N
( * Exactly one IntersectionDecorator is created for exactly one Intersection.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(IntersectionDecorator) L
( ) p
(implements) K
( Serializable {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = -197785071328536445L;) p n
(    ) S
(private) K
( Intersection intersection;) p n
(    ) S
(private) K
( ) p
(int) k
( width = 100;) p n
(    ) S
(private) K
( ) p
(int) k
( height = 100;) p n
() N
(    ) S
(private) K
( TrafficLightDecorator northLight;) p n
(    ) S
(private) K
( TrafficLightDecorator eastLight;) p n
(    ) S
(private) K
( TrafficLightDecorator southLight;) p n
(    ) S
(private) K
( TrafficLightDecorator westLight;) p n
() N
(    ) S
(private) K
( ResizeFactor resizeFactor;) p n
() N
(    ) S
(private) K
( Group root;) p n
(    ) S
(private) K
( Scene scene;) p n
() N
(    ) S
(/**) C n
(     * Creates a GUI for that specific intersection. It creates TrafficLightDeco) N
(rators for all) N
(     * TrafficLights that are in this intersection. It draws and displays them i) N
(n a Scene specified) N
(     * by the global variables of width and height.) N
(     * @param intersection an instance of an Intersection to associate this deco) N
(rator) N
(     */) N
(    ) p
(public) K
( IntersectionDecorator\(Intersection intersection\) {) p n
(        this.intersection = intersection;) N
(        IntersectionController.addIntersectionAndDecoratorPair\(intersection,) S
(this) k
() p n
(\);) N
(    }) N
() N
(IntersectionDecorator.java) (Page 1/3) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (96/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 97
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Sets the resize factor for this intersection GUI decorator) N
(     * @param rf the resize factor to set for this decorator) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setResizeFactor\(ResizeFactor rf\) {) p n
(        resizeFactor = rf;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the north traffic light decorator for this intersection to represent) N
( the north traffic light) N
(     * @param t the decorator representing the north traffic light) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setNorthTrafficLightDecorator\(TrafficLightDecorator t\) {) p n
(        northLight = t;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the west traffic light decorator for this intersection to represent ) N
(the west traffic light) N
(     * @param t the decorator representing the west traffic light) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setWestTrafficLightDecorator\(TrafficLightDecorator t\) {) p n
(        westLight = t;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the south traffic light decorator for this intersection to represent) N
( the south traffic light) N
(     * @param t the decorator representing the south traffic light) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setSouthTrafficLightDecorator\(TrafficLightDecorator t\) {) p n
(        southLight = t;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the east traffic light decorator for this intersection to represent ) N
(the east traffic light) N
(     * @param t the decorator representing the east traffic light) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setEastTrafficLightDecorator\(TrafficLightDecorator t\) {) p n
(        eastLight = t;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Draws the intersection to display it in the GUI. It initializes all Traff) N
(icLightDecorators as well, to make) N
(     * them display properly.) N
(     * @return the StackPane to represent this intersection) N
(     */) N
(    ) p
(public) K
( StackPane drawIntersection\(\) {) p n
(        StackPane stackPane = ) S
(new) K
( StackPane\(\);) p n
() N
(        String roadBackgroundPath = ") S
(IntersectionX.png) str
(";) p n
(        Image image = ) S
(new) K
( Image\(roadBackgroundPath\);) p n
(        Image im = ) S
(new) K
( Image\(roadBackgroundPath, image.getHeight\(\) * resizeFacto) p n
(r.getResizeX\(\), image.getWidth\(\) * resizeFactor.getResizeY\(\), ) S
(false) k
(, ) p
(true) k
(\);) p n
(        ImageView iv = ) S
(new) K
( ImageView\(im\);) p n
() N
(IntersectionDecorator.java) (Page 2/3) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (97/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 98
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        Pane lights = ) p
(new) K
( Pane\(\);) p n
(        ) S
(double) k
( middleCoordX = 50*resizeFactor.getResizeX\(\);) p n
(        ) S
(double) k
( middleCoordY = 50*resizeFactor.getResizeY\(\);) p n
(        ) S
(double) k
( edgeCloseX = 18*resizeFactor.getResizeX\(\);) p n
(        ) S
(double) k
( edgeCloseY = 18*resizeFactor.getResizeY\(\);) p n
(        ) S
(double) k
( edgeFarX = 82*resizeFactor.getResizeX\(\);) p n
(        ) S
(double) k
( edgeFarY = 82*resizeFactor.getResizeY\(\);) p n
(        ) S
(double) k
( radius = 15*resizeFactor.getResizeX\(\);) p n
(        ) S
(if) K
(\(intersection.getNorthTrafficLight\(\) != ) p
(null) k
(\) {) p n
(            northLight = ) S
(new) K
( TrafficLightDecorator\(intersection.getNorthTrafficL) p n
(ight\(\)\);) N
(            northLight.drawLight\(middleCoordX,edgeCloseY,radius\);) N
(            lights.getChildren\(\).add\(northLight.getCircle\(\)\);) N
(        }) N
(        ) S
(if) K
(\(intersection.getEastTrafficLight\(\) != ) p
(null) k
(\) {) p n
(            eastLight = ) S
(new) K
( TrafficLightDecorator\(intersection.getEastTrafficLig) p n
(ht\(\)\);) N
(            eastLight.drawLight\(edgeFarX,middleCoordY,radius\);) N
(            lights.getChildren\(\).add\(eastLight.getCircle\(\)\);) N
(        }) N
(        ) S
(if) K
(\(intersection.getSouthTrafficLight\(\) != ) p
(null) k
(\) {) p n
(            southLight = ) S
(new) K
( TrafficLightDecorator\(intersection.getSouthTrafficL) p n
(ight\(\)\);) N
(            southLight.drawLight\(middleCoordX,edgeFarY,radius\);) N
(            lights.getChildren\(\).add\(southLight.getCircle\(\)\);) N
(        }) N
(        ) S
(if) K
(\(intersection.getWestTrafficLight\(\) != ) p
(null) k
(\) {) p n
(            westLight = ) S
(new) K
( TrafficLightDecorator\(intersection.getWestTrafficLig) p n
(ht\(\)\);) N
(            westLight.drawLight\(edgeCloseX,middleCoordY,radius\);) N
(            lights.getChildren\(\).add\(westLight.getCircle\(\)\);) N
(        }) N
() N
(        stackPane.getChildren\(\).add\(iv\);) N
(        stackPane.getChildren\(\).add\(lights\);) N
(        ) S
(return) K
( stackPane;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * This method is only for DEBUG and TESTING! Displays the intersection in t) N
(he given stack pane) N
(     * @param stage the Stage to display this Intersection in) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( showIntersection\(Stage stage, StackPane s\) {) p n
(        root = ) S
(new) K
( Group\(\);) p n
(        scene = ) S
(new) K
( Scene\(root, width, height, Color.BEIGE\);) p n
(        root.getChildren\(\).add\(s\);) N
(        stage.setScene\(scene\);) N
(        stage.show\(\);) N
(    }) N
() N
(}) N
(IntersectionDecorator.java) (Page 3/3) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (98/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 99
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.scene.Group;) p n
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.scene.shape.Line;) p n
(import) K
( javafx.scene.shape.Polygon;) p n
(import) K
( londonsw.model.simulation.components.Lane;) p n
(import) K
( londonsw.model.simulation.components.ResizeFactor;) p n
() N
(/**) C n
( * Created by felix on 16/03/2016.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(LaneArrow) L
( ) p
(extends) K
( Polygon {) p n
() N
(    ) S
(protected) K
( Lane lane;) p n
() N
(    ) S
(public) K
( Group getGroup\(\) {) p n
(        ) S
(return) K
( group;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setGroup\(Group group\) {) p n
(        this.group = group;) N
(    }) N
() N
(    ) S
(private) K
( Group group;) p n
() N
(    ) S
(public) K
( LaneArrow\(Lane lane, Line roadLine, ResizeFactor resizeFactor\) {) p n
(        this.lane = lane;) N
() N
(        ) S
(double) k
( arrowResizeFactor = resizeFactor.getResizeX\(\) * 2.5;) p n
() N
(        this.getPoints\(\).addAll\() N
(                0.0 * arrowResizeFactor, 5.0 * arrowResizeFactor,) N
(                -5.0 * arrowResizeFactor, -5.0 * arrowResizeFactor,) N
(                5.0 * arrowResizeFactor, -5.0 * arrowResizeFactor) N
(        \);) N
() N
() N
(        roadLine.setStrokeWidth\(2 * resizeFactor.getResizeY\(\)\); ) S
(//TODO avoid har) c n
(dcode) N
() p n
(        roadLine.setStrokeWidth\(2 * resizeFactor.getResizeY\(\)\); ) S
(//TODO avoid har) c n
(dcode) N
() p n
(        ) S
(if) K
( \(lane.getState\(\) == 1\) {) p n
(            roadLine.setStroke\(Color.WHITE\);) N
(            this.setFill\(Color.WHITE\);) N
(        } ) S
(else) K
( {) p n
(            ) S
(//lane not enabled) c n
(            roadLine.setStroke\(Color.RED\);) p n
(            this.setFill\(Color.RED\);) N
(        }) N
() N
(        ) S
(double) k
( angle = 0.0;) p n
() N
(        ) S
(switch) K
( \(lane.getMovingDirection\(\)\)) p n
(        {) N
(            ) S
(case) K
( NORTH:) p n
(                angle = -90;) N
(LaneArrow.java) (Page 1/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (99/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 100
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(                this.setTranslateY\(roadLine.getStartY\(\)\);) p n
(                this.setTranslateX\(roadLine.getStartX\(\)\);) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( SOUTH:) p n
(                angle = 90;) N
(                this.setTranslateY\(roadLine.getEndY\(\)\);) N
(                this.setTranslateX\(roadLine.getEndX\(\)\);) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( EAST:) p n
(                angle = 0.0;) N
(                this.setTranslateY\(roadLine.getEndY\(\)\);) N
(                this.setTranslateX\(roadLine.getEndX\(\)\);) N
(                ) S
(break) K
(;) p n
(            ) S
(case) K
( WEST:) p n
(                angle = 180;) N
(                this.setTranslateY\(roadLine.getStartY\(\)\);) N
(                this.setTranslateX\(roadLine.getStartX\(\)\);) N
(                ) S
(break) K
(;) p n
(        }) N
() N
(        this.setRotate\(angle - 90\);) N
(        ) S
(//roadLine.setRotate\(angle - 90\);) c n
() p n
(        Group group = ) S
(new) K
( Group\(\);) p n
() N
(        group.getChildren\(\).addAll\(roadLine,) S
(this) k
(\);) p n
() N
(        ) S
(//group.setRotate\(angle - 90\);) c n
() p n
(        this.setGroup\(group\);) N
() N
(    }) N
(}) S
(LaneArrow.java) (Page 2/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (100/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 101
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.scene.image.Image;) p n
(import) K
( javafx.scene.image.ImageView;) p n
(import) K
( javafx.scene.layout.StackPane;) p n
(import) K
( londonsw.model.simulation.components.ResizeFactor;) p n
() N
(/**) C n
( * This class provides the basis for drawing map components to the GUI screen) N
( */) N
(public) K
( ) p
(class) K
( ) p
(LayoutGUI) L
( {) p n
() N
(    ) S
(private) K
( ) p
(int) k
( height;) p n
(    ) S
(private) K
( ) p
(int) k
( width;) p n
(    ) S
(private) K
( ResizeFactor resizeFactor;) p n
() N
(    ) S
(/**) C n
(     * Gets the resize factor for the GUI square) N
(     * @return the resize factor for this square) N
(     */) N
(    ) p
(public) K
( ResizeFactor getResizeFactor\(\) {) p n
(        ) S
(return) K
( resizeFactor;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the resize factor for this GUI square) N
(     * @param resizeFactor the resize factor to set for this square) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setResizeFactor\(ResizeFactor resizeFactor\) {) p n
(        this.resizeFactor = resizeFactor;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the width of this GUI square) N
(     * @param width the width to set for this GUI square) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setWidth\() p
(int) k
( width\) {) p n
(        this.width = width;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the height of this GUI square) N
(     * @param height the height to set for this GUI square) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setHeight\() p
(int) k
( height\) {) p n
(        this.height = height;) N
(    }) N
() N
(    ) S
(/**) C n
(     * This method gets called to draw a Grass square in the map, i.e. when ther) N
(e is no other map component there,) N
(     * it will look like grass) N
(     * @return the StackPane representing grass) N
(     */) N
(    ) p
(public) K
( StackPane drawGrass\(\) {) p n
(        ) S
(return) K
( drawLayout\(") p
(Grass.png) str
("\);) p n
(    }) N
() N
(    ) S
(/**) C n
(LayoutGUI.java) (Page 1/2) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (101/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 102
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * The generic function that gets called by any map component drawing functi) C n
(on. It draws the map component given) N
(     * a path to an image.) N
(     * @param path the path to the image for this GUI square) N
(     * @return the StackPane representing this GUI square, based on the provided) N
( image) N
(     */) N
(    ) p
(private) K
( StackPane drawLayout\(String path\) {) p n
(        Image image = ) S
(new) K
( Image\(path\);) p n
() N
(        Image im  = ) S
(new) K
( Image\(path,image.getWidth\(\)*this.getResizeFactor\(\).getRe) p n
(sizeX\(\),image.getHeight\(\)*this.getResizeFactor\(\).getResizeY\(\),) S
(false) k
(,) p
(false) k
(\);) p n
() N
(        ImageView iv = ) S
(new) K
( ImageView\(im\);) p n
() N
(        StackPane stackPane = ) S
(new) K
( StackPane\(\);) p n
() N
(        stackPane.getChildren\(\).add\(iv\);) N
() N
(        ) S
(return) K
( stackPane;) p n
(    }) N
(}) S
(LayoutGUI.java) (Page 2/2) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (102/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 103
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(/**) C n
( * Created by felix on 12/03/2016.) N
( */) N
() p n
(import) K
( londonsw.model.simulation.Map;) p n
(import) K
( londonsw.model.simulation.components.*;) p n
() N
(/**) C n
( * Created by felix on 12/03/2016.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(MapExamples) L
( {) p n
() N
() N
() N
(    ) S
(public) K
( ) p
(static) K
( Map drawMap1\(\) ) p
(throws) K
( Exception {) p n
(        Map map = ) S
(new) K
( Map\(15,15\);) p n
() N
(        Road r1 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,1\),) p
(new) K
( Coordinate\(10,1\)\);) p n
(        Road r2 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,10\),) p
(new) K
( Coordinate\(10,10\)\);) p n
(        Road r3 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,2\), ) p
(new) K
( Coordinate\(1,9\)\);) p n
(        Road r4 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(11,2\), ) p
(new) K
( Coordinate\(11,9\)\);) p n
(        Road rExit = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(12,1\), ) p
(new) K
( Coordinate\(12,1\)\);) p n
() N
(        Road roadMatrix[] = {r1,r2,r3,r4 , rExit};) N
() N
(        Lane laneR1L1 = ) S
(new) K
( Lane\(r1.getStartLocation\(\),r1.getEndLocation\(\), MapD) p n
(irection.EAST\);) N
(        Lane laneR1L2 = ) S
(new) K
( Lane\(r1.getStartLocation\(\),r1.getEndLocation\(\), MapD) p n
(irection.EAST\);) N
(        Lane laneR1L3 = ) S
(new) K
( Lane\(r1.getEndLocation\(\),r1.getStartLocation\(\), MapD) p n
(irection.WEST\);) N
(        Lane laneR1L4 = ) S
(new) K
( Lane\(r1.getEndLocation\(\),r1.getStartLocation\(\), MapD) p n
(irection.WEST\);) N
() N
(        Lane laneR2L1 = ) S
(new) K
( Lane\(r2.getStartLocation\(\),r2.getEndLocation\(\), MapD) p n
(irection.EAST\);) N
(        Lane laneR2L2 = ) S
(new) K
( Lane\(r2.getStartLocation\(\),r2.getEndLocation\(\), MapD) p n
(irection.EAST\);) N
(        Lane laneR2L3 = ) S
(new) K
( Lane\(r2.getEndLocation\(\),r2.getStartLocation\(\), MapD) p n
(irection.WEST\);) N
(        Lane laneR2L4 = ) S
(new) K
( Lane\(r2.getEndLocation\(\),r2.getStartLocation\(\), MapD) p n
(irection.WEST\);) N
() N
(        Lane laneR3L1 = ) S
(new) K
( Lane\(r3.getEndLocation\(\),r3.getStartLocation\(\), MapD) p n
(irection.NORTH\);) N
(        Lane laneR3L2 = ) S
(new) K
( Lane\(r3.getEndLocation\(\),r3.getStartLocation\(\), MapD) p n
(irection.NORTH\);) N
(        Lane laneR3L3 = ) S
(new) K
( Lane\(r3.getStartLocation\(\),r3.getEndLocation\(\), MapD) p n
(irection.SOUTH\);) N
(        Lane laneR3L4 = ) S
(new) K
( Lane\(r3.getStartLocation\(\),r3.getEndLocation\(\), MapD) p n
(irection.SOUTH\);) N
() N
(        Lane laneR4L1 = ) S
(new) K
( Lane\(r4.getEndLocation\(\),r4.getStartLocation\(\), MapD) p n
(irection.NORTH\);) N
(        Lane laneR4L2 = ) S
(new) K
( Lane\(r4.getEndLocation\(\),r4.getStartLocation\(\), MapD) p n
(irection.NORTH\);) N
(        Lane laneR4L3 = ) S
(new) K
( Lane\(r4.getStartLocation\(\),r4.getEndLocation\(\), MapD) p n
(MapExamples.java) (Page 1/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (103/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 104
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(irection.SOUTH\);) p n
(        Lane laneR4L4 = ) S
(new) K
( Lane\(r4.getStartLocation\(\),r4.getEndLocation\(\), MapD) p n
(irection.SOUTH\);) N
() N
(        Lane laneExitL1 = ) S
(new) K
( Lane\(rExit.getStartLocation\(\),rExit.getEndLocation) p n
(\(\),MapDirection.EAST\);) N
() N
(        r1.addLane\(laneR1L1\);) N
(        ) S
(//r1.addLane\(laneR1L2\);) c n
(        ) p
(//r1.addLane\(laneR1L3\);) c n
(        r1.addLane\(laneR1L4\);) p n
() N
(        r2.addLane\(laneR2L1\);) N
(        ) S
(//r2.addLane\(laneR2L2\);) c n
(        ) p
(//r2.addLane\(laneR2L3\);) c n
(        r2.addLane\(laneR2L4\);) p n
() N
(        r3.addLane\(laneR3L1\);) N
(        ) S
(//r3.addLane\(laneR3L2\);) c n
(        ) p
(//r3.addLane\(laneR3L3\);) c n
(        r3.addLane\(laneR3L4\);) p n
() N
(        ) S
(//laneR4L3.setState\(0\);) c n
(        ) p
(//laneR4L4.setState\(0\);) c n
() p n
(        r4.addLane\(laneR4L1\);) N
(        ) S
(//r4.addLane\(laneR4L2\);) c n
(        ) p
(//r4.addLane\(laneR4L3\);) c n
(        r4.addLane\(laneR4L4\);) p n
() N
(        rExit.addLane\(laneExitL1\);) N
() N
(        ) S
(for) K
(\() p
(int) k
( i = 0 ; i < roadMatrix.length; i++\)) p n
(            map.addRoad\(roadMatrix[i]\);) N
() N
(        Intersection i1 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,1\)\);) p n
(        i1.setEastRoad\(r1\);) N
(        i1.setSouthRoad\(r3\);) N
() N
() N
(        i1.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i2 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(11,1\)\);) p n
(        i2.setWestRoad\(r1\);) N
(        i2.setSouthRoad\(r4\);) N
(        i2.setEastRoad\(rExit\);) N
(        i2.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i3 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,10\)\);) p n
(        i3.setEastRoad\(r2\);) N
(        i3.setNorthRoad\(r3\);) N
(        i3.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i4 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(11,10\)\);) p n
() N
(        i4.setWestRoad\(r2\);) N
(        i4.setNorthRoad\(r4\);) N
(        i4.setDefaultTrafficLightsForRoads\(\);) N
() N
(MapExamples.java) (Page 2/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (104/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 105
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        map.addIntersection\(i1\);) N
(        map.addIntersection\(i2\);) N
(        map.addIntersection\(i3\);) N
(        map.addIntersection\(i4\);) N
() N
(        ) S
(return) K
(  map;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(static) K
( Map drawMap1_1\(\) ) p
(throws) K
( Exception{) p n
() N
(        Map map = ) S
(new) K
( Map\(6,6\);) p n
() N
(        Road R1 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,1\),) p
(new) K
( Coordinate\(4,1\)\);) p n
() N
(        Lane laneR1L1 = ) S
(new) K
( Lane\(R1.getStartLocation\(\),R1.getEndLocation\(\),MapDi) p n
(rection.EAST\);) N
() N
(        R1.addLane\(laneR1L1\);) N
() N
(        map.addRoad\(R1\);) N
() N
(        ) S
(return) K
( map;) p n
() N
(    }) N
() N
() N
(    ) S
(public) K
( ) p
(static) K
( Map dratMap4 \(\) ) p
(throws) K
( Exception {) p n
() N
(        Map map = ) S
(new) K
( Map\(22, 22\);) p n
() N
(        Road r04 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1, 11\), ) p
(new) K
( Coordinate\(1, 14\)\);) p n
(        Road r08 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(20, 11\), ) p
(new) K
( Coordinate\(20, 14\)\);) p n
(        Road r09 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9, 15\), ) p
(new) K
( Coordinate\(19, 15\)\);) p n
(        Road r10 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 15\), ) p
(new) K
( Coordinate\(7, 15\)\);) p n
(        Road r13 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 10\), ) p
(new) K
( Coordinate\(7, 10\)\);) p n
(        Road r14 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9, 10\), ) p
(new) K
( Coordinate\(12, 10\)\);) p n
(        Road r15 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(14, 10\), ) p
(new) K
( Coordinate\(19, 10\)\);) p n
(        Road r16 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(8, 11\), ) p
(new) K
( Coordinate\(8, 14\)\);) p n
(        Road r20 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1, 16\), ) p
(new) K
( Coordinate\(1, 19\)\);) p n
(        Road r21 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(8, 16\), ) p
(new) K
( Coordinate\(8, 19\)\);) p n
(        Road r22 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 20\), ) p
(new) K
( Coordinate\(7, 20\)\);) p n
(        Road r23 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9, 20\), ) p
(new) K
( Coordinate\(19, 20\)\);) p n
(        Road r24 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(20, 16\), ) p
(new) K
( Coordinate\(20, 19\)\);) p n
() N
(        ) S
(/*This is a one lane Map) c n
(        If you want two lanes map) N
(        comment these Lines , and uncomment The two lane code) N
(        at the bottom) N
(         */) N
() p n
(/*) c n
(        r01.addLane\(new Lane\(r01.getStartLocation\(\),r01.getEndLocation\(\),MapDire) N
(ction.EAST\)\);) N
(        r02.addLane\(new Lane \(r02.getEndLocation\(\),r02.getStartLocation\(\),MapDir) N
(ection.NORTH\)\);) N
(        r03.addLane\(new Lane\(r03.getEndLocation\(\),r03.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r04.addLane\(new Lane\(r04.getEndLocation\(\),r04.getStartLocation\(\),MapDire) N
(MapExamples.java) (Page 3/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (105/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 106
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ction.NORTH\)\);) c n
(        Lane l5 = new Lane\(r05.getStartLocation\(\),r05.getEndLocation\(\),MapDirect) N
(ion.EAST\);) N
(        //l5.setState\(0\);) N
(        r05.addLane\(l5\);) N
(        Lane l6 = new Lane\(r06.getStartLocation\(\),r06.getEndLocation\(\),MapDirect) N
(ion.EAST\);) N
(        r06.addLane\(l6\);) N
(        //l6.setState\(0\);) N
(        r07.addLane\(new Lane\(r07.getStartLocation\(\),r07.getEndLocation\(\),MapDire) N
(ction.SOUTH\)\);) N
(        r08.addLane\(new Lane\(r08.getStartLocation\(\),r08.getEndLocation\(\),MapDire) N
(ction.SOUTH\)\);) N
(        r09.addLane\(new Lane\(r09.getEndLocation\(\),r09.getStartLocation\(\),MapDire) N
(ction.WEST\)\);) N
(        r10.addLane\(new Lane\(r10.getEndLocation\(\),r10.getStartLocation\(\),MapDire) N
(ction.WEST\)\);) N
(        r11.addLane\(new Lane\(r11.getEndLocation\(\),r11.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r12.addLane\(new Lane\(r12.getStartLocation\(\),r12.getEndLocation\(\),MapDire) N
(ction.EAST\)\);) N
(        r13.addLane\(new Lane\(r13.getStartLocation\(\),r13.getEndLocation\(\),MapDire) N
(ction.EAST\)\);) N
(        r14.addLane\(new Lane\(r14.getStartLocation\(\),r14.getEndLocation\(\),MapDire) N
(ction.EAST\)\);) N
(        r15.addLane\(new Lane\(r15.getStartLocation\(\),r15.getEndLocation\(\),MapDire) N
(ction.EAST\)\);) N
(        r16.addLane\(new Lane\(r16.getEndLocation\(\),r16.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r17.addLane\(new Lane\(r17.getEndLocation\(\),r17.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r18.addLane\(new Lane\(r18.getEndLocation\(\),r18.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r19.addLane\(new Lane\(r19.getStartLocation\(\),r19.getEndLocation\(\),MapDire) N
(ction.EAST\)\);) N
(        r20.addLane\(new Lane\(r20.getEndLocation\(\),r20.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r21.addLane\(new Lane\(r21.getEndLocation\(\),r21.getStartLocation\(\),MapDire) N
(ction.NORTH\)\);) N
(        r22.addLane\(new Lane\(r22.getEndLocation\(\),r22.getStartLocation\(\),MapDire) N
(ction.WEST\)\);) N
(        r23.addLane\(new Lane\(r23.getEndLocation\(\),r23.getStartLocation\(\),MapDire) N
(ction.WEST\)\);) N
(        r24.addLane\(new Lane\(r24.getStartLocation\(\),r24.getEndLocation\(\),MapDire) N
(ction.SOUTH\)\);) N
(*/) N
() p n
(          ) S
(/*This is a two lane Map) c n
(        If you want one lanes map) N
(        comment these Lines , and uncomment The one lane code above) N
(         */) N
() p n
() N
() N
(        r04.addLane\() S
(new) K
( Lane\(r04.getEndLocation\(\), r04.getStartLocation\(\), MapDi) p n
(rection.NORTH\)\);) N
(        r08.addLane\() S
(new) K
( Lane\(r08.getEndLocation\(\), r08.getStartLocation\(\), MapDi) p n
(rection.NORTH\)\);) N
(        Lane l9=) S
(new) K
( Lane\(r09.getStartLocation\(\), r09.getEndLocation\(\), MapDirect) p n
(MapExamples.java) (Page 4/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (106/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 107
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ion.EAST\);) p n
(         l9.setState\(0\);) N
(        r09.addLane\(l9\);) N
(        r10.addLane\() S
(new) K
( Lane\(r10.getStartLocation\(\), r10.getEndLocation\(\), MapDi) p n
(rection.EAST\)\);) N
(        r13.addLane\() S
(new) K
( Lane\(r13.getStartLocation\(\), r13.getEndLocation\(\), MapDi) p n
(rection.EAST\)\);) N
(        r14.addLane\() S
(new) K
( Lane\(r14.getStartLocation\(\), r14.getEndLocation\(\), MapDi) p n
(rection.EAST\)\);) N
(        r15.addLane\() S
(new) K
( Lane\(r15.getStartLocation\(\), r15.getEndLocation\(\), MapDi) p n
(rection.EAST\)\);) N
(        Lane l16 =) S
(new) K
( Lane\(r16.getEndLocation\(\), r16.getStartLocation\(\), MapDire) p n
(ction.NORTH\);) N
(        l16.setState\(0\);) N
(        r16.addLane\(l16\);) N
(        r20.addLane\() S
(new) K
( Lane\(r20.getEndLocation\(\), r20.getStartLocation\(\), MapDi) p n
(rection.NORTH\)\);) N
(        r21.addLane\() S
(new) K
( Lane\(r21.getEndLocation\(\), r21.getStartLocation\(\), MapDi) p n
(rection.NORTH\)\);) N
(        r22.addLane\() S
(new) K
( Lane\(r22.getStartLocation\(\), r22.getEndLocation\(\), MapDi) p n
(rection.EAST\)\);) N
(        r23.addLane\() S
(new) K
( Lane\(r23.getStartLocation\(\), r23.getEndLocation\(\), MapDi) p n
(rection.EAST\)\);) N
(        r24.addLane\() S
(new) K
( Lane\(r24.getEndLocation\(\), r24.getStartLocation\(\), MapDi) p n
(rection.NORTH\)\);) N
() N
() N
(        r04.addLane\() S
(new) K
( Lane\(r04.getStartLocation\(\), r04.getEndLocation\(\), MapDi) p n
(rection.SOUTH\)\);) N
(        r08.addLane\() S
(new) K
( Lane\(r08.getStartLocation\(\), r08.getEndLocation\(\), MapDi) p n
(rection.SOUTH\)\);) N
(        r09.addLane\() S
(new) K
( Lane\(r09.getEndLocation\(\), r09.getStartLocation\(\), MapDi) p n
(rection.WEST\)\);) N
(        Lane l10=) S
(new) K
( Lane\(r10.getEndLocation\(\), r10.getStartLocation\(\), MapDirec) p n
(tion.WEST\);) N
(        l10.setState\(0\);) N
(        r10.addLane\(l10\);) N
(        r13.addLane\() S
(new) K
( Lane\(r13.getEndLocation\(\), r13.getStartLocation\(\), MapDi) p n
(rection.WEST\)\);) N
(        r14.addLane\() S
(new) K
( Lane\(r14.getEndLocation\(\), r14.getStartLocation\(\), MapDi) p n
(rection.WEST\)\);) N
(        r15.addLane\() S
(new) K
( Lane\(r15.getEndLocation\(\), r15.getStartLocation\(\), MapDi) p n
(rection.WEST\)\);) N
(        r16.addLane\() S
(new) K
( Lane\(r16.getStartLocation\(\), r16.getEndLocation\(\), MapDi) p n
(rection.SOUTH\)\);) N
(        r20.addLane\() S
(new) K
( Lane\(r20.getStartLocation\(\), r20.getEndLocation\(\), MapDi) p n
(rection.SOUTH\)\);) N
(        Lane l21=) S
(new) K
( Lane\(r21.getStartLocation\(\), r21.getEndLocation\(\), MapDirec) p n
(tion.SOUTH\);) N
(        l21.setState\(0\);) N
(        r21.addLane\(l21\);) N
(        r22.addLane\() S
(new) K
( Lane\(r22.getEndLocation\(\), r22.getStartLocation\(\), MapDi) p n
(rection.WEST\)\);) N
(        r23.addLane\() S
(new) K
( Lane\(r23.getEndLocation\(\), r23.getStartLocation\(\), MapDi) p n
(rection.WEST\)\);) N
(        r24.addLane\() S
(new) K
( Lane\(r24.getStartLocation\(\), r24.getEndLocation\(\), MapDi) p n
(rection.SOUTH\)\);) N
() N
() N
(MapExamples.java) (Page 5/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (107/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 108
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        Intersection i03 = ) p
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 10\)\);) p n
(        i03.setSouthRoad\(r04\);) N
(        i03.setEastRoad\(r13\);) N
(        ) S
(//i03.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i04 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 15\)\);) p n
(        i04.setNorthRoad\(r04\);) N
(        i04.setEastRoad\(r10\);) N
(        i04.setSouthRoad\(r20\);) N
(       ) S
(// i04.setDefaultTrafficLightsForRoads\(\);) c n
() p n
() N
(        Intersection i08 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(20, 10\)\);) p n
(        i08.setSouthRoad\(r08\);) N
(        i08.setWestRoad\(r15\);) N
(       ) S
(// i08.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i09 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(20, 15\)\);) p n
(        i09.setNorthRoad\(r08\);) N
(        i09.setWestRoad\(r09\);) N
(        i09.setSouthRoad\(r24\);) N
(        ) S
(//i09.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i10 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(8, 15\)\);) p n
(        i10.setEastRoad\(r09\);) N
(        i10.setWestRoad\(r10\);) N
(        i10.setNorthRoad\(r16\);) N
(        i10.setSouthRoad\(r21\);) N
(        i10.setDefaultTrafficLightsForRoads\(\);) N
() N
() N
(        Intersection i12 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(8, 10\)\);) p n
(        i12.setWestRoad\(r13\);) N
(        i12.setEastRoad\(r14\);) N
(        i12.setSouthRoad\(r16\);) N
(       ) S
(// i12.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i13 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(13, 10\)\);) p n
(        i13.setWestRoad\(r14\);) N
(        i13.setEastRoad\(r15\);) N
(       ) S
(// i13.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i15 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 20\)\);) p n
(        i15.setNorthRoad\(r20\);) N
(        i15.setEastRoad\(r22\);) N
(       ) S
(// i15.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i16 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(8, 20\)\);) p n
(        i16.setWestRoad\(r22\);) N
(        i16.setNorthRoad\(r21\);) N
(        i16.setEastRoad\(r23\);) N
(       ) S
(// i16.setDefaultTrafficLightsForRoads\(\);) c n
() p n
(        Intersection i17 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(20, 20\)\);) p n
(        i17.setWestRoad\(r23\);) N
(        i17.setNorthRoad\(r24\);) N
(        ) S
(//i17.setDefaultTrafficLightsForRoads\(\);) c n
() p n
() N
(MapExamples.java) (Page 6/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (108/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (7) 109
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
() N
(        map.addRoad\(r04\);) N
(        map.addRoad\(r08\);) N
(        map.addRoad\(r09\);) N
(        map.addRoad\(r10\);) N
(        map.addRoad\(r13\);) N
(        map.addRoad\(r14\);) N
(        map.addRoad\(r15\);) N
(        map.addRoad\(r16\);) N
(        map.addRoad\(r20\);) N
(        map.addRoad\(r21\);) N
(        map.addRoad\(r22\);) N
(        map.addRoad\(r23\);) N
(        map.addRoad\(r24\);) N
() N
() N
(        map.addIntersection\(i03\);) N
(        map.addIntersection\(i04\);) N
(        map.addIntersection\(i08\);) N
(        map.addIntersection\(i09\);) N
(        map.addIntersection\(i10\);) N
(        map.addIntersection\(i12\);) N
(        map.addIntersection\(i13\);) N
(        map.addIntersection\(i15\);) N
(        map.addIntersection\(i16\);) N
(        map.addIntersection\(i17\);) N
() N
(        ) S
(return) K
( map;) p n
() N
() N
(    }) N
() N
() N
(    ) S
(public) K
( ) p
(static) K
( Map drawTestMapBasic\(\) ) p
(throws) K
( Exception {) p n
() N
(        Map map = ) S
(new) K
( Map\(10, 10\);) p n
() N
(        Road r1 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 1\), ) p
(new) K
( Coordinate\(8, 1\)\);) p n
(        Road r2 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1, 2\), ) p
(new) K
( Coordinate\(1, 8\)\);) p n
(        Road r3 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9, 2\), ) p
(new) K
( Coordinate\(9, 8\)\);) p n
(        Road r4 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 9\), ) p
(new) K
( Coordinate\(8, 9\)\);) p n
() N
(        r1.addLane\() S
(new) K
( Lane\(r1.getStartLocation\(\), r1.getEndLocation\(\), MapDirec) p n
(tion.EAST\)\);) N
() N
(        r2.addLane\() S
(new) K
( Lane\(r2.getEndLocation\(\), r2.getStartLocation\(\), MapDirec) p n
(tion.NORTH\)\);) N
() N
(        r3.addLane\() S
(new) K
( Lane\(r3.getStartLocation\(\), r3.getEndLocation\(\), MapDirec) p n
(tion.SOUTH\)\);) N
() N
(        r4.addLane\() S
(new) K
( Lane\(r4.getEndLocation\(\), r4.getStartLocation\(\), MapDirec) p n
(tion.WEST\)\);) N
() N
(        map.addRoad\(r1\);) N
(        map.addRoad\(r2\);) N
(MapExamples.java) (Page 7/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (109/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (8) 110
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        map.addRoad\(r3\);) p n
(        map.addRoad\(r4\);) N
() N
(        Intersection i1 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 1\)\);) p n
(        i1.setEastRoad\(r1\);) N
(        i1.setSouthRoad\(r2\);) N
() N
(        Intersection i2 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9, 1\)\);) p n
(        i2.setWestRoad\(r1\);) N
(        i2.setSouthRoad\(r3\);) N
(        Intersection i3 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 9\)\);) p n
(        i3.setNorthRoad\(r2\);) N
(        i3.setEastRoad\(r4\);) N
(        Intersection i4 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9, 9\)\);) p n
(        i4.setNorthRoad\(r3\);) N
(        i4.setWestRoad\(r4\);) N
() N
(        map.addIntersection\(i1\);) N
(        map.addIntersection\(i2\);) N
(        map.addIntersection\(i3\);) N
(        map.addIntersection\(i4\);) N
() N
(        ) S
(return) K
( map;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(static) K
( Map drawTestMapSingleLine\(\) ) p
(throws) K
( Exception {) p n
() N
(        Map map = ) S
(new) K
( Map\(25, 25\);) p n
() N
(        Road r1 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 1\), ) p
(new) K
( Coordinate\(8, 1\)\);) p n
(        Road r2 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1, 2\), ) p
(new) K
( Coordinate\(1, 8\)\);) p n
(        Road r3 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9, 2\), ) p
(new) K
( Coordinate\(9, 8\)\);) p n
(        Road r4 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2, 9\), ) p
(new) K
( Coordinate\(8, 9\)\);) p n
() N
(        Road r5 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(10, 1\), ) p
(new) K
( Coordinate\(16, 1\)\);) p n
(        Road r6 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(17, 2\), ) p
(new) K
( Coordinate\(17, 8\)\);) p n
(        Road r7 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(10, 9\), ) p
(new) K
( Coordinate\(16, 9\)\);) p n
() N
(        Lane disabledLane = ) S
(new) K
( Lane\(r3.getStartLocation\(\), r3.getEndLocation\(\),) p n
( MapDirection.SOUTH\);) N
() N
(        ) S
(//disable lane) c n
(        disabledLane.setState\(0\);) p n
() N
(        r1.addLane\() S
(new) K
( Lane\(r1.getStartLocation\(\), r1.getEndLocation\(\), MapDirec) p n
(tion.EAST\)\);) N
() N
(        r2.addLane\() S
(new) K
( Lane\(r2.getEndLocation\(\), r2.getStartLocation\(\), MapDirec) p n
(tion.NORTH\)\);) N
() N
(        r3.addLane\(disabledLane\);) N
() N
(        r4.addLane\() S
(new) K
( Lane\(r4.getEndLocation\(\), r4.getStartLocation\(\), MapDirec) p n
(tion.WEST\)\);) N
() N
(        r5.addLane\() S
(new) K
( Lane\(r5.getStartLocation\(\), r5.getEndLocation\(\), MapDirec) p n
(tion.EAST\)\);) N
() N
(        r6.addLane\() S
(new) K
( Lane\(r6.getStartLocation\(\), r6.getEndLocation\(\), MapDirec) p n
(MapExamples.java) (Page 8/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (110/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (9) 111
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(tion.SOUTH\)\);) p n
() N
(        r7.addLane\() S
(new) K
( Lane\(r7.getEndLocation\(\), r7.getStartLocation\(\), MapDirec) p n
(tion.WEST\)\);) N
() N
(        map.addRoad\(r1\);) N
(        map.addRoad\(r2\);) N
(        map.addRoad\(r3\);) N
(        map.addRoad\(r4\);) N
(        map.addRoad\(r5\);) N
(        map.addRoad\(r6\);) N
(        map.addRoad\(r7\);) N
() N
(        Intersection i1 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 1\)\);) p n
(        i1.setEastRoad\(r1\);) N
(        i1.setSouthRoad\(r2\);) N
() N
(        Intersection i2 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9, 1\)\);) p n
(        i2.setWestRoad\(r1\);) N
(        i2.setSouthRoad\(r3\);) N
(        i2.setEastRoad\(r5\);) N
() N
(        Intersection i3 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1, 9\)\);) p n
(        i3.setNorthRoad\(r2\);) N
(        i3.setEastRoad\(r4\);) N
() N
(        Intersection i4 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9, 9\)\);) p n
(        i4.setNorthRoad\(r3\);) N
(        i4.setWestRoad\(r4\);) N
(        i4.setEastRoad\(r7\);) N
() N
(        Intersection i5 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(17, 1\)\);) p n
(        i5.setWestRoad\(r5\);) N
(        i5.setSouthRoad\(r6\);) N
() N
(        Intersection i6 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(17, 9\)\);) p n
(        i6.setNorthRoad\(r6\);) N
(        i6.setWestRoad\(r7\);) N
() N
(        map.addIntersection\(i1\);) N
(        map.addIntersection\(i2\);) N
(        map.addIntersection\(i3\);) N
(        map.addIntersection\(i4\);) N
(        map.addIntersection\(i5\);) N
(        map.addIntersection\(i6\);) N
() N
(        ) S
(return) K
( map;) p n
(    }) N
() N
() N
() N
(    ) S
(public) K
( ) p
(static) K
( Map drawTestMapSimple\(\) ) p
(throws) K
( Exception {) p n
() N
(        Map map = ) S
(new) K
( Map\(10,10\);) p n
() N
(        Road r1 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,1\), ) p
(new) K
( Coordinate\(8,1\)\);) p n
(        Road r2 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,2\), ) p
(new) K
( Coordinate\(1,8\)\);) p n
(        Road r3 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9,2\), ) p
(new) K
( Coordinate\(9,8\)\);) p n
(        Road r4 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,9\), ) p
(new) K
( Coordinate\(8,9\)\);) p n
(MapExamples.java) (Page 9/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (111/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (10) 112
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(        r1.addLane\() S
(new) K
( Lane\(r1.getStartLocation\(\),r1.getEndLocation\(\), MapDirect) p n
(ion.EAST\)\);) N
(        r1.addLane\() S
(new) K
( Lane\(r1.getEndLocation\(\) ,r1.getStartLocation\(\), MapDirec) p n
(tion.WEST\)\);) N
() N
(        r2.addLane\() S
(new) K
( Lane\(r2.getEndLocation\(\),r2.getStartLocation\(\), MapDirect) p n
(ion.NORTH\)\);) N
(        r2.addLane\() S
(new) K
( Lane\(r2.getStartLocation\(\),r2.getEndLocation\(\), MapDirect) p n
(ion.SOUTH\)\);) N
() N
(        r3.addLane\() S
(new) K
( Lane\(r3.getEndLocation\(\),r3.getStartLocation\(\), MapDirect) p n
(ion.NORTH\)\);) N
(        r3.addLane\() S
(new) K
( Lane\(r3.getStartLocation\(\),r3.getEndLocation\(\), MapDirect) p n
(ion.SOUTH\)\);) N
() N
(        r4.addLane\() S
(new) K
( Lane\(r4.getStartLocation\(\),r4.getEndLocation\(\), MapDirect) p n
(ion.EAST\)\);) N
(        r4.addLane\() S
(new) K
( Lane\(r4.getEndLocation\(\),r4.getStartLocation\(\), MapDirect) p n
(ion.WEST\)\);) N
() N
(        map.addRoad\(r1\);) N
(        map.addRoad\(r2\);) N
(        map.addRoad\(r3\);) N
(        map.addRoad\(r4\);) N
() N
(        Intersection i1 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,1\)\);) p n
(        i1.setEastRoad\(r1\);) N
(        i1.setSouthRoad\(r2\);) N
() N
(        Intersection i2 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9,1\)\);) p n
(        i2.setWestRoad\(r1\);) N
(        i2.setSouthRoad\(r3\);) N
(        Intersection i3 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,9\)\);) p n
(        i3.setNorthRoad\(r2\);) N
(        i3.setEastRoad\(r4\);) N
(        Intersection i4 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9,9\)\);) p n
(        i4.setNorthRoad\(r3\);) N
(        i4.setWestRoad\(r4\);) N
() N
(        map.addIntersection\(i1\);) N
(        map.addIntersection\(i2\);) N
(        map.addIntersection\(i3\);) N
(        map.addIntersection\(i4\);) N
() N
(        ) S
(return) K
( map;) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(static) K
( Map drawTestMapBig\(\) ) p
(throws) K
( Exception {) p n
() N
(        Map map = ) S
(new) K
( Map\(20,20\);) p n
() N
(        Road r1 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,1\), ) p
(new) K
( Coordinate\(8,1\)\);) p n
(        Road r2 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,2\), ) p
(new) K
( Coordinate\(1,8\)\);) p n
(        Road r3 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9,2\), ) p
(new) K
( Coordinate\(9,8\)\);) p n
(        Road r4 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,9\), ) p
(new) K
( Coordinate\(8,9\)\);) p n
() N
(MapExamples.java) (Page 10/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (112/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (11) 113
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        Road r5 = ) p
(new) K
( Road\() p
(new) K
( Coordinate\(10,1\), ) p
(new) K
( Coordinate\(16,1\)\);) p n
(        Road r6 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(17,2\), ) p
(new) K
( Coordinate\(17,8\)\);) p n
(        Road r7 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(10,9\), ) p
(new) K
( Coordinate\(16,9\)\);) p n
() N
(        Lane disabledLane = ) S
(new) K
( Lane\(r3.getStartLocation\(\),r3.getEndLocation\(\), ) p n
(MapDirection.SOUTH\);) N
() N
(        ) S
(//disable lane) c n
(        disabledLane.setState\(0\);) p n
() N
(        r1.addLane\() S
(new) K
( Lane\(r1.getStartLocation\(\),r1.getEndLocation\(\), MapDirect) p n
(ion.EAST\)\);) N
(        r1.addLane\() S
(new) K
( Lane\(r1.getEndLocation\(\) ,r1.getStartLocation\(\), MapDirec) p n
(tion.WEST\)\);) N
() N
(        r2.addLane\() S
(new) K
( Lane\(r2.getEndLocation\(\),r2.getStartLocation\(\), MapDirect) p n
(ion.NORTH\)\);) N
(        r2.addLane\() S
(new) K
( Lane\(r2.getStartLocation\(\),r2.getEndLocation\(\), MapDirect) p n
(ion.SOUTH\)\);) N
() N
(        r3.addLane\() S
(new) K
( Lane\(r3.getEndLocation\(\),r3.getStartLocation\(\), MapDirect) p n
(ion.NORTH\)\);) N
(        r3.addLane\(disabledLane\);) N
() N
(        r4.addLane\() S
(new) K
( Lane\(r4.getStartLocation\(\),r4.getEndLocation\(\), MapDirect) p n
(ion.EAST\)\);) N
(        r4.addLane\() S
(new) K
( Lane\(r4.getEndLocation\(\),r4.getStartLocation\(\), MapDirect) p n
(ion.WEST\)\);) N
() N
(        r5.addLane\() S
(new) K
( Lane\(r5.getStartLocation\(\),r5.getEndLocation\(\), MapDirect) p n
(ion.EAST\)\);) N
(        r5.addLane\() S
(new) K
( Lane\(r5.getEndLocation\(\),r5.getStartLocation\(\), MapDirect) p n
(ion.WEST\)\);) N
() N
(        r6.addLane\() S
(new) K
( Lane\(r6.getEndLocation\(\),r6.getStartLocation\(\), MapDirect) p n
(ion.NORTH\)\);) N
(        r6.addLane\() S
(new) K
( Lane\(r6.getStartLocation\(\),r6.getEndLocation\(\), MapDirect) p n
(ion.SOUTH\)\);) N
() N
(        r7.addLane\() S
(new) K
( Lane\(r7.getStartLocation\(\),r7.getEndLocation\(\), MapDirect) p n
(ion.EAST\)\);) N
(        r7.addLane\() S
(new) K
( Lane\(r7.getEndLocation\(\),r7.getStartLocation\(\), MapDirect) p n
(ion.WEST\)\);) N
() N
(        map.addRoad\(r1\);) N
(        map.addRoad\(r2\);) N
(        map.addRoad\(r3\);) N
(        map.addRoad\(r4\);) N
(        map.addRoad\(r5\);) N
(        map.addRoad\(r6\);) N
(        map.addRoad\(r7\);) N
() N
(        Intersection i1 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,1\)\);) p n
(        i1.setEastRoad\(r1\);) N
(        i1.setSouthRoad\(r2\);) N
() N
(        Intersection i2 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9,1\)\);) p n
(        i2.setWestRoad\(r1\);) N
(        i2.setSouthRoad\(r3\);) N
(MapExamples.java) (Page 11/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (113/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (12) 114
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        i2.setEastRoad\(r5\);) p n
() N
(        Intersection i3 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,9\)\);) p n
(        i3.setNorthRoad\(r2\);) N
(        i3.setEastRoad\(r4\);) N
() N
(        Intersection i4 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(9,9\)\);) p n
(        i4.setNorthRoad\(r3\);) N
(        i4.setWestRoad\(r4\);) N
(        i4.setEastRoad\(r7\);) N
() N
(        Intersection i5 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(17,1\)\);) p n
(        i5.setWestRoad\(r5\);) N
(        i5.setSouthRoad\(r6\);) N
() N
(        Intersection i6 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(17,9\)\);) p n
(        i6.setNorthRoad\(r6\);) N
(        i6.setWestRoad\(r7\);) N
() N
(        map.addIntersection\(i1\);) N
(        map.addIntersection\(i2\);) N
(        map.addIntersection\(i3\);) N
(        map.addIntersection\(i4\);) N
(        map.addIntersection\(i5\);) N
(        map.addIntersection\(i6\);) N
() N
(        ) S
(return) K
( map;) p n
(    }) N
() N
(    ) S
(//Added new Map with two lanes) c n
(    ) p
(public) K
( ) p
(static) K
( Map drawTestMapExample\(\) ) p
(throws) K
( Exception {) p n
() N
(        Map map = ) S
(new) K
( Map\(22,22\);) p n
() N
(        Road r01 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,1\), ) p
(new) K
( Coordinate\(4,1\)\);) p n
(        Road r02 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,2\), ) p
(new) K
( Coordinate\(1,4\)\);) p n
(        Road r03 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,6\), ) p
(new) K
( Coordinate\(1,9\)\);) p n
(        Road r04 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,11\), ) p
(new) K
( Coordinate\(1,14\)\);) p n
(        Road r05 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(6,1\), ) p
(new) K
( Coordinate\(12,1\)\);) p n
(        Road r06 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(14,1\), ) p
(new) K
( Coordinate\(19,1\)\);) p n
(        Road r07 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(20,2\), ) p
(new) K
( Coordinate\(20,9\)\);) p n
(        Road r08 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(20,11\), ) p
(new) K
( Coordinate\(20,14\)\);) p n
(        Road r09 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9,15\), ) p
(new) K
( Coordinate\(19,15\)\);) p n
(        Road r10 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,15\), ) p
(new) K
( Coordinate\(7,15\)\);) p n
(        Road r11 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(5,2\), ) p
(new) K
( Coordinate\(5,4\)\);) p n
(        Road r12 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,5\), ) p
(new) K
( Coordinate\(4,5\)\);) p n
(        Road r13 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,10\), ) p
(new) K
( Coordinate\(7,10\)\);) p n
(        Road r14 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9,10\), ) p
(new) K
( Coordinate\(12,10\)\);) p n
(        Road r15 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(14,10\), ) p
(new) K
( Coordinate\(19,10\)\);) p n
(        Road r16 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(8,11\), ) p
(new) K
( Coordinate\(8,14\)\);) p n
(        Road r17 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(13,2\), ) p
(new) K
( Coordinate\(13,4\)\);) p n
(        Road r18 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(13,6\), ) p
(new) K
( Coordinate\(13,9\)\);) p n
(        Road r19 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(6,5\),) p
(new) K
( Coordinate\(12,5\)\);) p n
(        Road r20 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(1,16\),) p
(new) K
( Coordinate\(1,19\)\);) p n
(        Road r21 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(8,16\),) p
(new) K
( Coordinate\(8,19\)\);) p n
(        Road r22 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(2,20\),) p
(new) K
( Coordinate\(7,20\)\);) p n
(        Road r23 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(9,20\),) p
(new) K
( Coordinate\(19,20\)\);) p n
(        Road r24 = ) S
(new) K
( Road\() p
(new) K
( Coordinate\(20,16\), ) p
(new) K
( Coordinate\(20,19\)\);) p n
() N
(MapExamples.java) (Page 12/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (114/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (13) 115
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        r01.addLane\() p
(new) K
( Lane\(r01.getStartLocation\(\),r01.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r02.addLane\() S
(new) K
( Lane \(r02.getEndLocation\(\),r02.getStartLocation\(\),MapDir) p n
(ection.NORTH\)\);) N
(        r03.addLane\() S
(new) K
( Lane\(r03.getEndLocation\(\),r03.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        r04.addLane\() S
(new) K
( Lane\(r04.getEndLocation\(\),r04.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        Lane l5 = ) S
(new) K
( Lane\(r05.getStartLocation\(\),r05.getEndLocation\(\),MapDirect) p n
(ion.EAST\);) N
(        ) S
(//l5.setState\(0\);) c n
(        r05.addLane\(l5\);) p n
(        Lane l6 = ) S
(new) K
( Lane\(r06.getStartLocation\(\),r06.getEndLocation\(\),MapDirect) p n
(ion.EAST\);) N
(        r06.addLane\(l6\);) N
(        ) S
(//l6.setState\(0\);) c n
(        r07.addLane\() p
(new) K
( Lane\(r07.getEndLocation\(\),r07.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        r08.addLane\() S
(new) K
( Lane\(r08.getEndLocation\(\),r08.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
() N
(        Lane lane9Closed = ) S
(new) K
( Lane\(r09.getStartLocation\(\),r09.getEndLocation\(\),) p n
(MapDirection.EAST\);) N
() N
(        ) S
(//lane9Closed.setState\(0\);) c n
() p n
(        r09.addLane\(lane9Closed\);) N
() N
() N
(        r10.addLane\() S
(new) K
( Lane\(r10.getStartLocation\(\),r10.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r11.addLane\() S
(new) K
( Lane\(r11.getEndLocation\(\),r11.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        r12.addLane\() S
(new) K
( Lane\(r12.getStartLocation\(\),r12.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
() N
(        r13.addLane\() S
(new) K
( Lane\(r13.getStartLocation\(\),r13.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r14.addLane\() S
(new) K
( Lane\(r14.getStartLocation\(\),r14.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r15.addLane\() S
(new) K
( Lane\(r15.getStartLocation\(\),r15.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r16.addLane\() S
(new) K
( Lane\(r16.getEndLocation\(\),r16.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        r17.addLane\() S
(new) K
( Lane\(r17.getEndLocation\(\),r17.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        r18.addLane\() S
(new) K
( Lane\(r18.getEndLocation\(\),r18.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
(        r19.addLane\() S
(new) K
( Lane\(r19.getStartLocation\(\),r19.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r20.addLane\() S
(new) K
( Lane\(r20.getEndLocation\(\),r20.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
() N
(        Lane lane21NClosed = ) S
(new) K
( Lane\(r21.getEndLocation\(\),r21.getStartLocation\() p n
(\),MapDirection.NORTH\);) N
(        ) S
(//lane21Closed.setState\(0\);) c n
() p n
(        r21.addLane\(lane21NClosed\);) N
() N
(MapExamples.java) (Page 13/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (115/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (14) 116
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        r22.addLane\() p
(new) K
( Lane\(r22.getStartLocation\(\),r22.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r23.addLane\() S
(new) K
( Lane\(r23.getStartLocation\(\),r23.getEndLocation\(\),MapDire) p n
(ction.EAST\)\);) N
(        r24.addLane\() S
(new) K
( Lane\(r24.getEndLocation\(\),r24.getStartLocation\(\),MapDire) p n
(ction.NORTH\)\);) N
() N
() N
(        r01.addLane\() S
(new) K
( Lane\(r01.getEndLocation\(\),r01.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r02.addLane\() S
(new) K
( Lane \(r02.getStartLocation\(\),r02.getEndLocation\(\),MapDir) p n
(ection.SOUTH\)\);) N
(        r03.addLane\() S
(new) K
( Lane\(r03.getStartLocation\(\),r03.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r04.addLane\() S
(new) K
( Lane\(r04.getStartLocation\(\),r04.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r05.addLane\() S
(new) K
( Lane\(r05.getEndLocation\(\),r05.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r06.addLane\() S
(new) K
( Lane\(r06.getEndLocation\(\),r06.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r07.addLane\() S
(new) K
( Lane\(r07.getStartLocation\(\),r07.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r08.addLane\() S
(new) K
( Lane\(r08.getStartLocation\(\),r08.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r09.addLane\() S
(new) K
( Lane\(r09.getEndLocation\(\),r09.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r10.addLane\() S
(new) K
( Lane\(r10.getEndLocation\(\),r10.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r11.addLane\() S
(new) K
( Lane\(r11.getStartLocation\(\),r11.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r12.addLane\() S
(new) K
( Lane\(r12.getEndLocation\(\),r12.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
() N
(        Lane lane13WClosed = ) S
(new) K
( Lane\(r13.getEndLocation\(\),r13.getStartLocation\() p n
(\),MapDirection.WEST\);) N
(        ) S
(//lane13WClosed.setState\(0\);) c n
() p n
(        r13.addLane\(lane13WClosed\);) N
(        r14.addLane\() S
(new) K
( Lane\(r14.getEndLocation\(\),r14.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r15.addLane\() S
(new) K
( Lane\(r15.getEndLocation\(\),r15.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r16.addLane\() S
(new) K
( Lane\(r16.getStartLocation\(\),r16.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r17.addLane\() S
(new) K
( Lane\(r17.getStartLocation\(\),r17.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r18.addLane\() S
(new) K
( Lane\(r18.getStartLocation\(\),r18.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
(        r19.addLane\() S
(new) K
( Lane\(r19.getEndLocation\(\),r19.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r20.addLane\() S
(new) K
( Lane\(r20.getStartLocation\(\),r20.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
() N
(        Lane lane21SClosed = ) S
(new) K
( Lane\(r21.getStartLocation\(\),r21.getEndLocation\() p n
(\),MapDirection.SOUTH\);) N
(        ) S
(//lane21SClosed.setState\(0\);) c n
() p n
(        r21.addLane\(lane21SClosed\);) N
() N
(MapExamples.java) (Page 14/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (116/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (15) 117
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        r22.addLane\() p
(new) K
( Lane\(r22.getEndLocation\(\),r22.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r23.addLane\() S
(new) K
( Lane\(r23.getEndLocation\(\),r23.getStartLocation\(\),MapDire) p n
(ction.WEST\)\);) N
(        r24.addLane\() S
(new) K
( Lane\(r24.getStartLocation\(\),r24.getEndLocation\(\),MapDire) p n
(ction.SOUTH\)\);) N
() N
() N
(        Intersection i01 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,1\)\);) p n
(        i01.setEastRoad\(r01\);) N
(        i01.setSouthRoad\(r02\);) N
(        i01.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i02 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,5\)\);) p n
(        i02.setNorthRoad\(r02\);) N
(        i02.setSouthRoad\(r03\);) N
(        i02.setEastRoad\(r12\);) N
(        i02.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i03 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,10\)\);) p n
(        i03.setNorthRoad\(r03\);) N
(        i03.setSouthRoad\(r04\);) N
(        i03.setEastRoad\(r13\);) N
(        i03.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i04 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,15\)\);) p n
(        i04.setNorthRoad\(r04\);) N
(        i04.setEastRoad\(r10\);) N
(        i04.setSouthRoad\(r20\);) N
(        i04.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i05 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(5,1\)\);) p n
(        i05.setWestRoad\(r01\);) N
(        i05.setEastRoad\(r05\);) N
(        i05.setSouthRoad\(r11\);) N
(        i05.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i06 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(13,1\)\);) p n
(        i06.setWestRoad\(r05\);) N
(        i06.setEastRoad\(r06\);) N
(        i06.setSouthRoad\(r17\);) N
(        i06.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i07 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(20,1\)\);) p n
(        i07.setWestRoad\(r06\);) N
(        i07.setSouthRoad\(r07\);) N
(        i07.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i08 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(20,10\)\);) p n
(        i08.setNorthRoad\(r07\);) N
(        i08.setSouthRoad\(r08\);) N
(        i08.setWestRoad\(r15\);) N
(        i08.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i09 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(20,15\)\);) p n
(        i09.setNorthRoad\(r08\);) N
(        i09.setWestRoad\(r09\);) N
(        i09.setSouthRoad\(r24\);) N
(        i09.setDefaultTrafficLightsForRoads\(\);) N
(MapExamples.java) (Page 15/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (117/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (16) 118
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        Intersection i10 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(8,15\)\);) p n
(        i10.setEastRoad\(r09\);) N
(        i10.setWestRoad\(r10\);) N
(        i10.setNorthRoad\(r16\);) N
(        i10.setSouthRoad\(r21\);) N
(        i10.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i11 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(5,5\)\);) p n
(        i11.setWestRoad\(r12\);) N
(        i11.setNorthRoad\(r11\);) N
(        i11.setEastRoad\(r19\);) N
(        i11.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i12 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(8,10\)\);) p n
(        i12.setWestRoad\(r13\);) N
(        i12.setEastRoad\(r14\);) N
(        i12.setSouthRoad\(r16\);) N
(        i12.setDefaultTrafficLightsForRoads\(\);    ) S
(//enables tl) c n
() p n
(        Intersection i13 = ) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(13,10\)\);) p n
(        i13.setWestRoad\(r14\);) N
(        i13.setEastRoad\(r15\);) N
(        i13.setNorthRoad\(r18\);) N
(        i13.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i14 =) S
(new) K
( Intersection\(\() p
(new) K
( Coordinate\(13,5\)\)\);) p n
(        i14.setNorthRoad\(r17\);) N
(        i14.setSouthRoad\(r18\);) N
(        i14.setWestRoad\(r19\);) N
(        i14.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i15 =) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(1,20\)\);) p n
(        i15.setNorthRoad\(r20\);) N
(        i15.setEastRoad\(r22\);) N
(        i15.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i16 =) S
(new) K
( Intersection\() p
(new) K
( Coordinate\(8,20\)\);) p n
(        i16.setWestRoad\(r22\);) N
(        i16.setNorthRoad\(r21\);) N
(        i16.setEastRoad\(r23\);) N
(        i16.setDefaultTrafficLightsForRoads\(\);) N
() N
(        Intersection i17= ) S
(new) K
( Intersection \() p
(new) K
( Coordinate\(20,20\)\);) p n
(        i17.setWestRoad\(r23\);) N
(        i17.setNorthRoad\(r24\);) N
(        i17.setDefaultTrafficLightsForRoads\(\);) N
() N
(        map.addRoad\(r01\);) N
(        map.addRoad\(r02\);) N
(        map.addRoad\(r03\);) N
(        map.addRoad\(r04\);) N
(        map.addRoad\(r05\);) N
(        map.addRoad\(r06\);) N
(        map.addRoad\(r07\);) N
(        map.addRoad\(r08\);) N
(        map.addRoad\(r09\);) N
(        map.addRoad\(r10\);) N
(        map.addRoad\(r11\);) N
(MapExamples.java) (Page 16/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (118/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (17) 119
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        map.addRoad\(r12\);) p n
(        map.addRoad\(r13\);) N
(        map.addRoad\(r14\);) N
(        map.addRoad\(r15\);) N
(        map.addRoad\(r16\);) N
(        map.addRoad\(r17\);) N
(        map.addRoad\(r18\);) N
(        map.addRoad\(r19\);) N
(        map.addRoad\(r20\);) N
(        map.addRoad\(r21\);) N
(        map.addRoad\(r22\);) N
(        map.addRoad\(r23\);) N
(        map.addRoad\(r24\);) N
() N
(        map.addIntersection\(i01\);) N
(        map.addIntersection\(i02\);) N
(        map.addIntersection\(i03\);) N
(        map.addIntersection\(i04\);) N
(        map.addIntersection\(i05\);) N
(        map.addIntersection\(i06\);) N
(        map.addIntersection\(i07\);) N
(        map.addIntersection\(i08\);) N
(        map.addIntersection\(i09\);) N
(        map.addIntersection\(i10\);) N
(        map.addIntersection\(i11\);) N
(        map.addIntersection\(i12\);) N
(        map.addIntersection\(i13\);) N
(        map.addIntersection\(i14\);) N
(        map.addIntersection\(i15\);) N
(        map.addIntersection\(i16\);) N
(        map.addIntersection\(i17\);) N
() N
(        ) S
(return) K
( map;) p n
(    }) N
() N
(}) N
() N
(MapExamples.java) (Page 17/17) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (119/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 120
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( londonsw.model.simulation.MapGrid;) p n
(import) K
( londonsw.model.simulation.components.Component;) p n
(import) K
( londonsw.model.simulation.components.IMapGrid;) p n
() N
(/**) C n
( * Created by felix on 25/02/2016.) N
( */) N
(public) K
( ) p
(abstract) K
( ) p
(class) K
( ) p
(MapGridDecorator) L
( ) p
(implements) K
( IMapGrid {) p n
(    ) S
(protected) K
( MapGrid decoratedMapGrid;) p n
() N
(    ) S
(public) K
( MapGridDecorator\(MapGrid decoratedMapGrid\) {) p n
(        this.decoratedMapGrid = decoratedMapGrid;) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Component[][] getGrid\(\) {) p n
(        ) S
(return) K
( this.decoratedMapGrid.getGrid\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getWidth\(\) {) p n
(        ) S
(return) K
( this.decoratedMapGrid.getWidth\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getHeight\(\) {) p n
(        ) S
(return) K
( this.decoratedMapGrid.getHeight\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(boolean) k
( addComponent\(Component component\) {) p n
(        ) S
(return) K
( this.decoratedMapGrid.addComponent\(component\);) p n
(    }) N
(}) S
(MapGridDecorator.java) (Page 1/1) (Mar 02, 16 21:30) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (120/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 121
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.scene.Group;) p n
(import) K
( javafx.scene.Node;) p n
(import) K
( javafx.scene.layout.GridPane;) p n
(import) K
( javafx.scene.layout.Pane;) p n
(import) K
( javafx.scene.layout.StackPane;) p n
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.scene.shape.Line;) p n
(import) K
( javafx.scene.shape.Polygon;) p n
(import) K
( londonsw.controller.MapMakerController;) p n
(import) K
( londonsw.model.simulation.MapGrid;) p n
(import) K
( londonsw.model.simulation.components.*;) p n
(import) K
( londonsw.view.mapcreation.ComponentType;) p n
() N
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * This is the class that handles drawing of the entire map. It cycles through t) N
(he Model grid and draws) N
( * each map component on the screen.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(MapGridGUIDecorator) L
( ) p
(extends) K
( MapGridDecorator {) p n
() N
(    ) S
(private) K
( ResizeFactor resizeFactor;) p n
() N
(    ) S
(/**) C n
(     * Creates an instance of this decorator to represent a single Map) N
(     * @param decoratedMapGrid the MapGrid \(underlying Map data structure\) to re) N
(present graphically) N
(     */) N
(    ) p
(public) K
( MapGridGUIDecorator\(MapGrid decoratedMapGrid\) {) p n
(        ) S
(super) K
(\(decoratedMapGrid\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the resize factor for this decorator) N
(     * @return the resize factor for this decorator) N
(     */) N
(    ) p
(public) K
( ResizeFactor getResizeFactor\(\) {) p n
(        ) S
(return) K
( resizeFactor;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the resize factor for this decorator) N
(     * @param resizeFactor the resize factor to set for this decorator) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setResizeFactor\(ResizeFactor resizeFactor\) {) p n
(        this.resizeFactor = resizeFactor;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Draws the components for this Map) N
(     * @return a GridPane representing the map, where every cell in the GridPane) N
( corresponds to a coordinate in the Map) N
(     * @throws Exception) N
(     */) N
(    ) p
(public) K
( GridPane drawComponents\(\) ) p
(throws) K
( Exception {) p n
(        GridPane rootGP = ) S
(new) K
( GridPane\(\);) p n
(MapGridGUIDecorator.java) (Page 1/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (121/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 122
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        StackPane roadPane;) p n
() N
(        ) S
(int) k
( roadCounter = 0;) p n
() N
(        ArrayList<RoadGUIDecorator> roadArray = ) S
(new) K
( ArrayList<>\(\);) p n
() N
(        ) S
(for) K
( \() p
(int) k
( y = 0; y < this.getHeight\(\); y++\) {) p n
(            ) S
(for) K
( \() p
(int) k
( x = 0; x < this.getWidth\(\); x++\) {) p n
() N
(                Component current = this.getGrid\(\)[y][x];) N
() N
(                ) S
(if) K
( \(current ) p
(instanceof) K
( Road\) { ) p
(// draws a Road) c n
() p n
(                    RoadGUIDecorator roadGUIDecorator = ) S
(new) K
( RoadGUIDecorator\(\(Ro) p n
(ad\) current\);) N
() N
(                    roadGUIDecorator.setResizeFactor\(this.getResizeFactor\(\)\);) N
() N
(                    roadPane = roadGUIDecorator.drawRoad\(\);) N
() N
(                    roadPane.getChildren\(\).get\(1\).setOnMouseClicked\(event ->) N
(                            {) N
() N
(                                ) S
(if) K
( \(event.getTarget\(\) ) p
(instanceof) K
( LaneArrow\) {) p n
(                                    LaneArrow laneArrow = \(LaneArrow\) event.getT) N
(arget\(\);) N
() N
(                                    ) S
(for) K
( \(RoadGUIDecorator rd : roadArray) p n
(                                            \) {) N
() N
() N
(                                        ) S
(if) K
( \(rd.decoratedRoad.getId\(\) == roadGUID) p n
(ecorator.decoratedRoad.getId\(\)\) {) N
() N
(                                            Node nGroup = rd.getPane\(\).getChildr) N
(en\(\).get\(1\);) N
() N
(                                            Group gRoad = \(Group\) nGroup;) N
() N
(                                            Group g = \(Group\) gRoad.getChildren\() N
(\).get\(laneArrow.lane.getRoadIndex\(\)\);) N
() N
(                                            Line lineArrow = \(Line\) g.getChildre) N
(n\(\).get\(0\);) N
(                                            Polygon arrow = \(Polygon\) g.getChild) N
(ren\(\).get\(1\);) N
() N
(                                            lineArrow.setStroke\(lineArrow.getStr) N
(oke\(\) == Color.RED ? Color.WHITE : Color.RED\);) N
(                                            arrow.setFill\(arrow.getFill\(\) == Col) N
(or.RED ? Color.WHITE : Color.RED\);) N
() N
(                                        }) N
() N
(                                    }) N
() N
(                                    System.out.println\(") S
(Lane ID: ) str
(" + laneArrow.lan) p n
(e.getId\(\) + ") S
( Lane State: ) str
(" + laneArrow.lane.getState\(\)\);) p n
(                                    laneArrow.lane.setState\(laneArrow.lane.getSt) N
(MapGridGUIDecorator.java) (Page 2/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (122/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 123
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ate\(\) == 0 ? 1 : 0\);) p n
() N
(                                }) N
(                            }) N
(                    \);) N
() N
(                    roadGUIDecorator.setCell\(roadCounter\);) N
(                    roadGUIDecorator.setPane\(roadPane\);) N
(                    roadGUIDecorator.setGridPaneCoordinates\() S
(new) K
( Coordinate\(x, y\)) p n
(\);) N
() N
(                    roadArray.add\(roadGUIDecorator\);) N
() N
(                    roadCounter++;) N
() N
(                } ) S
(else) K
( ) p
(if) K
( \(current ) p
(instanceof) K
( Intersection\) { ) p
(// draws an Inters) c n
(ection) N
(                    roadCounter = 0;) p n
() N
(                    IntersectionDecorator intersectionDecorator = ) S
(new) K
( Intersecti) p n
(onDecorator\(\(Intersection\) current\);) N
(                    intersectionDecorator.setResizeFactor\(this.getResizeFactor\(\)) N
(\);) N
(                    roadPane = intersectionDecorator.drawIntersection\(\);) N
(                } ) S
(else) K
( { ) p
(// draws Grass) c n
(                    roadCounter = 0;) p n
() N
(                    LayoutGUI grassGUI = ) S
(new) K
( LayoutGUI\(\);) p n
(                    grassGUI.setHeight\(this.getHeight\(\)\);) N
(                    grassGUI.setWidth\(this.getWidth\(\)\);) N
(                    grassGUI.setResizeFactor\(this.getResizeFactor\(\)\);) N
(                    roadPane = grassGUI.drawGrass\(\);) N
(                }) N
() N
(                rootGP.add\(roadPane, x, y\);) N
() N
(            }) N
(        }) N
() N
(        rootGP.setGridLinesVisible\() S
(true) k
(\);) p n
() N
(        ) S
(return) K
( rootGP;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Redraws the cell based on what is currently in the cell. Used by MapMaker) N
( mode.) N
(     * @param x the x coordinate of the new component to be redrawn) N
(     * @param y the y coordinate of the new component to be redrawn) N
(     * @param gp the GridPane representing the Map) N
(     * @return a StackPane representation of the newly redrawn grid cell) N
(     */) N
(    ) p
(public) K
( StackPane redrawCell\() p
(int) k
( x, ) p
(int) k
( y, GridPane gp\) {) p n
(        Component component = this.getGrid\(\)[y][x];) N
(        StackPane sp = ) S
(new) K
( StackPane\(\);) p n
(        ) S
(if) K
(\(component ) p
(instanceof) K
( Intersection\) {) p n
(            IntersectionDecorator intersectionDecorator = ) S
(new) K
( IntersectionDecora) p n
(tor\(\(Intersection\) component\);) N
(            intersectionDecorator.setResizeFactor\(this.getResizeFactor\(\)\);) N
(MapGridGUIDecorator.java) (Page 3/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (123/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 124
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            sp = intersectionDecorator.drawIntersection\(\);) p n
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(component ) p
(instanceof) K
( Road\) {) p n
(            RoadGUIDecorator roadGUIDecorator = ) S
(new) K
( RoadGUIDecorator\(\(Road\) comp) p n
(onent\);) N
(            roadGUIDecorator.setResizeFactor\(this.getResizeFactor\(\)\);) N
(            sp = roadGUIDecorator.drawRoad\(\);) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(component == ) p
(null) k
(\) { ) p
(// Grass) c n
(            LayoutGUI grassGUI = ) p
(new) K
( LayoutGUI\(\);) p n
(            grassGUI.setHeight\(this.getHeight\(\)\);) N
(            grassGUI.setWidth\(this.getWidth\(\)\);) N
(            grassGUI.setResizeFactor\(this.getResizeFactor\(\)\);) N
(            sp = grassGUI.drawGrass\(\);) N
(        }) N
(        gp.add\(sp, x, y\);) N
(        ) S
(return) K
( sp;) p n
(    }) N
(}) N
(MapGridGUIDecorator.java) (Page 4/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (124/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 125
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( londonsw.model.simulation.components.*;) p n
() N
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * Created by felix on 25/02/2016.) N
( */) N
(public) K
( ) p
(abstract) K
( ) p
(class) K
( ) p
(RoadDecorator) L
( ) p
(implements) K
( IRoad {) p n
() N
(    ) S
(protected) K
( Road decoratedRoad;) p n
() N
(    ) S
(public) K
( RoadDecorator\(Road decoratedRoad\) {) p n
(        this.decoratedRoad = decoratedRoad;) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ArrayList<Lane> getLanes\(\) {) p n
(        ) S
(return) K
( this.decoratedRoad.getLanes\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( addLane\(Lane lane\) {) p n
(        this.decoratedRoad.addLane\(lane\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Lane getLaneAtIndex\() p
(int) k
( index\) {) p n
(        ) S
(return) K
( this.decoratedRoad.getLaneAtIndex\(index\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Coordinate getEndLocation\(\) {) p n
(        ) S
(return) K
( this.decoratedRoad.getEndLocation\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getNumberLanes\(\) {) p n
(        ) S
(return) K
( decoratedRoad.getNumberLanes\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Intersection getIntersection\(\) {) p n
(        ) S
(return) K
( this.decoratedRoad.getIntersection\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setIntersection\(Intersection intersection\) {) p n
(        this.decoratedRoad.setIntersection\(intersection\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getLength\(\) {) p n
(        ) S
(return) K
( this.decoratedRoad.getLength\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(boolean) k
( runsVertically\(\) {) p n
(RoadDecorator.java) (Page 1/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (125/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 126
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        ) p
(return) K
( this.decoratedRoad.runsVertically\(\);) p n
(    }) N
() N
(    ) S
(public) K
( ) p
(boolean) k
( runsVertically\(MapDirection mapDirection\) {) p n
(        ) S
(return) K
( this.decoratedRoad.runsVertically\(mapDirection\);) p n
(    }) N
() N
(}) S
(RoadDecorator.java) (Page 2/2) (Mar 23, 16 16:05) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (126/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 127
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.scene.Group;) p n
(import) K
( javafx.scene.image.Image;) p n
(import) K
( javafx.scene.image.ImageView;) p n
(import) K
( javafx.scene.layout.Pane;) p n
(import) K
( javafx.scene.layout.StackPane;) p n
(import) K
( javafx.scene.shape.Line;) p n
(import) K
( londonsw.model.simulation.components.*;) p n
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * This class defines how roads are drawn and displayed in the view. Each Road i) N
(nstance will) N
( * have exactly one of these decorators associated with it.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(RoadGUIDecorator) L
( ) p
(extends) K
( RoadDecorator {) p n
() N
(    ) S
(private) K
( ResizeFactor resizeFactor;) p n
(    ) S
(private) K
( Coordinate gridPaneCoordinates;) p n
(    ) S
(private) K
( Pane paneRoad;) p n
(    ) S
(private) K
( ) p
(int) k
( Cell;) p n
() N
(    ) S
(/**) C n
(     * Creates a new instance of this decorator class for the given Road instanc) N
(e) N
(     * @param decoratedRoad the Road instance to associate this decorator with) N
(     */) N
(    ) p
(public) K
( RoadGUIDecorator\(Road decoratedRoad\) {) p n
(        ) S
(super) K
(\(decoratedRoad\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the pane associated with this decorator) N
(     * @return the pane for this decorator) N
(     */) N
(    ) p
(public) K
( Pane getPane\(\) {) p n
(        ) S
(return) K
( paneRoad;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the pane for this decorator) N
(     * @param paneRoad the pane to set for this decorator) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setPane\(Pane paneRoad\) {) p n
(        this.paneRoad = paneRoad;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the cell for this road) N
(     * @return the cell) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( getCell\(\) {) p n
(        ) S
(return) K
( Cell;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the cell for this road) N
(     * @param cell the cell for this road) N
(RoadGUIDecorator.java) (Page 1/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (127/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 128
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     */) C n
(    ) p
(public) K
( ) p
(void) k
( setCell\() p
(int) k
( cell\) {) p n
(        Cell = cell;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the grid pane coordinate of this road) N
(     * @return the coordinate for this road) N
(     */) N
(    ) p
(public) K
( Coordinate getGridPaneCoordinates\(\) {) p n
(        ) S
(return) K
( gridPaneCoordinates;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the grid pane coordinate for this road) N
(     * @param gridPaneCoordinates the coordinate for this road) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setGridPaneCoordinates\(Coordinate gridPaneCoordinates\) {) p n
(        gridPaneCoordinates = gridPaneCoordinates;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the resize factor for this road) N
(     * @return the resize factor for this road) N
(     */) N
(    ) p
(public) K
( ResizeFactor getResizeFactor\(\) {) p n
(        ) S
(return) K
( resizeFactor;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the resize factor for this road) N
(     * @param resizeFactor the resize factor to set for this road) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setResizeFactor\(ResizeFactor resizeFactor\) {) p n
(        this.resizeFactor = resizeFactor;) N
(    }) N
() N
(    ) S
(/**) C n
(     * This method draws the road and returns the StackPane representation of th) N
(is road. Each cell has a road background) N
(     * image. Each cell also contains an arrow that displays the moving directio) N
(n of that cell.) N
(     * @return the StackPane representation of this road cell) N
(     */) N
(    ) p
(public) K
( StackPane drawRoad\(\) {) p n
() N
(        String roadBackgroundPath = ") S
(RoadBackground.png) str
(";) p n
() N
(        Image image = ) S
(new) K
( Image\(roadBackgroundPath\);) p n
() N
(        Image im = ) S
(new) K
( Image\(roadBackgroundPath, image.getHeight\(\) * getResizeFa) p n
(ctor\(\).getResizeX\(\), image.getWidth\(\) * getResizeFactor\(\).getResizeY\(\), ) S
(false) k
(, ) p
(f) k n
(alse) S
(\);) p n
() N
(        ImageView iv = ) S
(new) K
( ImageView\(im\);) p n
() N
(        StackPane stackPane = ) S
(new) K
( StackPane\(\);) p n
() N
(        ) S
(//draw amount of lines) c n
(RoadGUIDecorator.java) (Page 2/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (128/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 129
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        Group arrowLines = ) p
(new) K
( Group\(\);) p n
() N
(        ) S
(int) k
( numberLanes = this.getNumberLanes\(\);) p n
() N
(        ArrayList<Lane> lanes = this.getLanes\(\);) N
() N
(        ) S
(double) k
( division = im.getHeight\(\);) p n
() N
(        division = division / \(numberLanes * 2\);) N
() N
(        LaneArrow arrow;) N
() N
(        ) S
(int) k
( j = 0;) p n
() N
(        ) S
(if) K
( \(!this.runsVertically\(lanes.get\(0\).getMovingDirection\(\)\)\) {) p n
(            ) S
(for) K
( \() p
(int) k
( i = 0; i < numberLanes * 2; i++\) {) p n
(                ) S
(if) K
( \(i % 2 == 0\) {) p n
() N
(                    Lane lane = lanes.get\(j\);) N
() N
(                    ) S
(double) k
( lineStartX = 5;) p n
(                    ) S
(double) k
( lineStartY = division * \(i + 1\);) p n
() N
(                    ) S
(double) k
( lineEndX = im.getWidth\(\) - 10;) p n
(                    ) S
(double) k
( lineEndY = division * \(i + 1\);) p n
() N
(                    Line roadLine = ) S
(new) K
( Line\(lineStartX, lineStartY, lineEndX, l) p n
(ineEndY\);) N
() N
(                    arrow = ) S
(new) K
( LaneArrow\(lane,roadLine,resizeFactor\);) p n
() N
(                    arrowLines.getChildren\(\).addAll\(arrow.getGroup\(\)\);) N
() N
(                    j++;) N
() N
(                }) N
(            }) N
(        } ) S
(else) K n
(            ) p
(for) K
( \() p
(int) k
( i = 0; i < numberLanes * 2; i++\) {) p n
() N
(                ) S
(if) K
( \(i % 2 == 0\) {) p n
() N
(                    Lane lane = lanes.get\(j\);) N
() N
(                    ) S
(double) k
( lineStartX = division * \(i + 1\);) p n
(                    ) S
(double) k
( lineStartY = 5;) p n
(                    ) S
(double) k
( lineEndX = division * \(i + 1\);) p n
(                    ) S
(double) k
( lineEndY = im.getHeight\(\) - 10;) p n
() N
(                    Line roadLine = ) S
(new) K
( Line\(lineStartX, lineStartY, lineEndX, l) p n
(ineEndY\);) N
() N
(                    arrow = ) S
(new) K
( LaneArrow\(lane,roadLine,resizeFactor\);) p n
(                    arrowLines.getChildren\(\).addAll\(arrow.getGroup\(\)\);) N
() N
(                    j++;) N
() N
(                }) N
(            }) N
(RoadGUIDecorator.java) (Page 3/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (129/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 130
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        stackPane.getChildren\(\).add\(iv\);) N
(        stackPane.getChildren\(\).add\(arrowLines\);) N
() N
(        ) S
(return) K
( stackPane;) p n
(    }) N
(}) S
(RoadGUIDecorator.java) (Page 4/4) (Mar 24, 16 15:51) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (130/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 131
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(package) K
( londonsw.view.simulation;) p n
() N
() N
(import) K
( javafx.application.Platform;) p n
(import) K
( javafx.beans.value.ChangeListener;) p n
(import) K
( javafx.beans.value.ObservableValue;) p n
(import) K
( javafx.fxml.FXMLLoader;) p n
(import) K
( javafx.geometry.Insets;) p n
(import) K
( javafx.geometry.Pos;) p n
(import) K
( javafx.scene.Parent;) p n
(import) K
( javafx.scene.Scene;) p n
(import) K
( javafx.scene.control.*;) p n
(import) K
( javafx.scene.layout.*;) p n
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.scene.text.Font;) p n
(import) K
( javafx.scene.text.TextAlignment;) p n
(import) K
( javafx.stage.Stage;) p n
(import) K
( londonsw.controller.StartUpController;) p n
(import) K
( londonsw.controller.TrafficLightController;) p n
(import) K
( londonsw.controller.VehicleController;) p n
(import) K
( londonsw.model.simulation.Map;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
(import) K
( londonsw.model.simulation.components.ResizeFactor;) p n
(import) K
( javafx.scene.text.FontWeight;) p n
(import) K
( londonsw.model.simulation.components.Lane;) p n
(import) K
( londonsw.model.simulation.components.Road;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Ambulance;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Car;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
(import) K
( rx.Subscriber;) p n
() N
(import) K
( java.io.IOException;) p n
(import) K
( java.util.ArrayList;) p n
(import) K
( java.util.Optional;) p n
(import) K
( java.util.Random;) p n
() N
() N
(@SuppressWarnings\(") S
(Duplicates) str
("\)) p n
(public) K
( ) p
(class) K
( ) p
(SimulationScreen) L
( {) p n
() N
(    ) S
(private) K
( Map map;) p n
(    ) S
(private) K
( ) p
(int) k
( initCar = 0;) p n
(    ) S
(private) K
( ) p
(int) k
( flag = 0;) p n
(    ) S
(private) K
( ) p
(int) k
( systemState = 0;) p n
(    ) S
(private) K
( ) p
(int) k
( maxCarSize;) p n
(    Subscriber<Long> timeLabelSubscriber;) N
(    Label carNumberSituation;) N
(    Label timeStanding;) N
() N
(    ) S
(public) K
( SimulationScreen\(Map map\) {) p n
(        this.map = map;) N
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( drawScreen\(Stage primaryStage\) ) p
(throws) K
( Exception {) p n
(        ) S
(// the entire screen building and logic will go here) c n
(        ) p
(// http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm) c n
() p n
(        BorderPane borderPane = ) S
(new) K
( BorderPane\(\);) p n
(SimulationScreen.java) (Page 1/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (131/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 132
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        borderPane.setStyle\(") p
(-fx-background-color:papayawhip) str
("\);) p n
() N
(        ) S
(//Title) c n
(        Label logo = ) p
(new) K
( Label\(") p
(LondonSW Traffic Simulation) str
("\);) p n
(        logo.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.EXTRA_BOLD, 20\)\);) p n
(        logo.setAlignment\(Pos.CENTER\);) N
(        logo.setTextAlignment\(TextAlignment.CENTER\);) N
(        logo.setPadding\() S
(new) K
( Insets\(10, 10, 10, 10\)\);) p n
(        borderPane.setTop\(logo\);) N
() N
(        ) S
(//Map) c n
(        StackPane mapStackPane = ) p
(new) K
( StackPane\(\);) p n
(        Map map = this.map;) N
(        MapGridGUIDecorator mapGridGUIDecorator = ) S
(new) K
( MapGridGUIDecorator\(map.ge) p n
(tGrid\(\)\);) N
(        ResizeFactor rf = ResizeFactor.getSuggestedResizeFactor\(map.getWidth\(\), ) N
(map.getHeight\(\)\);) N
(        mapGridGUIDecorator.setResizeFactor\(rf\);) N
(        GridPane mapGridPane = mapGridGUIDecorator.drawComponents\(\);) N
(        mapStackPane.setPadding\() S
(new) K
( Insets\(0, 0, 5, 5\)\);) p n
() N
(        mapStackPane.getChildren\(\).add\(mapGridPane\);) N
(        borderPane.setCenter\(mapStackPane\);) N
() N
(        ) S
(//Start&Reset) c n
(        VBox simulationControl = ) p
(new) K
( VBox\(\);) p n
() N
(        simulationControl.setPadding\() S
(new) K
( Insets\(0,10,10,10\)\);) p n
(        simulationControl.setSpacing\(8\);) N
(        simulationControl.setAlignment\(Pos.TOP_CENTER\);) N
() N
(        carNumberSituation = ) S
(new) K
( Label\(\);) p n
(        carNumberSituation.setFont\(Font.font\(") S
(System Bold Italic) str
(",FontWeight.BOLD,13\)) p n
(\);) N
(        carNumberSituation.setText\(") S
(Number of cars: ) str
(" + String.valueOf\(initCar\)\);) p n
(        simulationControl.getChildren\(\).add\(carNumberSituation\);) N
() N
(        Label tickerSituation = ) S
(new) K
( Label\(\);) p n
(        tickerSituation.setFont\(Font.font\(") S
(System Bold Italic) str
(",FontWeight.BOLD,13\)\);) p n
(        tickerSituation.setText\(") S
(Ticker Interval: ) str
(" + Ticker.getTickInterval\(\) + ") p
( ms) str
(") p n
(\);) N
(        simulationControl.getChildren\(\).add\(tickerSituation\);) N
() N
(        Label trafficLightLabel = ) S
(new) K
( Label\(\);) p n
(        trafficLightLabel.setFont\(Font.font\(") S
(System Bold Italic) str
(",FontWeight.BOLD,13\)\)) p n
(;) N
(        trafficLightLabel.setText\(") S
(Traffic Light Duration: ) str
(" + TrafficLightController.ge) p n
(tInstance\(\).getDurationLength\(\)/1000 + ") S
( ticks) str
("\);) p n
(        simulationControl.getChildren\(\).add\(trafficLightLabel\);) N
() N
(        Label timeLabel = ) S
(new) K
( Label\(\);) p n
(        timeLabel.setFont\(Font.font\(") S
(System Bold Italic) str
(",FontWeight.BOLD,13\)\);) p n
(        timeLabel.setText\(") S
(Times ticked: 0) str
("\);) p n
(        simulationControl.getChildren\(\).add\(timeLabel\);) N
() N
(        timeStanding = ) S
(new) K
( Label\(\);) p n
(        timeStanding.setFont\(Font.font\(") S
(System Bold Italic) str
(",FontWeight.BOLD,13\)\);) p n
(        timeStanding.setText\(") S
(Vehicle Time Spent Standing: 0.0%) str
("\);) p n
(        simulationControl.getChildren\(\).add\(timeStanding\);) N
(SimulationScreen.java) (Page 2/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (132/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 133
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        Button startSimulation = ) S
(new) K
( Button\(") p
(Start) str
("\);) p n
(        startSimulation.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\)) p n
(;) N
(        startSimulation.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
() N
(        Button resetSimulation = ) S
(new) K
( Button\(") p
(Reset) str
("\);) p n
(        resetSimulation.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\)) p n
(;) N
(        resetSimulation.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
() N
(        Button backButton = ) S
(new) K
( Button\(") p
(Back) str
("\);) p n
(        backButton.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 16\)\);) p n
(        backButton.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
() N
(        startSimulation.setPadding\() S
(new) K
( Insets\(10, 10, 10, 10\)\);) p n
(        startSimulation.setPrefSize\(90, 30\);) N
(        simulationControl.getChildren\(\).add\(startSimulation\);) N
() N
(        resetSimulation.setPadding\() S
(new) K
( Insets\(10, 10, 10, 10\)\);) p n
(        resetSimulation.setPrefSize\(90, 30\);) N
(        simulationControl.getChildren\(\).add\(resetSimulation\);) N
(        resetSimulation.setDisable\() S
(true) k
(\);) p n
() N
(        Button ambulanceAddDelete = ) S
(new) K
( Button\(") p
(Add Ambulance) str
("\);) p n
(        ambulanceAddDelete.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 1) p n
(3\)\);) N
(        ambulanceAddDelete.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        ambulanceAddDelete.setPrefSize\(200, 30\);) N
(        ambulanceAddDelete.setDisable\() S
(true) k
(\);) p n
(        simulationControl.getChildren\(\).add\(ambulanceAddDelete\);) N
() N
(        Button trafficLightInterval = ) S
(new) K
( Button\(") p
(Set Traffic Light Duration) str
("\);) p n
(        trafficLightInterval.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD,) p n
( 13\)\);) N
(        trafficLightInterval.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        trafficLightInterval.setPrefSize\(200, 30\);) N
(        simulationControl.getChildren\(\).add\(trafficLightInterval\);) N
() N
(        Button enableDisableLights = ) S
(new) K
( Button\(") p
(Disable Traffic Lights) str
("\);) p n
(        enableDisableLights.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, ) p n
(13\)\);) N
(        enableDisableLights.setStyle\(") S
(-fx-base:Gold) str
("\);) p n
(        enableDisableLights.setPrefSize\(200, 30\);) N
(        simulationControl.getChildren\(\).add\(enableDisableLights\);) N
() N
(        Label instructions = ) S
(new) K
( Label\(") p
(Click on the lane arrows to\\nenable and disable lanes.) str
("\);) p n
(        instructions.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\);) p n
(        instructions.setPadding\() S
(new) K
( Insets\(5,0,0,0\)\);) p n
(        simulationControl.getChildren\(\).add\(instructions\);) N
() N
(        ) S
(//carSlider) c n
(        VBox sliderControl = ) p
(new) K
( VBox\(\);) p n
(        sliderControl.setPadding\() S
(new) K
( Insets\(10, 10, 5, 10\)\);) p n
(        Pane carLabel = ) S
(new) K
( Pane\(\);) p n
(        Label carNumber = ) S
(new) K
( Label\(") p
(Car Number) str
("\);) p n
(        carNumber.setFont\(Font.font\(") S
(System Bold Italic) str
(", FontWeight.BOLD, 13\)\);) p n
(        carLabel.getChildren\(\).add\(carNumber\);) N
(        sliderControl.getChildren\(\).add\(carLabel\);) N
(SimulationScreen.java) (Page 3/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (133/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 134
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        Pane carSlider = ) S
(new) K
( Pane\(\);) p n
(        carSlider.setPadding\() S
(new) K
( Insets\(10,10,10,10\)\);) p n
(        Slider slider = ) S
(new) K
( Slider\(\);) p n
(        ) S
(int) k
( maxSize = determineMaxCarSize\(map\);) p n
(        slider.setPrefWidth\(250\);) N
(        slider.setMax\(maxSize\);) N
(        slider.setMin\(1\);) N
(        slider.setDisable\() S
(true) k
(\);) p n
(        slider.setShowTickMarks\() S
(true) k
(\);) p n
(        ) S
(if) K
(\(maxSize <= 20\) {) p n
(            slider.setMajorTickUnit\(5\);) N
(            slider.setMinorTickCount\(2\);) N
(            slider.setBlockIncrement\(1\);) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(maxSize <= 50\) {) p n
(            slider.setMajorTickUnit\(10\);) N
(            slider.setMinorTickCount\(4\);) N
(            slider.setBlockIncrement\(1\);) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(maxSize <= 100\) {) p n
(            slider.setMajorTickUnit\(20\);) N
(            slider.setMinorTickCount\(10\);) N
(            slider.setBlockIncrement\(1\);) N
(        }) N
(        ) S
(else) K
( {) p n
(            slider.setMajorTickUnit\(20\);) N
(            slider.setMinorTickCount\(2\);) N
(            slider.setBlockIncrement\(1\);) N
(        }) N
() N
(        carSlider.getChildren\(\).add\(slider\);) N
(        sliderControl.getChildren\(\).add\(carSlider\);) N
(        simulationControl.getChildren\(\).add\(sliderControl\);) N
(        simulationControl.getChildren\(\).add\(backButton\);) N
(        borderPane.setRight\(simulationControl\);) N
(        borderPane.setPickOnBounds\() S
(false) k
(\);) p n
() N
() N
(        ) S
(/**) C n
(         * Back to ChooseSimulationMode Screen) N
(         */) N
(        backButton.setOnMouseClicked\(click->{) p n
(            ArrayList<Vehicle> vehicles = VehicleController.getVehicleList\(\);) N
(            ) S
(int) k
( size = vehicles.size\(\);) p n
(            ) S
(for) K
(\() p
(int) k
( i = 0; i < size; i++\) {) p n
(                VehicleController.removeVehicle\(0\);) N
(            }) N
(            Ticker.end\(\);) N
(            StartUpController.getInstance\(\).goToChooseModeScreen\(primaryStage\);) N
(            primaryStage.centerOnScreen\(\);) N
(            primaryStage.setResizable\() S
(false) k
(\);) p n
() N
(        }\);) N
() N
(        ) S
(/**) C n
(         * Allows the user to change the traffic light interval) N
(         */) N
(        trafficLightInterval.setOnMouseClicked\(click -> {) p n
(SimulationScreen.java) (Page 4/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (134/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 135
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            Dialog<Long> dialog = ) p
(new) K
( Dialog<Long>\(\);) p n
(            dialog.setTitle\(") S
(Choose Traffic Light Duration) str
("\);) p n
(            dialog.setHeaderText\(") S
(Choose a duration \(in time ticks\) for\\nthe traffic lights in the system.) str
() p n
("\);) N
(            dialog.setGraphic\() S
(null) k
(\);) p n
(            dialog.getDialogPane\(\).getButtonTypes\(\).addAll\(ButtonType.OK, Button) N
(Type.CANCEL\);) N
(            GridPane grid = ) S
(new) K
( GridPane\(\);) p n
(            grid.setHgap\(10\);) N
(            grid.setVgap\(10\);) N
(            grid.setPadding\() S
(new) K
( Insets\(20, 80, 10, 10\)\);) p n
(            grid.add\() S
(new) K
( Label\(") p
(Duration:) str
("\), 0, 0\);) p n
(            Spinner<Double> spinner = ) S
(new) K
( Spinner<Double>\(1, 20, TrafficLightCon) p n
(troller.getInstance\(\).getDurationLength\(\)/1000, 1\);) N
(            grid.add\(spinner, 1, 0\);) N
(            dialog.getDialogPane\(\).setContent\(grid\);) N
(            Platform.runLater\(\(\) -> spinner.requestFocus\(\)\);) N
() N
(            dialog.setResultConverter\(dialogButton -> {) N
(                ) S
(if) K
(\(dialogButton == ButtonType.OK\) {) p n
(                    ) S
(double) k
( value =  spinner.getValue\(\);) p n
(                    value *= 1000;) N
(                    ) S
(return) K
( \() p
(long) k
(\) value;) p n
(                }) N
(                ) S
(return) K
( ) p
(null) k
(;) p n
(            }\);) N
() N
(            Optional<Long> result = dialog.showAndWait\(\);) N
(            result.ifPresent\(\(aLong -> {) N
(                TrafficLightController.getInstance\(\).setDurationLength\(aLong\);) N
(                TrafficLightController.getInstance\(\).setTrafficLightDuration\(aLo) N
(ng\);) N
(                trafficLightLabel.setText\(") S
(Traffic Light Duration: ) str
(" + TrafficLightContr) p n
(oller.getInstance\(\).getDurationLength\(\)/1000 + ") S
( ticks) str
("\);) p n
(            }\)\);) N
() N
(        }\);) N
() N
(        ) S
(/**) C n
(         * Functionality for enabling and disabling the traffic lights) N
(         */) N
(        enableDisableLights.setOnMouseClicked\(click -> {) p n
(            ) S
(if) K
(\(TrafficLightController.getInstance\(\).areLightsEnabled\(\)\) {) p n
(                ) S
(// disable the lights!) c n
(                TrafficLightController.getInstance\(\).disableLights\() p
(true) k
(\);) p n
(                enableDisableLights.setText\(") S
(Enable Traffic Lights) str
("\);) p n
(                trafficLightLabel.setText\(") S
(Traffic Light Duration: DISABLED) str
("\);) p n
(            }) N
(            ) S
(else) K
( {) p n
(                ) S
(// enable the lights!) c n
(                TrafficLightController.getInstance\(\).disableLights\() p
(false) k
(\);) p n
(                enableDisableLights.setText\(") S
(Disable Traffic Lights) str
("\);) p n
(                trafficLightLabel.setText\(") S
(Traffic Light Duration: ) str
(" + TrafficLightContr) p n
(oller.getInstance\(\).getDurationLength\(\)/1000 + ") S
( ticks) str
("\);) p n
(            }) N
(        }\);) N
() N
(        ) S
(/**) C n
(         * Using a slider control the number of cars in the system) N
(SimulationScreen.java) (Page 5/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (135/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 136
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(         */) C n
(        slider.valueProperty\(\).addListener\() p
(new) K
( ChangeListener<Number>\(\) {) p n
(            @Override) N
(            ) S
(public) K
( ) p
(void) k
( changed\(ObservableValue<? ) p
(extends) K
( Number> observable, Nu) p n
(mber oldValue, Number newValue\) {) N
(                initCar = oldValue.intValue\(\);) N
(                ) S
(int) k
( newCar = newValue.intValue\(\) - oldValue.intValue\(\);) p n
() N
(                ) S
(//increase carNumber) c n
(                ) p
(if) K
( \(newCar >= 0\) {) p n
(                    ) S
(for) K
( \() p
(int) k
( i = 0; i < newCar; i++\) {) p n
(                        generateCar\(map, mapGridGUIDecorator, mapStackPane\);) N
(                    }) N
(                }) N
(                ) S
(//decrease carNumber) c n
(                ) p
(else) K
( {) p n
(                    ) S
(int) k
( toDelete = newCar * -1;) p n
(                    ) S
(for) K
(\() p
(int) k
( i = 0; i < toDelete; i++\) {) p n
(                        ArrayList<Vehicle> vehicles = VehicleController.getVehic) N
(leList\(\);) N
(                        ) S
(if) K
(\(vehicles.size\(\) == 0\) ) p
(return) K
(;) p n
(                        Random rand = ) S
(new) K
( Random\(\);) p n
(                        ) S
(int) k
( min = 0;) p n
(                        ) S
(int) k
( max = vehicles.size\(\);) p n
(                        ) S
(int) k
( randomIndex = rand.nextInt\(\(max - min\)\) + min;) p n
(                        ) S
(while) K
(\(vehicles.get\(randomIndex\) ) p
(instanceof) K
( Ambulance\) {) p n
(                            randomIndex = rand.nextInt\(\(max - min\)\) + min;) N
(                        }) N
(                        VehicleController.removeVehicle\(randomIndex\);) N
(                    }) N
(                }) N
(                ArrayList<Vehicle> vehicles = VehicleController.getVehicleList\(\)) N
(;) N
(                carNumberSituation.setText\(") S
(Number of cars: ) str
(" + vehicles.size\(\)\);) p n
(            }) N
(        }\);) N
() N
(        ) S
(/**) C n
(         * "Add/Delete Ambulance" Button click control) N
(         * the first click adds an ambulance in the system, the next click will ) N
(delete the ambulance, next add...) N
(         */) N
(        ambulanceAddDelete.setOnMouseClicked\(click -> {) p n
(            ) S
(if) K
( \(flag == 0\) {) p n
(                generateAmbulance\(map, mapGridGUIDecorator, mapStackPane\);) N
(                ambulanceAddDelete.setText\(") S
(Delete Ambulance) str
("\);) p n
(                flag = 1;) N
(            } ) S
(else) K
( {) p n
(                flag = 0;) N
(                ArrayList<Vehicle> vehicles = VehicleController.getVehicleList\(\)) N
(;) N
(                ) S
(for) K
( \() p
(int) k
( i = 0; i < vehicles.size\(\); i++\) {) p n
(                    ) S
(if) K
( \(vehicles.get\(i\).getVehiclePriority\(\) == 5\) {) p n
(                        VehicleController.removeVehicle\(i\);) N
(                    }) N
(                }) N
(                ambulanceAddDelete.setText\(") S
(Add Ambulance) str
("\);) p n
(            }) N
(            carNumberSituation.setText\(") S
(Number of cars: ) str
(" + VehicleController.getVeh) p n
(SimulationScreen.java) (Page 6/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (136/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (7) 137
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(icleList\(\).size\(\)\);) p n
(        }\);) N
() N
(        Scene scene = ) S
(new) K
( Scene\(borderPane\);) p n
() N
(        primaryStage.setScene\(scene\);) N
(        primaryStage.centerOnScreen\(\);) N
() N
(        ) S
(/**) C n
(         * Starts the simulation) N
(         */) N
(        startSimulation.setOnMouseClicked\(click->{) p n
(            systemState = 1;) N
(            ambulanceAddDelete.setDisable\() S
(false) k
(\);) p n
(            slider.setDisable\() S
(false) k
(\);) p n
(            initCar = \() S
(int) k
(\) slider.getValue\(\);) p n
(            carNumberSituation.setText\(") S
(Number of cars: ) str
(" + initCar\);) p n
() N
(            ) S
(for) K
( \() p
(int) k
( i = 0; i < initCar; i++\) {) p n
(                generateCar\(map, mapGridGUIDecorator, mapStackPane\);) N
(            }) N
() N
(            startSimulation.setDisable\() S
(true) k
(\);) p n
(            resetSimulation.setDisable\() S
(false) k
(\);) p n
() N
(            Platform.runLater\(\(\) -> slider.requestFocus\(\)\);) N
(            startTimeLabelTicker\(timeLabel\);) N
(        }\);) N
() N
() N
(        ) S
(/**) C n
(         * To stop simulation) N
(         */) N
(        resetSimulation.setOnMouseClicked\(click -> {) p n
(            systemState = 0;) N
(            slider.setDisable\() S
(true) k
(\);) p n
(            startSimulation.setDisable\() S
(false) k
(\);) p n
(            resetSimulation.setDisable\() S
(true) k
(\);) p n
(            ambulanceAddDelete.setText\(") S
(Add Ambulance) str
("\);) p n
(            ambulanceAddDelete.setDisable\() S
(true) k
(\);) p n
() N
(            ) S
(//reset lanes to enabled //TODO) c n
() p n
(            ArrayList<Vehicle> vehicles = VehicleController.getVehicleList\(\);) N
(            ) S
(int) k
( size = vehicles.size\(\);) p n
(            ) S
(for) K
(\() p
(int) k
( i = 0; i < size; i++\) {) p n
(                VehicleController.removeVehicle\(0\);) N
(            }) N
(            carNumberSituation.setText\(") S
(Number of cars: ) str
(" + VehicleController.getVeh) p n
(icleList\(\).size\(\)\);) N
(            Platform.runLater\(\(\) -> startSimulation.requestFocus\(\)\);) N
(            endTimeLabelTicker\(\);) N
(            timeLabel.setText\(") S
(Times ticked: 0) str
("\);) p n
(            timeStanding.setText\(") S
(Vehicle Time Spent Standing: 0.0%) str
("\);) p n
(        }\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Creates a subscriber that listens to the ticker to update the "times tick) N
(SimulationScreen.java) (Page 7/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (137/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (8) 138
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(ed" label) C n
(     * @param timeLabel the label to update on every tick) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( startTimeLabelTicker\(Label timeLabel\) {) p n
(        timeLabelSubscriber = ) S
(new) K
( Subscriber<Long>\(\) {) p n
(            ) S
(int) k
( timesTicked = 0;) p n
(            @Override) N
(            ) S
(public) K
( ) p
(void) k
( onCompleted\(\) {) p n
() N
(            }) N
() N
(            @Override) N
(            ) S
(public) K
( ) p
(void) k
( onError\(Throwable throwable\) {) p n
() N
(            }) N
() N
(            @Override) N
(            ) S
(public) K
( ) p
(void) k
( onNext\(Long aLong\) {) p n
(                timeLabel.setText\(") S
(Times ticked: ) str
(" + timesTicked\);) p n
(                timesTicked++;) N
(                carNumberSituation.setText\(") S
(Number of cars: ) str
(" + VehicleController.ge) p n
(tVehicleList\(\).size\(\)\);) N
(                timeStanding.setText\(") S
(Vehicle Time Spent Standing: ) str
(" + getPercentageStan) p n
(ding\(\) + ") S
(%) str
("\);) p n
(            }) N
(        };) N
(        Ticker.subscribe\(timeLabelSubscriber\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Stops the time ticker label from listening to the ticker) N
(     */) N
(    ) p
(private) K
( ) p
(void) k
( endTimeLabelTicker\(\) {) p n
(        timeLabelSubscriber.unsubscribe\(\);) N
(    }) N
() N
(    ) S
(private) K
( ) p
(double) k
( getPercentageStanding\(\) {) p n
(        ) S
(int) k
( timeSpentStanding = VehicleController.getTotalTimeSpentStanding\(\);) p n
(        ) S
(int) k
( totalTimesTicked = VehicleController.getTotalTimesTicked\(\);) p n
(        ) S
(if) K
(\(totalTimesTicked == 0\) {) p n
(            ) S
(return) K
( 0.0;) p n
(        }) N
(        ) S
(double) k
( ans = \() p
(double) k
(\) timeSpentStanding / totalTimesTicked * 100;) p n
(        ) S
(return) K
( Math.round\(ans * 100.0\) / 100.0;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Determines the maximum number of cars that should go in the system) N
(     * @param map the map the simulation is happening on) N
(     * @return an upper bound on the number of cars that should be in the system) N
(     */) N
(    ) p
(public) K
( ) p
(int) k
( determineMaxCarSize\(Map map\){) p n
(        ) S
(int) k
( numberSlots = 0;) p n
(        ArrayList<Road> roads = map.getRoads\(\);) N
(        ) S
(for) K
(\(Road i:roads\){) p n
(            ArrayList<Lane> lanes = i.getLanes\(\);) N
(            ) S
(for) K
(\(Lane l:lanes\){) p n
(                numberSlots += l.getLength\(\);) N
(            }) N
(SimulationScreen.java) (Page 8/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (138/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (9) 139
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(        }) p n
(        maxCarSize = \() S
(int) k
(\)\(0.6 * numberSlots\);) p n
(        ) S
(return) K
( maxCarSize;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Car generator) N
(     * @param map) N
(     * @param mapGridGUIDecorator) N
(     * @param sp) N
(     * @return) N
(     */) N
(    ) p
(public) K
( Car generateCar\(Map map, MapGridGUIDecorator mapGridGUIDecorator, Sta) p n
(ckPane sp\) {) N
(        Lane L1 = map.getRandomLane\(\);) N
(        ) S
(if) K
( \(L1 != ) p
(null) k
(\) {) p n
(            ) S
(for) K
( \() p
(int) k
( a = 0; a < map.getRoads\(\).size\(\); a++\) {) p n
(                ) S
(for) K
( \() p
(int) k
( b = 0; b < map.getRoads\(\).get\(a\).getNumberLanes\(\); b++\)) p n
( {) N
(                    Lane L2 = map.getRoads\(\).get\(a\).getLanes\(\).get\(b\);) N
(                    ) S
(for) K
( \() p
(int) k
( i = 0; i < L1.getLength\(\); i++\) {) p n
(                        ) S
(if) K
( \(L1.isCellEmpty\(i\)\) {) p n
(                            Car C1 = ) S
(new) K
( Car\(i, L1\);) p n
(                            ) S
(//C1.setVehicleBehavior\(VehicleBehavior.AGGRESSIVE\);) c n
(                            VehicleGUIDecorator vehicleGUIDecorator = ) p
(new) K
( Vehicl) p n
(eGUIDecorator\(C1\);) N
(                            vehicleGUIDecorator.setResizeFactor\(mapGridGUIDecora) N
(tor.getResizeFactor\(\)\);) N
(                            vehicleGUIDecorator.drawCar\(\);) N
(                            Pane carPane = ) S
(new) K
( Pane\(\);) p n
() N
(                            carPane.setPickOnBounds\() S
(false) k
(\); ) p
(//allows me to click) c n
( intersections) N
() p n
(                            carPane.getChildren\(\).add\(vehicleGUIDecorator.getRec) N
(tangle\(\)\);) N
(                            sp.getChildren\(\).add\(carPane\);) N
(                            vehicleGUIDecorator.setPane\(carPane\);) N
(                            vehicleGUIDecorator.setVehicleState\(1\);) N
(                            ) S
(return) K
( C1;) p n
() N
(                        }) N
(                    }) N
(                }) N
(            }) N
(        }) N
(        ) S
(return) K
( ) p
(null) k
(;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Ambulance generator) N
(     * @param map) N
(     * @param mapGridGUIDecorator) N
(     * @param sp) N
(     * @return) N
(     */) N
(    ) p
(public) K
( Ambulance generateAmbulance\(Map map, MapGridGUIDecorator mapGridGUIDe) p n
(corator, StackPane sp\) {) N
(        Lane AmbLane = map.getRandomLane\(\);) N
(SimulationScreen.java) (Page 9/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (139/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (10) 140
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
(        ) S
(if) K
( \(AmbLane != ) p
(null) k
( && \(!AmbLane.isFull\(\)\)\) {) p n
(            ) S
(for) K
( \() p
(int) k
( x = 0; x < map.getRoads\(\).size\(\); x++\) {) p n
(                ) S
(for) K
( \() p
(int) k
( y = 0; y < map.getRoads\(\).get\(x\).getNumberLanes\(\); y++\)) p n
( {) N
(                    AmbLane = map.getRandomLane\(\);) N
(                    ) S
(for) K
( \() p
(int) k
( z = 0; z < AmbLane.getLength\(\); z++\) {) p n
(                        ) S
(if) K
( \(AmbLane.isCellEmpty\(z\)\) {) p n
(                            Ambulance A = ) S
(new) K
( Ambulance\(z, AmbLane\);) p n
(                            VehicleGUIDecorator ambulanceGUIDecorator = ) S
(new) K
( Vehi) p n
(cleGUIDecorator\(A\);) N
(                            ambulanceGUIDecorator.setResizeFactor\(mapGridGUIDeco) N
(rator.getResizeFactor\(\)\);) N
(                            ambulanceGUIDecorator.setColor\(Color.RED\);) N
(                            ambulanceGUIDecorator.drawCar\(\);) N
(                            Pane alPane = ) S
(new) K
( Pane\(\);) p n
(                            alPane.setPickOnBounds\() S
(false) k
(\);) p n
(                            alPane.getChildren\(\).add\(ambulanceGUIDecorator.getRe) N
(ctangle\(\)\);) N
(                            ambulanceGUIDecorator.setPane\(alPane\);) N
(                            sp.getChildren\(\).add\(alPane\);) N
(                            ambulanceGUIDecorator.setVehicleState\(1\);) N
(                            ) S
(return) K
( A;) p n
() N
(                        }) N
(                    }) N
() N
(                }) N
() N
(            }) N
(        }) N
(        ) S
(return) K
( ) p
(null) k
(;) p n
(    }) N
(}) S
(SimulationScreen.java) (Page 10/10) (Mar 25, 16 9:03) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (140/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 141
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.scene.shape.Circle;) p n
(import) K
( londonsw.controller.TrafficLightController;) p n
(import) K
( londonsw.model.simulation.components.LightColour;) p n
(import) K
( londonsw.model.simulation.components.TrafficLight;) p n
() N
(import) K
( java.io.Serializable;) p n
() N
(/**) C n
( * Traffic Light GUI Logic is implemented here. One instance of this class is as) N
(sociated with exactly one instance) N
( * of a TrafficLight.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(TrafficLightDecorator) L
( ) p
(implements) K
( Serializable {) p n
() N
(    ) S
(private) K
( ) p
(static) K
( ) p
(final) K
( ) p
(long) k
( serialVersionUID = 8123065437897754089L;) p n
(    ) S
(private) K
( TrafficLight thisLight;) p n
(    ) S
(private) K
( Circle circle;) p n
() N
(    ) S
(/**) C n
(     * Creates a new instance of the TrafficLightDecorator for the GUI.) N
(     * @param thisLight the instance of a TrafficLight that this decorator is fo) N
(r) N
(     */) N
(    ) p
(public) K
( TrafficLightDecorator\(TrafficLight thisLight\) {) p n
(        this.thisLight = thisLight;) N
(        circle = ) S
(new) K
( Circle\(\);) p n
(        TrafficLightController.getInstance\(\).addTrafficLightAndDecoratorPair\(thi) N
(sLight, ) S
(this) k
(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * This gets called by the controller to set the color of the circle of the ) N
(traffic light gui) N
(     * @param colour) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setGUIColour\(LightColour colour\) {) p n
(        ) S
(switch) K
( \(colour\) {) p n
(            ) S
(case) K
( RED:) p n
(                circle.setFill\(Color.RED\);) N
(                ) S
(break) K
(;) p n
() N
(            ) S
(case) K
( GREEN:) p n
(                circle.setFill\(Color.GREEN\);) N
(                ) S
(break) K
(;) p n
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Returns the circle associated with this decorator) N
(     * @return circle for this traffic light) N
(     */) N
(    ) p
(public) K
( Circle getCircle\(\) {) p n
(        ) S
(return) K
( circle;) p n
(    }) N
() N
(    ) S
(/**) C n
(TrafficLightDecorator.java) (Page 1/2) (Mar 24, 16 20:55) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (141/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 142
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(     * Hides the circle representing the traffic light from the GUI. This is cal) C n
(led when enabling and disabling) N
(     * traffic lights.) N
(     * @param hide true will hide the circle, false will display the circle) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( hideCircle\() p
(boolean) k
( hide\) {) p n
(        ) S
(if) K
(\(hide\)) p n
(            circle.setVisible\() S
(false) k
(\);) p n
(        ) S
(else) K n
(            circle.setVisible\() p
(true) k
(\);) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Draws the circle for the GUI) N
(     * @param x the x-position in its pane) N
(     * @param y the y-position in its pane) N
(     * @param r the radius of the circle) N
(     * @return a new Circle with those properties) N
(     */) N
(    ) p
(public) K
( Circle drawLight\() p
(double) k
( x, ) p
(double) k
( y, ) p
(double) k
( r\){) p n
(        circle.setCenterX\(x\);) N
(        circle.setCenterY\(y\);) N
(        circle.setRadius\(r\);) N
(        circle.setFill\(thisLight.getState\(\) == LightColour.RED? Color.RED : Colo) N
(r.GREEN\);) N
(        ) S
(return) K
( circle;) p n
(    }) N
() N
(}) N
(TrafficLightDecorator.java) (Page 2/2) (Mar 24, 16 20:55) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (142/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 143
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( londonsw.model.simulation.components.Coordinate;) p n
(import) K
( londonsw.model.simulation.components.Lane;) p n
(import) K
( londonsw.model.simulation.components.TrafficLight;) p n
(import) K
( londonsw.model.simulation.components.VehicleBehavior;) p n
(import) K
( londonsw.model.simulation.components.vehicles.IVehicle;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
() N
(import) K
( java.util.ArrayList;) p n
() N
(/**) C n
( * Created by felix on 26/02/2016.) N
( */) N
(public) K
( ) p
(abstract) K
( ) p
(class) K
( ) p
(VehicleDecorator) L
( ) p
(implements) K
( IVehicle {) p n
() N
(    ) S
(protected) K
( Vehicle decoratedVehicle;) p n
() N
(    ) S
(public) K
( VehicleDecorator\(Vehicle decoratedVehicle\) {) p n
(        this.decoratedVehicle = decoratedVehicle;) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Lane getPreviousLane\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getPreviousLane\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setPreviousLane\(Lane previousLane\) {) p n
(        decoratedVehicle.setPreviousLane\(previousLane\);) N
(    }) N
() N
(    ) S
(public) K
( ) p
(void) k
( setPreviousCoordinate\(Coordinate coord\) {) p n
(        decoratedVehicle.setPreviousCoordinate\(coord\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setCurrentCoordinate\(Coordinate currentCoordinate\) {) p n
(        decoratedVehicle.setCurrentCoordinate\(currentCoordinate\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getVehicleLength\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getVehicleLength\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(double) k
( getVehicleSpeed\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getVehicleSpeed\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getVehiclePriority\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getVehiclePriority\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Lane getCurrentLane\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getCurrentLane\(\);) p n
(VehicleDecorator.java) (Page 1/3) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (143/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 144
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getCurrentCell\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getCurrentCell\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getVehicleState\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getVehicleState\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( VehicleBehavior getVehicleBehavior\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getVehicleBehavior\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Coordinate getCurrentCoordinate\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getCurrentCoordinate\(\);) p n
(    }) N
() N
(    ) S
(public) K
( Coordinate getPreviousCoordinate\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getPreviousCoordinate\(\);) p n
(    }) N
() N
() N
(    ) S
(public) K
( Coordinate getStoredCurrentCoordinate\(\) {) p n
(        ) S
(return) K
( decoratedVehicle.getStoredCurrentCoordinate\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehicleLength\() p
(int) k
( vehicleLength\) {) p n
(        decoratedVehicle.setVehicleLength\(vehicleLength\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehicleSpeed\() p
(double) k
( vehicleSpeed\) {) p n
(        decoratedVehicle.setVehicleSpeed\(vehicleSpeed\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehiclePriority\() p
(int) k
( vehiclePriority\) {) p n
(        decoratedVehicle.setVehiclePriority\(vehiclePriority\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setCurrentLane\(Lane currentLane\) ) p
(throws) K
( Exception {) p n
(        decoratedVehicle.setCurrentLane\(currentLane\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setCurrentCell\() p
(int) k
( curCell, Lane currentLane\) ) p
(throws) K
( Exception {) p n
(        decoratedVehicle.setCurrentCell\(curCell,currentLane\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehicleState\() p
(int) k
( vehicleState\) {) p n
(        decoratedVehicle.setVehicleState\(vehicleState\);) N
(VehicleDecorator.java) (Page 2/3) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (144/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 145
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehicleBehavior\(VehicleBehavior vehicleBehavior\) {) p n
(        decoratedVehicle.setVehicleBehavior\(vehicleBehavior\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( moveVehicle\() p
(int) k
( step\) ) p
(throws) K
( Exception {) p n
(        ) S
(return) K
( decoratedVehicle.moveVehicle\(step\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( readTrafficLight\(\) ) p
(throws) K
( Exception {) p n
(        decoratedVehicle.readTrafficLight\(\);) N
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ArrayList<Lane> getLaneOptions\(\) ) p
(throws) K
( Exception {) p n
(        ) S
(return) K
( decoratedVehicle.getLaneOptions\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( Lane chooseLane \(\) ) p
(throws) K
( Exception{) p n
(        ) S
(return) K
( decoratedVehicle.chooseLane\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( vehicleTurn\(Lane l\) ) p
(throws) K
( Exception {) p n
(        ) S
(return) K
( decoratedVehicle.vehicleTurn\(l\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(int) k
( getVehiclePriorityToTurn\(\){) p n
(        ) S
(return) K
( decoratedVehicle.getVehiclePriorityToTurn\(\);) p n
(    }) N
() N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehiclePriorityToTurn\() p
(int) k
( vehiclePriorityToTurn\){) p n
(         decoratedVehicle.setVehiclePriorityToTurn\( vehiclePriorityToTurn\);) N
(    }) N
(    @Override) N
(    ) S
(public) K
( TrafficLight getVehicleTrafficLight\(\){) p n
(        ) S
(return) K
( decoratedVehicle.getVehicleTrafficLight\(\);) p n
(    }) N
(    @Override) N
(    ) S
(public) K
( ) p
(void) k
( setVehicleTrafficLight\(TrafficLight vehicleTrafficLight\){) p n
(        decoratedVehicle.setVehicleTrafficLight\(vehicleTrafficLight\);) N
(    }) N
() N
() N
(}) S
(VehicleDecorator.java) (Page 3/3) (Mar 24, 16 15:52) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (145/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (1) 146
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(package) K
( londonsw.view.simulation;) p n
() N
(import) K
( javafx.animation.*;) p n
(import) K
( javafx.beans.property.DoubleProperty;) p n
(import) K
( javafx.scene.Group;) p n
(import) K
( javafx.scene.layout.GridPane;) p n
(import) K
( javafx.scene.layout.Pane;) p n
(import) K
( javafx.scene.layout.StackPane;) p n
(import) K
( javafx.scene.paint.Color;) p n
(import) K
( javafx.scene.shape.Rectangle;) p n
(import) K
( javafx.util.Duration;) p n
(import) K
( londonsw.controller.VehicleController;) p n
(import) K
( londonsw.model.simulation.Ticker;) p n
(import) K
( londonsw.model.simulation.components.Coordinate;) p n
(import) K
( londonsw.model.simulation.components.MapDirection;) p n
(import) K
( londonsw.model.simulation.components.ResizeFactor;) p n
(import) K
( londonsw.model.simulation.components.vehicles.Vehicle;) p n
() N
(/**) C n
( * This class is to draw vehicles and display them in the GUI. Each vehicle will) N
( have exactly one VehicleGUIDecorator) N
( * associated with it.) N
( */) N
(public) K
( ) p
(class) K
( ) p
(VehicleGUIDecorator) L
( ) p
(extends) K
( VehicleDecorator {) p n
() N
(    ) S
(private) K
( ) p
(double) k
( imageDimension;) p n
(    ) S
(private) K
( Rectangle rectangle;) p n
(    ) S
(private) K
( ResizeFactor resizeFactor;) p n
(    ) S
(private) K
( Color color;) p n
(    ) S
(private) K
( ) p
(double) k
( verticalStartFudgeFactor;) p n
(    ) S
(private) K
( ) p
(double) k
( horizontalStartFudgeFactor;) p n
(    ) S
(private) K
( Pane pane;) p n
() N
(    ) S
(/**) C n
(     * Creates a new instance of this decorator class) N
(     * @param decoratedVehicle the Vehicle to be associated with) N
(     */) N
(    ) p
(public) K
( VehicleGUIDecorator\(Vehicle decoratedVehicle\) {) p n
(        ) S
(super) K
(\(decoratedVehicle\);) p n
(        VehicleController.addVehicleAndDecoratorPair\(decoratedVehicle,) S
(this) k
(\);) p n
(        imageDimension = 100.0;) N
(        verticalStartFudgeFactor = 0;) N
(        horizontalStartFudgeFactor = 0;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the resize factor for this vehicle to display properly) N
(     * @param resizeFactor the resize factor for the simulation) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setResizeFactor\(ResizeFactor resizeFactor\) {) p n
(        this.resizeFactor = resizeFactor;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the resize factor for the simulation) N
(     * @return) N
(     */) N
(    ) p
(public) K
( ResizeFactor getResizeFactor\(\) {) p n
(        ) S
(return) K
( resizeFactor;) p n
(VehicleGUIDecorator.java) (Page 1/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (146/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (2) 147
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    }) p n
() N
(    ) S
(/**) C n
(     * Gets the rectangle of the vehicle) N
(     * @return the rectangle representing the vehicle) N
(     */) N
(    ) p
(public) K
( Rectangle getRectangle\(\) {) p n
(        ) S
(return) K
( rectangle;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the rectangle of the vehicle) N
(     * @param rectangle the rectangle to represent the vehicle) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setRectangle\(Rectangle rectangle\) {) p n
(        this.rectangle = rectangle;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the pane of the vehicle) N
(     * @return the pane the vehicle resides in) N
(     */) N
(    ) p
(public) K
( Pane getPane\(\) {) p n
(        ) S
(return) K
( pane;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the pane of the vehicle) N
(     * @param pane the pane to set) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setPane\(Pane pane\) {) p n
(        this.pane = pane;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the color of the vehicle) N
(     * @return the Color of this vehicle) N
(     */) N
(    ) p
(public) K
( Color getColor\(\) {) p n
(        ) S
(return) K
( color;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Sets the color of the vehicle) N
(     * @param color the color of the vehicle) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( setColor\(Color color\) {) p n
(        this.color = color;) N
(    }) N
() N
(    ) S
(/**) C n
(     * Gets the vehicle associated with this decorator class) N
(     * @return the vehicle this decorator class is for) N
(     */) N
(    ) p
(public) K
( Vehicle getVehicle\(\) {) p n
(        ) S
(return) K
( decoratedVehicle;) p n
(    }) N
() N
() N
(VehicleGUIDecorator.java) (Page 2/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (147/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (3) 148
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(    ) p
(/**) C n
(     * Draws the vehicle to display in the simulation. Each vehicle would have t) N
(his method called on it.) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( drawCar\(\) {) p n
(        ) S
(double) k
( cellDimension = imageDimension;) p n
() N
(        ) S
(int) k
( numberLanes = this.getCurrentLane\(\).getRoad\(\).getNumberLanes\(\);) p n
(        ) S
(double) k
( carDimensionX = cellDimension;) p n
(        ) S
(double) k
( carDimensionY = cellDimension;) p n
(        ) S
(double) k
( angle = 0.0;) p n
() N
(        ) S
(// determine the start location of the vehicle in the map) c n
(        Coordinate coordinate = this.getCurrentCoordinate\(\);) p n
(        ) S
(double) k
([] start = coordinateToPixels\(coordinate,this.getCurrentLane\(\).get) p n
(MovingDirection\(\)\);) N
(        ) S
(double) k
( startPointX = start[0];) p n
(        ) S
(double) k
( startPointY = start[1];) p n
() N
(        ) S
(// determine the size of the vehicle based on the size of the map) c n
(        ) p
(if) K
(\(this.getCurrentLane\(\).getRoad\(\).runsVertically\(\)\)) p n
(        {) N
(            carDimensionX = cellDimension/numberLanes - 50*resizeFactor.getResiz) N
(eX\(\);) N
(            carDimensionY -= 15;) N
(            ) S
(if) K
(\(resizeFactor.getResizeX\(\) <= 0.25\) {) p n
(                carDimensionX = cellDimension/numberLanes - 80*resizeFactor.getR) N
(esizeX\(\);) N
(            }) N
(            verticalStartFudgeFactor = -carDimensionX*resizeFactor.getResizeX\(\);) N
(        }) N
(        ) S
(else) K
( {) p n
(            carDimensionY = cellDimension/numberLanes - 50*resizeFactor.getResiz) N
(eX\(\);) N
(            carDimensionX -= 15;) N
(            ) S
(if) K
(\(resizeFactor.getResizeX\(\) <= 0.25\) {) p n
(                carDimensionY = cellDimension/numberLanes - 80*resizeFactor.getR) N
(esizeX\(\);) N
(            }) N
(            horizontalStartFudgeFactor = -carDimensionY*resizeFactor.getResizeX\() N
(\);) N
(        }) N
() N
(        Rectangle r = ) S
(new) K
( Rectangle\() p n
(                startPointX,) N
(                startPointY,) N
(                carDimensionX * this.getResizeFactor\(\).getResizeX\(\),) N
(                carDimensionY * this.getResizeFactor\(\).getResizeY\(\)\);) N
() N
(        ) S
(/**) C n
(         * Simulating Ambulance using fill Transitions) N
(         *) N
(         */) N
(        FillTransition ft = ) p
(new) K
( FillTransition\(\);) p n
(        ft.setShape\(r\);) N
(        ft.setDuration\(Duration.millis\(500\)\);) N
(        ) S
(if) K
(\(this.getVehiclePriority\(\)==5\) {) p n
(            ft.setFromValue\(this.getColor\(\)\);) N
(            ft.setToValue\(Color.BLUE\);) N
(VehicleGUIDecorator.java) (Page 3/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (148/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (4) 149
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            ft.setCycleCount\(Timeline.INDEFINITE\);) p n
(            ft.setAutoReverse\() S
(true) k
(\);) p n
(            ft.setInterpolator\(Interpolator.LINEAR\);) N
(            ft.play\(\);) N
(        }) N
() N
(        ) S
(else) K n
(            r.setFill\(Color.YELLOW\);) p n
() N
(        r.setRotate\(angle\);) N
() N
(        this.setRectangle\(r\);) N
(    }) N
() N
(    ) S
(/**) C n
(     * Moves the vehicle in the GUI based on the state of the vehicle. A vehicle) N
( is either stopped, moving through) N
(     * an intersection, moving straight down a road, or left the simulation.) N
(     * @param step how much to move the vehicle by) N
(     * @param state the state of the vehicle) N
(     */) N
(    ) p
(public) K
( ) p
(void) k
( moveVehicleGUI\() p
(int) k
( step, ) p
(int) k
( state\) {) p n
() N
(        ) S
(final) K
( Timeline timeline = ) p
(new) K
( Timeline\(\);) p n
(        ) S
(//timeline.setAutoReverse\(true\);) c n
() p n
(        ) S
(/* move the car according to moving direction, below */) c n
(        ) p
(if) K
(\(state == 0\) { ) p
(// car must stop because red light, or something in the) c n
( way) N
(            timeline.stop\(\);) p n
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(state == 2\)  ) p
(//car is at intersection) c n
(        {) p n
(            TranslateTransition tt = ) S
(new) K
( TranslateTransition\(Duration.millis\(Tic) p n
(ker.getTickInterval\(\)\), this.getRectangle\(\)\);) N
(            MapDirection fromDirection = this.getPreviousLane\(\).getMovingDirecti) N
(on\(\);) N
(            MapDirection toDirection = this.getCurrentLane\(\).getMovingDirection\() N
(\);) N
() N
(            Coordinate coordinate = this.getPreviousCoordinate\(\);) N
() N
(            ) S
(double) k
( fromXPixels = rectangle.xProperty\(\).doubleValue\(\);) p n
(            ) S
(double) k
( fromYPixels = rectangle.yProperty\(\).doubleValue\(\);) p n
() N
(            ) S
(// determine new position of vehicle) c n
(            Coordinate fromTranslation = directionToTranslation\(fromDirection\);) p n
(            Coordinate toTranslation = directionToTranslation\(toDirection\);) N
(            Coordinate overallTranslation = Coordinate.add\(fromTranslation,toTra) N
(nslation\);) N
(            Coordinate newPosition = Coordinate.add\(overallTranslation,coordinat) N
(e\);) N
() N
(            ) S
(// work out rotation) c n
(            ) p
(int) k
( rotation = getRotationFromDirectionChange\(fromDirection,toDirect) p n
(ion\);) N
() N
(            ) S
(// determine pixel locations for the actual animation) c n
(            ) p
(double) k
([] toPixels = coordinateToPixels\(newPosition,toDirection\);) p n
(VehicleGUIDecorator.java) (Page 4/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (149/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5) 150
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(            ) p
(double) k
( toXPixels = toPixels[0];) p n
(            ) S
(double) k
( toYPixels = toPixels[1];) p n
() N
(            ) S
(// set the movement translation) c n
(            tt.setToX\(toXPixels - fromXPixels\);) p n
(            tt.setToY\(toYPixels - fromYPixels\);) N
() N
(            ) S
(// move and rotate the car) c n
(            RotateTransition rt = ) p
(new) K
( RotateTransition\(\);) p n
(            rt.setNode\(tt.getNode\(\)\);) N
(            rt.setByAngle\(rotation\);) N
(            rt.setDuration\(Duration.millis\(Ticker.getTickInterval\(\)\)\);) N
(            rt.play\(\);) N
(            tt.play\(\);) N
(            this.setVehicleState\(1\);) N
() N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(state == 3\) {) p n
(            ) S
(//Car deleted state) c n
(            this.getPane\(\).getChildren\(\).remove\(this.getRectangle\(\)\);) p n
(        }) N
(        ) S
(else) K
( ) p
(// car driving straight down road) c n
(        {) p n
(            TranslateTransition tt = ) S
(new) K
( TranslateTransition\(Duration.millis\(Tic) p n
(ker.getTickInterval\(\)\), this.getRectangle\(\)\);) N
() N
(            Coordinate coordinate = this.getPreviousCoordinate\(\);) N
(            MapDirection toDirection = this.getCurrentLane\(\).getMovingDirection\() N
(\);) N
() N
(            ) S
(double) k
( fromXPixels = rectangle.xProperty\(\).doubleValue\(\);) p n
(            ) S
(double) k
( fromYPixels = rectangle.yProperty\(\).doubleValue\(\);) p n
() N
(            ) S
(// determine new location for car to move to) c n
(            Coordinate toTranslation = directionToTranslation\(toDirection\);) p n
(            Coordinate newPosition = Coordinate.add\(toTranslation,coordinate\);) N
() N
(            ) S
(// determine pixel locations for the actual animation) c n
(            ) p
(double) k
([] toPixels = coordinateToPixels\(newPosition,toDirection\);) p n
(            ) S
(double) k
( toXPixels = toPixels[0];) p n
(            ) S
(double) k
( toYPixels = toPixels[1];) p n
() N
(            ) S
(// set the translation animation based on moving direction) c n
(            ) p
(if) K
(\(toDirection == MapDirection.NORTH || toDirection == MapDirection.) p n
(SOUTH\)) N
(                tt.setToY\(toYPixels - fromYPixels\);) N
(            ) S
(else) K
( ) p
(if) K
(\(toDirection == MapDirection.EAST || toDirection == MapDirect) p n
(ion.WEST\)) N
(                tt.setToX\(toXPixels - fromXPixels\);) N
() N
(            ) S
(// play the animation) c n
(            tt.play\(\);) p n
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Determines the pixel location for a vehicle if it occupies Coordinate c a) N
(nd traveling in the MapDirection direction.) N
(     * Each grid cell location is determined by the image dimension, resized by ) N
(VehicleGUIDecorator.java) (Page 5/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (150/152) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (6) 151
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(the resize factor, and the lane the) C n
(     * vehicle should occupy.) N
(     * @param c the Coordinate where the vehicle will be) N
(     * @param direction the MapDirection that coordinate is moving, to determine) N
( the proper lane for the vehicle) N
(     * @return an array of length 2, where index 0 is the x-coordinate and index) N
( 1 is the y-coordinate. This is so you can get) N
(     * both x- and y-locations at once, without calling the function twice.) N
(     */) N
(    ) p
(private) K
( ) p
(double) k
([] coordinateToPixels\(Coordinate c, MapDirection direction\) {) p n
(        ) S
(double) k
([] pixels = ) p
(new) K
( ) p
(double) k
([2];) p n
(        ) S
(int) k
( x = c.getX\(\);) p n
(        ) S
(int) k
( y = c.getY\(\);) p n
(        ) S
(if) K
(\(direction == MapDirection.NORTH\) {) p n
(            pixels[0] = x * imageDimension * resizeFactor.getResizeX\(\) + \(.1 * i) N
(mageDimension * resizeFactor.getResizeX\(\) + horizontalStartFudgeFactor\);) N
(            pixels[1] = y * imageDimension * resizeFactor.getResizeX\(\) - horizon) N
(talStartFudgeFactor;) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(direction == MapDirection.EAST\) {) p n
(            pixels[0] = x * imageDimension * resizeFactor.getResizeX\(\) + \(.1 * i) N
(mageDimension * resizeFactor.getResizeX\(\) - verticalStartFudgeFactor\);) N
(            pixels[1] = y * imageDimension * resizeFactor.getResizeX\(\) + \(.1 * i) N
(mageDimension * resizeFactor.getResizeX\(\) + verticalStartFudgeFactor\);) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(direction == MapDirection.WEST\) {) p n
(            pixels[0] = x * imageDimension * resizeFactor.getResizeX\(\) - vertica) N
(lStartFudgeFactor;) N
(            pixels[1] = y * imageDimension * resizeFactor.getResizeX\(\) + \(.6 * i) N
(mageDimension * resizeFactor.getResizeX\(\) + verticalStartFudgeFactor\);) N
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\(direction == MapDirection.SOUTH\) {) p n
(            pixels[0] = x * imageDimension * resizeFactor.getResizeX\(\) + \(.6 * i) N
(mageDimension * resizeFactor.getResizeX\(\)\) + horizontalStartFudgeFactor;) N
(            pixels[1] = y * imageDimension * resizeFactor.getResizeX\(\) + \(.1 * i) N
(mageDimension * resizeFactor.getResizeX\(\)\) - horizontalStartFudgeFactor;) N
(        }) N
() N
(        ) S
(return) K
( pixels;) p n
(    }) N
() N
(    ) S
(/**) C n
(     * Determines the vehicle rotation required based on where it is coming from) N
( and where it is going to. Possible) N
(     * rotations are -90 for turning left, 90 for turning right, or 0 for drivin) N
(g straight.) N
(     * @param fromDirection the direction the vehicle is coming from) N
(     * @param toDirection the direction the vehicle is moving to) N
(     * @return integer representing how much to rotate the vehicle by \(90, -90, ) N
(or 0\)) N
(     */) N
(    ) p
(private) K
( ) p
(int) k
( getRotationFromDirectionChange\(MapDirection fromDirection, MapDi) p n
(rection toDirection\) {) N
(        ) S
(if) K
(\() p n
(                \(fromDirection == MapDirection.SOUTH && toDirection == MapDirect) N
(ion.EAST\) ||) N
(                \(fromDirection == MapDirection.NORTH && toDirection == MapDirect) N
(ion.WEST\) ||) N
(                \(fromDirection == MapDirection.EAST && toDirection == MapDirecti) N
(VehicleGUIDecorator.java) (Page 6/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (151/152) (Wednesday March 30, 2016) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (7) 152
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 4.850123 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
(on.NORTH\) ||) p n
(                \(fromDirection == MapDirection.WEST && toDirection == MapDirecti) N
(on.SOUTH\)\) {) N
(            ) S
(return) K
( -90;) p n
(        }) N
(        ) S
(else) K
( ) p
(if) K
(\() p n
(                \(fromDirection == MapDirection.EAST && toDirection == MapDirecti) N
(on.SOUTH\) ||) N
(                \(fromDirection == MapDirection.SOUTH && toDirection == MapDirect) N
(ion.WEST\) ||) N
(                \(fromDirection == MapDirection.WEST && toDirection == MapDirecti) N
(on.NORTH\) ||) N
(                \(fromDirection == MapDirection.NORTH && toDirection == MapDirect) N
(ion.EAST\)\) {) N
(            ) S
(return) K
( 90;) p n
(        }) N
(        ) S
(else) K
( {) p n
(            ) S
(return) K
( 0;) p n
(        }) N
(    }) N
() N
(    ) S
(/**) C n
(     * Translates a moving direction into a Coordinate translation. For instance) N
(, moving north means moving 0 squares in the x) N
(     * direction and -1 square in the y direction. This is used for determining ) N
(overall movement of vehicles.) N
(     * @param fromDirection the direction the vehicle is moving from or to) N
(     * @return a Coordinate representing the 2-d translation required for that m) N
(ap direction) N
(     */) N
(    ) p
(private) K
( Coordinate directionToTranslation\(MapDirection fromDirection\) {) p n
(        ) S
(switch) K
( \(fromDirection\) {) p n
(            ) S
(case) K
( NORTH:) p n
(                ) S
(return) K
( ) p
(new) K
( Coordinate\(0,-1\);) p n
(            ) S
(case) K
( SOUTH:) p n
(                ) S
(return) K
( ) p
(new) K
( Coordinate\(0,1\);) p n
(            ) S
(case) K
( EAST:) p n
(                ) S
(return) K
( ) p
(new) K
( Coordinate\(1,0\);) p n
(            ) S
(case) K
( WEST:) p n
(                ) S
(return) K
( ) p
(new) K
( Coordinate\(-1,0\);) p n
(        }) N
() N
(        ) S
(return) K
( ) p
(null) k
(;) p n
(    }) N
(}) S
(VehicleGUIDecorator.java) (Page 7/7) (Mar 24, 16 22:38) title
border
grestore
(Printed by Violet Avkhukova) rhead
() (Wednesday March 30, 2016) (152/152) footer
end % of iso1dict
pagesave restore
showpage

%%Trailer
end
%%EOF
